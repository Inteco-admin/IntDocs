/*!
 * LMV v6.6.23
 *
 * Copyright 2022 Autodesk, Inc.
 * All rights reserved.
 *
 * This computer source code and related instructions and comments are the
 * unpublished confidential and proprietary information of Autodesk, Inc.
 * and are protected under Federal copyright and state trade secret law.
 * They may not be disclosed to, copied or used by any third party without
 * the prior written consent of Autodesk, Inc.
 *
 * Autodesk Forge Viewer Usage Limitations:
 *
 * The Autodesk Forge Viewer JavaScript must be delivered from an
 * Autodesk-hosted URL.
 */(()=>{var t={38085:(t,e,i)=>{"use strict";i.r(e),i.d(e,{hijackContextAPI:()=>d,LmvCanvasContext:()=>C});var n=i(43299);function r(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(t)))return;var i=[],n=!0,r=!1,s=void 0;try{for(var o,a=t[Symbol.iterator]();!(n=(o=a.next()).done)&&(i.push(o.value),!e||i.length!==e);n=!0);}catch(t){r=!0,s=t}finally{try{n||null==a.return||a.return()}finally{if(r)throw s}}return i}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return s(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);"Object"===i&&t.constructor&&(i=t.constructor.name);if("Map"===i||"Set"===i)return Array.from(t);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return s(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function l(t,e,i){return e&&a(t.prototype,e),i&&a(t,i),t}var h=Autodesk.Viewing,u=h.Private,p=u.VertexBufferBuilder;function d(t,e){["fillRect","strokeRect","clearRect","beginPath","closePath","moveTo","lineTo","arc","arcTo","quadraticCurveTo","bezierCurveTo","rect","fill","stroke","clip","strokeText","fillText","drawImage","save","restore","setLineDash","createPattern","beginMarkedContent","beginMarkedContentProps","endMarkedContent","setCurrentOperatorIndex","needDelegateInlineImageGroup","isLMVCanvasContext","createChildGroupContext","endChildGroupContext"].forEach((function(i){t["_original"+i]=t[i],t[i]=e[i].bind(e)}))}var f=new Array(6),c=new THREE.Vector2,y=new THREE.Box2,v=new THREE.Vector3,x=new THREE.Quaternion,g=new THREE.Vector3,P=new THREE.Vector3,m=new THREE.Matrix4,C=function(){function t(e,i,n,r,s,a,l){o(this,t);var u=h.getGlobal().document.createElement("canvas"),f=u.getContext("2d");if(u.height=e.height,u.width=e.width,this.canvasContext=f,this.viewport=e,this.toPageUnits=i,this.lineWidthScale=this.viewport.scale<1?this.viewport.scale/this.viewport.scaleByDPI:1,this.meshCallback=n,1==e.clipToViewport){var c=e.offsetX||0,y=e.offsetY||0;this.bounds=new THREE.Vector4(c*i,y*i,(e.width+c)*i,(e.height+y)*i)}this.currentMeshIndex=0,this.imageNumber=0,this.currentVbb=new p(!1),this._curPath=null,this._curClip=null,this.first=!0,this.states=[],this.glyphCache={},this.usingTextLayer=s,this.precisionTolerance=.1,this.dbId=-1,this.maxDbId=0,this.consecutiveIds=!1,h.isMobileDevice()&&Autodesk.Extensions.CompGeom.SetTesselationParams(void 0,.1),this.fontEngine=r,this.lineStyle=0,this.isScreenSpace=!1,d(f,this),this.layers={},this.defaultLayerId=0,this.currentLayerId=this.defaultLayerId,this.sequencedDbId=-1,this.taggedId=null,this.defaultVPId=0,this.currentVpId=this.defaultVPId,this.viewports=[this.createViewPortData((new THREE.Matrix4).makeScale(e.scale,e.scale,e.scale).elements)],this.viewportMap={},this.ocgStack=[],this.msdfRender=!0,this.fontAtlas=a,this.pdfRefMap=l||{}}return l(t,null,[{key:"isRef",value:function(t){return null!=t&&"number"==typeof t.num&&"number"==typeof t.gen}},{key:"refKey",value:function(t){return"".concat(t.num,"-").concat(t.gen)}},{key:"applyTransform",value:function(t,e){return[t[0]*e[0]+t[1]*e[2]+e[4],t[0]*e[1]+t[1]*e[3]+e[5]]}},{key:"inverseTransform",value:function(t){var e=t[0]*t[3]-t[1]*t[2];return[t[3]/e,-t[1]/e,-t[2]/e,t[0]/e,(t[2]*t[5]-t[4]*t[3])/e,(t[4]*t[1]-t[5]*t[0])/e]}}]),l(t,[{key:"destroy",value:function(){this.canvasContext=null,this.meshCallback=null}},{key:"updateDBId",value:function(){null!=this.taggedId?this.dbId=this.taggedId:this.consecutiveIds&&(this.sequencedDbId++,this.dbId=this.sequencedDbId),this.maxDbId=Math.max(this.maxDbId,this.dbId)}},{key:"save",value:function(){this.states.push({clip:this._curClip,consecutiveIds:this.consecutiveIds,lineDashedDef:this.lineDashedDef,lineStyle:this.lineStyle}),this.canvasContext._originalsave()}},{key:"restore",value:function(){var t=this.states.pop();t&&(this._curClip=t.clip,this.consecutiveIds=t.consecutiveIds,this.lineDashedDef=t.lineDashedDef,this.lineStyle=t.lineStyle),this.canvasContext._originalrestore()}},{key:"flushBuffer",value:function(t,e,i){if(this.currentVbb.vcount||e){var n="source-over",r=this.canvasContext.globalCompositeOperation;"multiply"!==r&&"min"!==r&&"darken"!==r&&"lighten"!==r||(n=r);var s=this.currentCompositeOperation!==n;if((e||this.currentVbb.isFull(t)||s)&&this.currentVbb.vcount){var o=this.currentVbb.toMesh();o.material={skipEllipticals:!this.currentVbb.numEllipticals,skipCircles:!this.currentVbb.numCirculars,skipTriangleGeoms:!this.currentVbb.numTriangleGeoms,useInstancing:this.currentVbb.useInstancing,isScreenSpace:!this.currentImage,hasLineStyles:this.currentVbb.hasLineStyles,msdfFontTexture:!!this.hasMSDFContent,viewportBounds:this.bounds,imageUVTexture:2===i},this.currentImage&&(o.material.image=this.currentImage,o.material.image.name=this.currentImage.cacheKey||this.imageNumber++,o.material.compositeCanvasColor="#ffffff",o.material.opacity=this.canvasContext.globalAlpha,this.currentImage=null),o.material.compositeOperation=this.currentCompositeOperation,this.meshCallback(o,this.currentMeshIndex++),this.currentVbb.reset(0),this.hasMSDFContent=!1}this.currentCompositeOperation=n}}},{key:"addPolyTriangle",value:function(e,i,n,r,s,o){var a=this,l=null,h=this.currentVpId;function u(t,e){if(t>e){var i=t;t=e,e=i}if(l[t]){var n=l[t],r=n.lastIndexOf(e);-1==r?n.push(e):n[r]=-1}else l[t]=[e]}function p(t,i){if(t>i){var o=t;t=i,i=o}var u=l[t];u&&(-1!=u.indexOf(i)&&(a.flushBuffer(4),a.currentVbb.addSegment(e[2*t],e[2*t+1],e[2*i],e[2*i+1],a.currentLayerId,-.5,n,r,s,h,a.lineStyle)))}if(o){l=new Array(e.length/2);for(var d=0,f=i.length;d<f;d+=3){var c=i[d],y=i[d+1],v=i[d+2];u(c,y),u(y,v),u(v,c)}}if(isNaN(n)&&(!0===n.isPattern||n.imageTransform)){this.flushBuffer(0,!0);var x=n.image,g=e.length/2;this.flushBuffer(g);var P,m,C,_,I=this.currentVbb,E=I.vcount,T=this.getCurrentTransform();if(n.isGradient?(P=this._curPath.bbox.min.x,m=this._curPath.bbox.min.y,C=this._curPath.bbox.max.x-P,_=this._curPath.bbox.max.y-m):(P=this.tx(0,0,T),m=this.ty(0,0,T),C=Math.abs(this.tx(x.width,x.height,T)-P),_=Math.abs(this.ty(x.width,x.height,T)-m)),"no-repeat"!==n.repetition||n.isGradient)if(n.imageTransform)for(var b=0;b<g;++b){var L=e[2*b],S=e[2*b+1],A=t.applyTransform([L,S],n.imageTransform);I.addVertexImagePolytriangle(L,S,A[0],A[1],4294967295,r,s,h)}else for(var w=0;w<g;++w){var N=e[2*w],O=e[2*w+1],X=(N-P)/C,Y=(O-m)/_;n.isGradient&&(Y=1-Y),I.addVertexImagePolytriangle(N,O,X,Y,4294967295,r,s,h)}else{var F=this.tx(x.width,x.height,T),M=this.ty(x.width,x.height,T);I.addVertexImagePolytriangle(P,m,0,0,4294967295,r,s,h),I.addVertexImagePolytriangle(P,M,0,-1,4294967295,r,s,h),I.addVertexImagePolytriangle(F,M,1,-1,4294967295,r,s,h),I.addVertexImagePolytriangle(F,m,1,0,4294967295,r,s,h),i=[0,1,2,0,2,3]}this.currentImage=x,I.addIndices(i,E),this.flushBuffer(0,!0,2)}else if(this.currentVbb.useInstancing)for(var B=i.length,D=0;D<B;D+=3){var k=i[D],R=i[D+1],W=i[D+2];this.flushBuffer(4),this.currentVbb.addTriangleGeom(e[2*k],e[2*k+1],e[2*R],e[2*R+1],e[2*W],e[2*W+1],n,r,s,h),o&&(p(k,R),p(R,W),p(W,k))}else{var q=e.length/2;this.flushBuffer(q);for(var V=this.currentVbb,z=V.vcount,H=0;H<q;++H){var Z=e[2*H],G=e[2*H+1];V.addVertexPolytriangle(Z,G,n,r,s,h)}V.addIndices(i,z),o&&function(){for(var t=0,i=l.length;t<i;t++){var o=l[t];if(o)for(var u=0;u<o.length;u++){var p=o[u];-1!=p&&(a.flushBuffer(4),a.currentVbb.addSegment(e[2*t],e[2*t+1],e[2*p],e[2*p+1],a.currentLayerId,-.5,n,r,s,h,a.lineStyle))}}}()}}},{key:"createGradientData",value:function(t){return new _(t)}},{key:"getFillColor",value:function(){var t=this,e=this.canvasContext.fillStyle;if(e&&!0===e.isPattern)return e;if(e instanceof CanvasGradient)return function(e){var i=e.startPoint.slice(),n=e.endPoint.slice(),r=t.viewport.scale||1,s=(t._curPath.bbox.max.x-t._curPath.bbox.min.x)/t.toPageUnits/r,o=(t._curPath.bbox.max.y-t._curPath.bbox.min.y)/t.toPageUnits/r,a=t._curPath.bbox.min.x/t.toPageUnits/r,l=t._curPath.bbox.min.y/t.toPageUnits/r;i[0]-=a,i[1]-=l,n[0]-=a,n[1]-=l;var h=document.createElement("canvas");h.width=s,h.height=o;var u=h.getContext("2d"),p=e.generateCanvasGradient(u,i,n);u.fillStyle=p,u.fillRect(0,0,h.width,h.height);var d=t.createPattern(h,"no-repeat");return d.isGradient=!0,d}(new _(e));if("string"!=typeof e)return console.warn("Unsupported fill style."),0;var i=parseInt(e.slice(1),16);return 255*this.canvasContext.globalAlpha<<24|(255&i)<<16|65280&i|i>>16&255}},{key:"getStrokeColor",value:function(){var t=this.canvasContext;if(this.lastStrokeStyle===t.strokeStyle&&t.globalAlpha===this.lastAlpha)return this.lastRgb;var e=parseInt(t.strokeStyle.slice(1),16),i=255*t.globalAlpha<<24|(255&e)<<16|65280&e|e>>16&255;return this.lastRgb=i,this.lastStrokeStyle=t.strokeStyle,this.lastAlpha=t.globalAlpha,i}},{key:"getCurrentTransform",value:function(){var t=this.canvasContext.mozCurrentTransform;if(this.isFontChar){var e=this.invXform,i=t[0],n=t[1],r=t[2],s=t[3],o=t[4],a=t[5];return f[0]=e[0]*i+e[2]*n,f[1]=e[1]*i+e[3]*n,f[2]=e[0]*r+e[2]*s,f[3]=e[1]*r+e[3]*s,f[4]=e[0]*o+e[2]*a+e[4],f[5]=e[1]*o+e[3]*a+e[5],f}return t}},{key:"tx",value:function(t,e,i){return(t*(i=i||this.getCurrentTransform())[0]+e*i[2]+i[4])*(this.isFontChar?1:this.toPageUnits)}},{key:"ty",value:function(t,e,i){return(t*(i=i||this.getCurrentTransform())[1]+e*i[3]+i[5])*(this.isFontChar?1:this.toPageUnits)}},{key:"scaleValue",value:function(t,e){return e=e||this.getCurrentTransform(),this.toPageUnits*Math.sqrt(Math.abs(e[0]*e[3]-e[1]*e[2]))*t}},{key:"transformBox",value:function(t,e,i){return e=e||this.getCurrentTransform(),y.makeEmpty(),c.set(this.tx(t.min.x,t.min.y,e),this.ty(t.min.x,t.min.y,e)),y.expandByPoint(c),c.set(this.tx(t.max.x,t.min.y,e),this.ty(t.max.x,t.min.y,e)),y.expandByPoint(c),c.set(this.tx(t.max.x,t.max.y,e),this.ty(t.max.x,t.max.y,e)),y.expandByPoint(c),c.set(this.tx(t.min.x,t.max.y,e),this.ty(t.min.x,t.max.y,e)),y.expandByPoint(c),i?(i.copy(y),i):y.clone()}},{key:"fillRect",value:function(t,e,i,n){this.updateDBId(),this.rect(t,e,i,n),this.dbId=this.first?-1:this.dbId,this.first=!1,this.fill(),this.beginPath()}},{key:"strokeRect",value:function(t,e,i,n){console.log("strokeRect")}},{key:"clearRect",value:function(t,e,i,n){console.log("clearRect")}},{key:"_beginTextChar",value:function(t,e,i,n,r){this.isFontChar=!0,this.invXform=this.canvasContext.mozCurrentTransformInverse,this.hashKey=t.charCodeAt(0)+"/"+n.loadedName+"/"+r,this.cachedGlyph=this.glyphCache[this.hashKey],this.cachedGlyph?this.skipPath=!0:this.skipPath=!1}},{key:"drawMSDFText",value:function(t,e,i,r,s){var o=r.name;function a(t,e,i,n,r,s){return Math.abs((s-n)*t-(r-i)*e+r*n-s*i)/Math.sqrt((s-n)*(s-n)+(r-i)*(r-i))}if(this.fontAtlas&&this.fontAtlas.charsMap&&this.fontAtlas.charsMap[o]){var l=this.fontAtlas.charsMap[o][t.charCodeAt(0)];if(null==l)return!1;this.currentVbb.isFull(4)&&this.flushBuffer(0,!0),this.hasMSDFContent=!0;var h=this.fontAtlas.chars[l];if(h.page>0)return!1;for(var u=this.fontAtlas.common[h.common],p=s/this.fontAtlas.info[h.info].size,d=h.width*(p+0),f=h.inverseYAxis?-1:1,c=h.height*(p+i)*f,y=h.txoffset*(p+0),v=h.tyoffset*(p+i)*-f,x=[y,v,y,v+c,y+d,v+c,y+d,v],g=[],P=0;P<x.length;P+=2)g.push(this.tx(x[P],x[P+1])),g.push(this.ty(x[P],x[P+1]));var m=[];if(m=h.inverseYAxis?[h.x/u.scaleW,1-h.y/u.scaleH,h.x/u.scaleW,1-(h.y+h.height)/u.scaleH,(h.x+h.width)/u.scaleW,1-(h.y+h.height)/u.scaleH,(h.x+h.width)/u.scaleW,1-h.y/u.scaleH]:[h.x/u.scaleW,1-(h.y+h.height)/u.scaleH,h.x/u.scaleW,1-h.y/u.scaleH,(h.x+h.width)/u.scaleW,1-h.y/u.scaleH,(h.x+h.width)/u.scaleW,1-(h.y+h.height)/u.scaleH],this._curClip){var C=new n.Path2D(this.precisionTolerance),_=0;C.moveTo(g[_++],g[_++]),C.lineTo(g[_++],g[_++]),C.lineTo(g[_++],g[_++]),C.lineTo(g[_++],g[_++]),C.closePath();var I=C.flattened||C.flatten(!0),E=this._curClip.flattened||this._curClip.flatten(!0),T=C.preCheckForClipping(this,E,I,!1,!1);if(T.needClipping){for(var b=C.msdfClipping(E),L=g[0],S=g[1],A=g[6],w=g[7],N=g[2],O=g[3],X=Math.sqrt((A-L)*(A-L)+(w-S)*(w-S)),Y=Math.sqrt((N-L)*(N-L)+(O-S)*(O-S)),F=0;F<b.length;F++){var M=b[F];this.currentVbb.isFull(M.vertices.length)&&this.flushBuffer(0,!0);for(var B=this.currentVbb.vcount,D=0;D<M.vertices.length;D+=2){var k=M.vertices[D],R=M.vertices[D+1],W=a(k,R,L,S,A,w),q=a(k,R,L,S,N,O),V=m[0]+(m[4]-m[0])*(q/X),z=m[1]+(m[5]-m[1])*(W/Y);this.currentVbb.addVertexMSDFPolytriangle(k,R,V,z,this.getFillColor(),this.dbId,this.currentLayerId,0)}this.currentVbb.addIndices(M.indices,B)}return this.currentImage=this.fontAtlas.pages[h.page],!0}if(T.needCancel)return!0}this.currentVbb.isFull(4)&&this.flushBuffer(0,!0);for(var H=this.currentVbb.vcount,Z=x.length/2,G=0;G<Z;G++)this.currentVbb.addVertexMSDFPolytriangle(g[2*G],g[2*G+1],m[2*G],m[2*G+1],this.getFillColor(),this.dbId,this.currentLayerId,0);return this.currentVbb.addIndices([0,2,1,0,2,3],H),this.currentImage=this.fontAtlas.pages[h.page],!0}return!1}},{key:"beginPath",value:function(t,e,i,r,s){this.updateDBId(),"string"==typeof t&&r&&s?this.fontAtlas&&this.drawMSDFText(t,e,i,r,s)||!0===this.usingTextLayer?this.skipPath=!0:this._beginTextChar(t,e,i,r,s):(this.skipPath=!1,this.isFontChar=!1,this.cachedGlyph=null),this.skipPath?this._curPath=null:(this._curPath=new n.Path2D(this.isFontChar?1e-4:this.precisionTolerance),this._curPath.setTessParams(this.tessParams))}},{key:"closePath",value:function(){this.skipPath||(this._curPath.closePath(),this.cachedGlyph=null)}},{key:"moveTo",value:function(t,e){if(!this.skipPath){this._curPath||this.beginPath();var i=this.getCurrentTransform();this._curPath.moveTo(this.tx(t,e,i),this.ty(t,e,i))}}},{key:"lineTo",value:function(t,e){if(!this.skipPath){var i=this.getCurrentTransform();this._curPath.lineTo(this.tx(t,e,i),this.ty(t,e,i))}}},{key:"arc",value:function(t,e,i,n,r,s){this.skipPath||this._curPath.arc(t,e,i,n,r,s)}},{key:"arcTo",value:function(t,e,i,n,r){if(!this.skipPath){var s=this.getCurrentTransform();this._curPath.arcTo(this.tx(t,e,s),this.ty(t,e,s),this.tx(i,n,s),this.ty(i,n,s),this.scaleValue(r,s))}}},{key:"quadraticCurveTo",value:function(t,e,i,n){if(!this.skipPath){var r=this.getCurrentTransform();this._curPath.quadraticCurveTo(this.tx(t,e,r),this.ty(t,e,r),this.tx(i,n,r),this.ty(i,n,r))}}},{key:"bezierCurveTo",value:function(t,e,i,n,r,s){if(!this.skipPath){var o=this.getCurrentTransform();this._curPath.bezierCurveTo(this.tx(t,e,o),this.ty(t,e,o),this.tx(i,n,o),this.ty(i,n,o),this.tx(r,s,o),this.ty(r,s,o))}}},{key:"ellipse",value:function(t,e,i,n,r,s,o,a){if(!this.skipPath){var l=this.getCurrentTransform();this._curPath.ellipse(this.tx(t,e,l),this.ty(t,e,l),this.scaleValue(i,l),this.scaleValue(n,l),r,s,o,a)}}},{key:"rect",value:function(t,e,i,n){if(!this.skipPath){var r=this.getCurrentTransform();this._curPath||this.beginPath(),this._curPath.moveTo(this.tx(t,e,r),this.ty(t,e,r)),this._curPath.lineTo(this.tx(t+i,e,r),this.ty(t+i,e,r)),this._curPath.lineTo(this.tx(t+i,e+n,r),this.ty(t+i,e+n,r)),this._curPath.lineTo(this.tx(t,e+n,r),this.ty(t,e+n,r)),this._curPath.closePath()}}},{key:"fill",value:function(){var t=!1;if(arguments.length){var e,i=(e=arguments.length-1)<0||arguments.length<=e?void 0:arguments[e];"boolean"==typeof i&&(t=i)}this.isFontChar&&!this.cachedGlyph&&(this.glyphCache[this.hashKey]=this._curPath,this.cachedGlyph=this._curPath,this.cachedGlyph.isFontChar=!0),this.isFontChar=!1,this.cachedGlyph?this.cachedGlyph.fill(this,this.getFillColor(),this.dbId,this.currentLayerId,this._curClip,!0):this._curPath&&this._curPath.fill(this,this.getFillColor(),this.dbId,this.currentLayerId,this._curClip,!1,t),this.skipPath=!1}},{key:"stroke",value:function(){this.isFontChar&&!this.cachedGlyph&&(this.glyphCache[this.hashKey]=this._curPath,this.cachedGlyph=this._curPath,this.cachedGlyph.isFontChar=!0),this.updateLineDashStyle(),this.isFontChar=!1;var t=this.isScreenSpace?-1:1;this.cachedGlyph?this.cachedGlyph.stroke(this,t*this.scaleValue(this.canvasContext.lineWidth*this.lineWidthScale),this.getStrokeColor(),this.dbId,this.currentLayerId,this._curClip,!0,this.lineStyle):this._curPath&&this._curPath.stroke(this,t*this.scaleValue(this.canvasContext.lineWidth*this.lineWidthScale),this.getStrokeColor(),this.dbId,this.currentLayerId,this._curClip,!1,this.lineStyle),this.skipPath=!1}},{key:"clip",value:function(t,e){void 0!==e&&void 0!==t?(this._curClip=t,console.log("Probably unsupported use case")):(this._curClip?this._curClip=this._curClip.clip(this._curPath,t):this._curClip=this._curPath,this._curPath=null)}},{key:"strokeText",value:function(t,e,i,n,r,s){var o=this.canvasContext;o.save(),o.translate(e,i),this.fontEngine.drawText(this,t,0,0,r,s),this.stroke(),o.restore()}},{key:"fillText",value:function(t,e,i,n,r,s){var o=this.canvasContext;o.save(),o.translate(e,i),this.fontEngine.drawText(this,t,0,0,r,s),this.fill(),o.restore()}},{key:"getRotationAndScale",value:function(t){m.elements[0]=t[0],m.elements[1]=t[1],m.elements[4]=t[2],m.elements[5]=t[3],m.elements[12]=t[4],m.elements[13]=t[5],m.decompose(v,x,g);var e=Math.sqrt(1-x.w*x.w);P.set(x.x/e,x.y/e,x.z/e);var i=2*Math.acos(Math.max(Math.min(1,x.w),-1));return x.z<0&&(i=-i),i<0&&(i+=2*Math.PI),{angle:i,scale:g}}},{key:"redrawImage",value:function(t,e,i,n){var s=[e*Math.cos(n),i*Math.sin(n),-e*Math.sin(n),i*Math.cos(n),0,0],o=s[0],a=s[1],l=s[2],h=s[3],u=s[4],p=s[5],d=[[0,0],[t.width,0],[t.width,t.height],[0,t.height]].map((function(t){var e=r(t,2),i=e[0],n=e[1];return[o*i+a*n+u,l*i+h*n+p]})),f=r(d,4),c=f[0],y=f[1],v=f[2],x=f[3],g=[Math.min(c[0],y[0],v[0],x[0]),Math.min(c[1],y[1],v[1],x[1]),Math.max(c[0],y[0],v[0],x[0]),Math.max(c[1],y[1],v[1],x[1])],P=g[0],m=g[1],C=g[2],_=g[3],I=document.createElement("canvas");I.width=C-P,I.height=_-m;var E=I.getContext("2d");return E.transform.apply(E,s),E.drawImage(t,P,m),t.width=0,t.height=0,I}},{key:"drawImage",value:function(e,i,r,s,o,a,l,h,u){var p,d=this._curClip;if(this.inlineImageGroups&&null!=this.inlineImageGroups.map[this.currentOpIndex]){var f=this.inlineImageGroups.map[this.currentOpIndex];if(!0===(p=this.inlineImageGroups.groups[f]).rendered)return;p.rendered=!0,e=p.canvas,d=void 0}if(0!==e.width&&0!==e.height){var c=this.getCurrentTransform(),y=this.getRotationAndScale(c),v=y.angle,x=y.scale;if(p){var g=[Math.sign(x.x),Math.sign(x.y)],P=g[0],m=g[1];(P<0||m<0)&&(e=this.redrawImage(e,P,m,-v));var C=p.flipY?e.height:0;Math.abs(Math.cos(v)-1)>1e-10&&(C=0),C*=p.minScale,a=p.bounds.min.x,l=p.bounds.min.y+C,h=e.width*p.minScale,u=e.height*p.minScale}if(void 0===a&&(a=i,l=r,h=s,u=o),void 0===h&&(h=e.width,u=e.height),h)if(d){var _=this.tx(a,l),I=this.ty(a,l),E=this.tx(a+h,l),T=this.ty(a+h,l),b=this.tx(a+h,l+u),L=this.ty(a+h,l+u),S=this.tx(a,l+u),A=this.ty(a,l+u),w=[b-S,L-A,_-S,I-A,S,A],N={image:e,imageTransform:t.inverseTransform(w)},O=new n.Path2D(this.precisionTolerance);O.moveTo(_,I),O.lineTo(E,T),O.lineTo(b,L),O.lineTo(S,A),O.closePath(),d.fill(this,N,this.dbId,this.currentLayerId,O,!1,!1)}else{var X=this.tx(a+h/2,l+u/2),Y=this.ty(a+h/2,l+u/2),F=h*x.x*this.toPageUnits,M=-u*x.y*this.toPageUnits;this.flushBuffer(0,!0),this.currentVbb.addTexturedQuad(X,Y,F,M,v,4294902015,0,this.currentLayerId,0),this.currentImage=e,this.flushBuffer(0,!0,1)}else console.warn("Zero size image, skipping")}else console.warn("Zero size image, skipping")}},{key:"_processProperties",value:function(e){for(var i in t.isRef(e)&&(e=this.pdfRefMap[t.refKey(e)]),e)t.isRef(e[i])&&(e[i]=this.pdfRefMap[t.refKey(e[i])]);return e}},{key:"_getPrecision",value:function(t){return void 0!==t?t:5}},{key:"beginMarkedContent",value:function(t){t&&(t=this._processProperties(t));var e=t.name||t.DBID;if(isNaN(e)?this.taggedId=null:this.taggedId=parseInt(e),null!==this.taggedId&&this.dbId!==this.taggedId&&this.updateDBId(),t.VP){this.currentVpId=this.viewports.length;var i=this._getModelToViewportMatrix(t.VP,!!t.UNITS),n=this._getPrecision(t.PRECISION);this.viewports.push(this.createViewPortData(i,t.UNITS,n))}this.ocgStack.push({taggedId:this.taggedId,viewPortId:this.currentVpId})}},{key:"beginMarkedContentProps",value:function(t,e){if(e&&(e=this._processProperties(e)),"OC"===t){var i=e.ocgId,n=this.layers[i];void 0===n&&(n=this.defaultLayerId),this.currentLayerId=n,this.ocgStack.push({layerId:this.currentLayerId})}else if(isNaN(t)||(this.taggedId=parseInt(t),this.dbId!==this.taggedId&&this.updateDBId()),e){if(e.VP){this.currentVpId=this.viewports.length;var r=this._getModelToViewportMatrix(e.VP,!!e.UNITS),s=this._getPrecision(e.PRECISION);this.viewports.push(this.createViewPortData(r,e.UNITS,s))}this.ocgStack.push({viewPortId:this.currentVpId,taggedId:this.taggedId})}else this.ocgStack.push({})}},{key:"endMarkedContent",value:function(){var t=this.ocgStack.pop(),e=this.taggedId;if(t&&(null!=t.taggedId&&(this.taggedId=null),t.layerId&&(this.currentLayerId=this.defaultLayerId),t.viewPortId&&(this.currentVpId=this.defaultVPId)),this.ocgStack.length>0){var i=this.ocgStack[this.ocgStack.length-1];null!=i.taggedId&&(this.taggedId=i.taggedId),null!=i.currentLayerId&&(this.currentLayerId=i.currentLayerId),null!=i.viewPortId&&(this.currentVpId=i.viewPortId)}else this.currentLayerId=this.defaultLayerId,this.taggedId=null,this.currentVpId=this.defaultVPId;e!==this.taggedId&&this.updateDBId()}},{key:"setLineStyleParam",value:function(t){if(!this.lineStyleInitialized){for(var e=u.LineStyleDefs.length,i=1,n=0;n<u.LineStyleDefs.length;n++)i=Math.max(u.LineStyleDefs[n].def.length,i);var r=u.createLinePatternTextureData(Math.max(t.width,i),t.height+e+1),s=r.tex,o=r.pw,a=r.lineStyleTex;this.lineStyleIndex=0,this.lineStylePw=o,this.lineStyleTexData=s,this.lineStyleTexture=a,this.lineStyleIndexMap={};for(var l=0;l<u.LineStyleDefs.length;l++)this.addNewDashedLineStyle(u.LineStyleDefs[l],96);this.lineStyle=0,this.lineStyleInitialized=!0}}},{key:"addNewDashedLineStyle",value:function(t,e){var i=t.def.join("/");if(null!=this.lineStyleIndexMap[i])return this.lineStyleIndexMap[i];u.createLinePatternForDef(t,this.lineStyleTexData,this.lineStyleIndex,this.lineStylePw,e);var n=this.lineStyleIndex;return this.lineStyleIndexMap[i]=n,this.lineStyleIndex++,n}},{key:"setLineDash",value:function(t){this.lineStyleInitialized||this.setLineStyleParam({width:5,height:4}),this.lineDashedDef=t}},{key:"createPattern",value:function(t,e){var i=this.canvasContext._originalcreatePattern(t,e);return i.image=t,i.repetition=e,i.isPattern=!0,i}},{key:"updateLineDashStyle",value:function(){var t=this.lineDashedDef;if(t)if(t.length>0){for(var e=this.getCurrentTransform(),i=[],n=0;n<t.length;n++){var r=(t[n]*e[0]+t[n]*e[2])*this.toPageUnits;r=parseFloat(r.toFixed(6)),i.push(r)}this.lineStyle=this.addNewDashedLineStyle({def:i},96/72/this.toPageUnits)}else this.lineStyle=0}},{key:"setCircleInfo",value:function(t){this.circleInfo=t}},{key:"setCurrentOperatorIndex",value:function(t){if(this.currentOpIndex=t,this.circleInfo&&this.circleInfo[t]){var e=this.getCurrentTransform(),i=this.tx(this.circleInfo[t][0],this.circleInfo[t][1],e),n=this.ty(this.circleInfo[t][0],this.circleInfo[t][1],e),r=this.currentVbb.addVertexLine(i,n,0,1e-4,0,0,33554431,this.dbId,this.currentLayerId,this.currentVpId);this.currentVbb.finalizeQuad(r)}}},{key:"setInlineImageGroups",value:function(t){t&&t.groups.length>0&&(this.inlineImageGroups=t)}},{key:"needDelegateInlineImageGroup",value:function(){return this.inlineImageGroups&&null!=this.inlineImageGroups.map[this.currentOpIndex]}},{key:"setTessParams",value:function(t){this.tessParams=t}},{key:"finish",value:function(){this.flushBuffer(0,!0),this.fontAtlas=null}},{key:"createViewPortData",value:function(t,e,i){return i=void 0!==i?i:5,{units:e||"feet and inches",transform:t,geom_metrics:this.initGeomMetrics(),precision:i}}},{key:"isLMVCanvasContext",value:function(){return!0}},{key:"initGeomMetrics",value:function(){return{arcs:0,circles:0,circ_arcs:0,viewports:0,clips:0,colors:0,db_ids:0,dots:0,fills:0,layers:0,line_caps:0,line_joins:0,line_patterns:0,line_pat_refs:0,plines:0,pline_points:0,line_weights:0,links:0,miters:0,ptris:0,ptri_indices:0,ptri_points:0,rasters:0,texts:0,strings:[]}}},{key:"addContextCurrentTransform",value:function(){var t=this.canvasContext;t.mozCurrentTransform||(t._originalSave=t.save,t._originalRestore=t.restore,t._originalRotate=t.rotate,t._originalScale=t.scale,t._originalTranslate=t.translate,t._originalTransform=t.transform,t._originalSetTransform=t.setTransform,t._transformMatrix=t._transformMatrix||[1,0,0,1,0,0],t._transformStack=[],Object.defineProperty(t,"mozCurrentTransform",{get:function(){return this._transformMatrix}}),Object.defineProperty(t,"mozCurrentTransformInverse",{get:function(){var t=this._transformMatrix,e=t[0],i=t[1],n=t[2],r=t[3],s=t[4],o=t[5],a=e*r-i*n,l=i*n-e*r;return[r/a,i/l,n/l,e/a,(r*s-n*o)/l,(i*s-e*o)/a]}}),t.save=function(){var t=this._transformMatrix;this._transformStack.push(t),this._transformMatrix=t.slice(0,6),this._originalSave()},t.restore=function(){var t=this._transformStack.pop();t&&(this._transformMatrix=t,this._originalRestore())},t.translate=function(t,e){var i=this._transformMatrix;i[4]=i[0]*t+i[2]*e+i[4],i[5]=i[1]*t+i[3]*e+i[5],this._originalTranslate(t,e)},t.scale=function(t,e){var i=this._transformMatrix;i[0]=i[0]*t,i[1]=i[1]*t,i[2]=i[2]*e,i[3]=i[3]*e,this._originalScale(t,e)},t.transform=function(e,i,n,r,s,o){var a=this._transformMatrix;this._transformMatrix=[a[0]*e+a[2]*i,a[1]*e+a[3]*i,a[0]*n+a[2]*r,a[1]*n+a[3]*r,a[0]*s+a[2]*o+a[4],a[1]*s+a[3]*o+a[5]],t._originalTransform(e,i,n,r,s,o)},t.setTransform=function(e,i,n,r,s,o){this._transformMatrix=[e,i,n,r,s,o],t._originalSetTransform(e,i,n,r,s,o)},t.rotate=function(t){var e=Math.cos(t),i=Math.sin(t),n=this._transformMatrix;this._transformMatrix=[n[0]*e+n[2]*i,n[1]*e+n[3]*i,n[0]*-i+n[2]*e,n[1]*-i+n[3]*e,n[4],n[5]],this._originalRotate(t)})}},{key:"createChildGroupContext",value:function(){var e,i;this.flushBuffer(0,!0);var n=null===(e=this.canvasContext)||void 0===e?void 0:e.globalAlpha;var r=new t(this.viewport,this.toPageUnits,(function(t){"number"==typeof n&&t.material.opacity!==n&&(t.material.hasOpacity=!!n,t.material.opacity=n),i.groupChildMeshes.push(t)}),this.fontEngine,this.usingTextLayer,this.fontAtlas,this.pdfRefMap);return r.consecutiveIds=!0,r.groupChildMeshes=[],r.sequencedDbId=this.sequencedDbId,r.dbId=this.dbId,r.imageNumber=this.imageNumber,i=r,r.addContextCurrentTransform(),r.parent=this,r.canvasContext.isLMVGroupContext=!0,r.canvasContext}},{key:"endChildGroupContext",value:function(){var t=this;if(this.flushBuffer(0,!0),this.groupChildMeshes&&this.groupChildMeshes.length>0){var e=this,i=e.parent.getCurrentTransform(),n=i[4]*e.toPageUnits,r=i[5]*e.toPageUnits,s=new THREE.Matrix4;s.makeTranslation(n,r,0);var o=0;this.groupChildMeshes.map((function(i){switch(e.parent.canvasContext.globalCompositeOperation){case"darken":i.material.compositeOperation="min";break;case"lighten":i.material.compositeOperation="max";break;case"multiply":i.material.compositeOperation="multiply"}i.groupMatrix?i.groupMatrix.multiply(s):i.groupMatrix=s.clone(),e.parent.meshCallback(i,o+t.parent.currentMeshIndex),o++})),this.parent.sequencedDbId=this.sequencedDbId,this.parent.currentMeshIndex+=o,this.parent.dbId=this.dbId,this.parent.imageNumber=this.imageNumber,this.groupChildMeshes.length=0}}},{key:"_getModelToViewportMatrix",value:function(t,e){var i="string"==typeof t?JSON.parse(t):t;return e&&(i[0]*=this.viewport.scale,i[5]*=this.viewport.scale),i}}]),t}(),_=function(){function t(e){if(o(this,t),Object.prototype.hasOwnProperty.call(e,"rawData")){var i=e.rawData;this.type=i[1],this.colorStops=i[3],this.startPoint=i[4],this.endPoint=i[5],this.startRadius=i[6],this.endRadius=i[7]}else Object.assign(this,e)}return l(t,[{key:"isValid",value:function(){return!!(this.type&&this.startPoint&&this.endPoint&&this.colorStops)&&("radial"!==this.type||void 0!==this.startRadius&&void 0!==this.endRadius)}},{key:"getFillStyle",value:function(t){if(this.isValid()){var e=t.createLinearGradient(0,0,1,1);return Object.assign(e,this),e}}},{key:"generateCanvasGradient",value:function(t,e,i){if(this.isValid()){var n=this.type,r=this.colorStops,s=e||this.startPoint,o=i||this.endPoint,a=this.startRadius,l=this.endRadius,h=null;"axial"===n||"linear"===n?h=t.createLinearGradient(s[0],s[1],o[0],o[1]):"radial"===n&&(h=t.createRadialGradient(s[0],s[1],a,o[0],o[1],l));for(var u=0,p=r.length;u<p;++u){var d=r[u];h.addColorStop(d[0],d[1])}return h}}}]),t}()},44763:(t,e,i)=>{var n=i(67810),r=function(t,e){if(this.p=t,this.q=e,t.y>e.y)this.q=t,this.p=e;else if(t.y===e.y)if(t.x>e.x)this.q=t,this.p=e;else if(t.x===e.x)throw new Error("poly2tri Invalid Edge constructor: repeated points!",[t]);this.q._p2t_edge_list||(this.q._p2t_edge_list=[]),this.q._p2t_edge_list.push(this)};n.SweepContext.prototype.initEdges=function(t,e){var i,n=t.length,s=e?t.length-1:t.length;for(i=0;i<s;++i)this.edge_list.push(new r(t[i],t[(i+1)%n]))},t.exports=n},53233:(t,e,i)=>{"use strict";i.r(e),i.d(e,{DefaultTessParams:()=>n,SetTesselationParams:()=>r,TesselateCubic:()=>a,TesselateQuad:()=>l,getCubeBezierPoint:()=>h});var n={numIterations:100,minSegLenFraction:.05};function r(t,e){t&&(n.numIterations=t),e&&(n.minSegLenFraction=e)}function s(t,e,i,n){return Math.sqrt((t-i)*(t-i)+(e-n)*(e-n))}function o(t,e){if(t>4*e&&e>0){var i=Math.sqrt(t/e);t=e*(i=Math.min(4,i))}return t}function a(t,e,i,r,a,l,h,u,p,d,f,c){f=f||n;var y=s(e,i,r,a)+s(r,a,l,h)+s(l,h,u,p);c||(d=o(d,y));for(var v=(d=d||1/f.minSegLenFraction)*f.minSegLenFraction,x=1/f.numIterations,g=x*x*x,P=3*x,m=P*x,C=m+m,_=6*g,I=e-2*r+l,E=i-2*a+h,T=3*(r-l)-e+u,b=3*(a-h)-i+p,L=e,S=i,A=(r-e)*P+I*m+T*g,w=(a-i)*P+E*m+b*g,N=I*C+T*_,O=E*C+b*_,X=T*_,Y=b*_,F=0,M=0|1/x-.5,B=0;B<M;B++)L+=A,S+=w,A+=N,w+=O,O+=Y,N+=X,(F+=Math.sqrt(A*A+w*w))>=v&&(t.lineTo(L,S),F=0);t.lineTo(u,p)}function l(t,e,i,r,a,l,h,u,p,d){p=p||n;var f=s(e,i,r,a)+s(r,a,l,h);d||(u=o(u,f));for(var c=(u=u||1/p.minSegLenFraction)*p.minSegLenFraction,y=1/p.numIterations,v=y*y,x=e-2*r+l,g=i-2*a+h,P=e,m=i,C=2*(r-e)*y+x*v,_=2*(a-i)*y+g*v,I=2*x*v,E=2*g*v,T=0,b=0|1/y-.5,L=0;L<b;L++)P+=C,m+=_,C+=I,_+=E,(T+=Math.sqrt(C*C+_*_))>=c&&(t.lineTo(P,m),T=0);t.lineTo(l,h)}function h(t,e,i,n,r,s,o,a,l,h){var u=h||{x:void 0,y:void 0},p=1-t,d=p*p*p,f=3*p*p*t,c=3*p*t*t,y=t*t*t;return u.x=d*e+f*n+c*s+y*a,u.y=d*i+f*r+c*o+y*l,u}},31509:(t,e,i)=>{"use strict";i.r(e),i.d(e,{ComplexPolygon:()=>d});var n=i(44763),r=i.n(n),s=i(60762),o=i(90865),a=i(77953);function l(t,e){var i;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(i=function(t,e){if(!t)return;if("string"==typeof t)return h(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);"Object"===i&&t.constructor&&(i=t.constructor.name);if("Map"===i||"Set"===i)return Array.from(t);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return h(t,e)}(t))||e&&t&&"number"==typeof t.length){i&&(t=i);var n=0,r=function(){};return{s:r,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s,o=!0,a=!1;return{s:function(){i=t[Symbol.iterator]()},n:function(){var t=i.next();return o=t.done,t},e:function(t){a=!0,s=t},f:function(){try{o||null==i.return||i.return()}finally{if(a)throw s}}}}function h(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}function u(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var p=Autodesk.Viewing.Private;var d=function(){function t(e,i,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.pts=e,this.contours=[],this.customInsideChecker=i,this.bbox=n,this._tmpVec=n instanceof THREE.Box3?new THREE.Vector3:new THREE.Vector2}var e,i,n;return e=t,n=[{key:"FromClipperPaths",value:function(e,i,n){var r,s=new a.UniquePointList(i),o=new t(s.pts,null,i),h=l(e);try{for(h.s();!(r=h.n()).done;){for(var u=r.value,p=[],d=0;d<u.length;d++){var f=s.findOrAddPoint(u[d].X*n,u[d].Y*n);p.push(f.id)}p.push(p[0]),o.addContour(p)}}catch(t){h.e(t)}finally{h.f()}return o}}],(i=[{key:"addContour",value:function(t){this.contours.push(t)}},{key:"pointInContour",value:function(t,e,i){var n,r,s,o,a,l,h=!1,u=this.pts;s=u[i[i.length-1]].x,n=(o=u[i[i.length-1]].y)>=e;for(var p=0,d=i.length;p<d;++p)a=u[i[p]].x,n!=(r=(l=u[i[p]].y)>=e)&&(l-e)*(s-a)>=(a-t)*(o-l)==r&&(h=!h),n=r,s=a,o=l;return h}},{key:"pointInPolygon",value:function(t,e){for(var i=!1,n=0;n<this.contours.length;n++)this.pointInContour(t,e,this.contours[n])&&(i=!i);return i}},{key:"triangulate",value:function(){try{this.triangulateInternal(!1)}catch(t){if(-1!==t.message.indexOf("Collinear not supported!"))try{this.triangulateInternal(!0)}catch(t){this.triangulationFailed=!0}else this.triangulationFailed=!0}}},{key:"createPointInPolygonChecker",value:function(){for(var t=[],e=0;e<this.contours.length;e++)for(var i=this.contours[e],n=i.length,r=0;r<n-1;r++){var o={p1:i[r],p2:i[r+1]};t.push(o)}var a=new s.IntervalTree(this.pts,t,this.bbox);a.build(),this.customInsideChecker=a}},{key:"triangulateInternal",value:function(t){if(!this.contours.length)return this.triangulationFailed=!0,void(this.indices=null);this.indices=[];var e=function(t,e){for(var i=e.getSize(e instanceof THREE.Box3?new THREE.Vector3:new THREE.Vector2),n=e.min.x+.5*i.x,r=e.min.y+.5*i.y,s=2/i.length(),o=[],a=0,l=t.length;a<l;a++)o.push({x:(t[a].x-n)*s,y:(t[a].y-r)*s,_triidx:a+1});return o}(this.pts,this.bbox);t&&function(t){for(var e=0,i=t.length;e<i;e++)t[e].x+=1e-9*(Math.random()-.5),t[e].y+=1e-9*(Math.random()-.5)}(e);var i=new(r().SweepContext)([]);i.points_=e;for(var n=0;n<this.contours.length;n++){for(var s=this.contours[n],o=s[0]!==s[s.length-1],a=o?s.length:s.length-1,l=new Array(a),h=0;h<a;h++)l[h]=e[s[h]];i.initEdges(l,o)}i.triangulate(),this.processResult(i),this.triangulationFailed=!this.indices||!this.indices.length}},{key:"processResult",value:function(t){this.pts.length>10&&!this.customInsideChecker&&this.createPointInPolygonChecker();for(var e=t.map_,i=0;i<e.length;i++){var n=e[i].points_,r=n[0],s=n[1],o=n[2],a=r._triidx,l=s._triidx,h=o._triidx;a&&l&&h&&this.filterFace(a-1,l-1,h-1)}}},{key:"filterFace",value:function(t,e,i){var n=this.pts[t],r=this.pts[e],s=this.pts[i],o=(n.x+r.x+s.x)/3,a=(n.y+r.y+s.y)/3;if(this.customInsideChecker?this.customInsideChecker.pointInPolygon(o,a):this.pointInPolygon(o,a)){var l=r.x-n.x,h=r.y-n.y,u=s.x-n.x;l*(s.y-n.y)-u*h>0?this.indices.push(t,e,i):this.indices.push(t,i,e)}}},{key:"findSegmentIntersections",value:function(t,e,i,n){if(!this.cachedEdges){this.cachedEdges=[];for(var r=0;r<this.contours.length;r++)for(var s=this.contours[r],a=0;a<s.length-1;a++){var l=this.pts[s[a]].x,h=this.pts[s[a]].y,u=this.pts[s[a+1]].x,p=this.pts[s[a+1]].y,d={v1:{x:l,y:h},v2:{x:u,y:p},dx:u-l,dy:p-h,length:Math.sqrt(Math.pow(l-u,2)+Math.pow(h-p,2))};this.cachedEdges.push(d)}}for(var f={v1:{x:t,y:e},v2:{x:i,y:n},dx:i-t,dy:n-e,length:Math.sqrt(Math.pow(t-i,2)+Math.pow(e-n,2))},c=1e-4*this.bbox.getSize(this._tmpVec).length(),y=[],v=0;v<this.cachedEdges.length;v++){var x=this.cachedEdges[v],g=(0,o.segmentsIntersect)(f,x,c);if(g&&g.status===o.ONE_INTERSECTION){var P={x:g.e1[0],y:g.e1[1]};P.d=Math.sqrt(Math.pow(P.x-t,2)+Math.pow(P.y-e,2)),y.push(P)}}return y.length&&(y.sort((function(t,e){return t.d-e.d})),y[0].d<c&&y.shift(),y.length&&Math.abs(y[y.length-1].d-f.length)<c&&y.pop()),y.length?y:null}},{key:"toPolygonMesh",value:function(t){if(this.polygonMesh)return this.polygonMesh;for(var e=this.pts,i=new THREE.BufferGeometry,n=new Float32Array(3*e.length),r=0;r<e.length;r++)n[3*r]=e[r].x,n[3*r+1]=e[r].y,n[3*r+2]=0;i.setAttribute("position",new THREE.BufferAttribute(n,3));for(var s=t?new Uint16Array(2*e.length):new Float32Array(3*e.length),o=0;o<e.length;o++)if(t){var a=.5*(0/Math.PI+1);s[2*o]=65535*a|0,s[2*o+1]=65535}else s[3*o]=0,s[3*o+1]=0,s[3*o+2]=1;i.setAttribute("normal",new THREE.BufferAttribute(s,t?2:3)),t&&(i.attributes.normal.bytesPerItem=2,i.attributes.normal.normalized=!0);var l=new Uint16Array(this.indices.length);return l.set(this.indices),i.setIndex(new THREE.BufferAttribute(l,1)),i.streamingDraw=!0,i.streamingIndex=!0,this.polygonMesh=i,i}},{key:"toExtrudedMesh",value:function(t){if(this.extrudedMesh)return this.extrudedMesh;if(void 0===t&&(t=1),!this.indices)return null;for(var e=[],i=[],n=[],r=0,s=this.pts,o=0;o<s.length;o++)e.push(s[o].x,s[o].y,0),e.push(0,0,1);for(var a=this.indices,l=0;l<a.length;l+=3)i.push(a[l],a[l+1],a[l+2]);r+=s.length;for(var h=0;h<s.length;h++)e.push(s[h].x,s[h].y,-t),e.push(0,0,-1);for(var u=0;u<a.length;u+=3)i.push(r+a[u],r+a[u+2],r+a[u+1]);r+=s.length;for(var d=new THREE.Vector3,f=new THREE.Box3,c=0;c<this.contours.length;c++)for(var y=this.contours[c],v=0;v<y.length-1;v++){var x=this.pts[y[v]].x,g=this.pts[y[v]].y;d.set(x,g,0),f.expandByPoint(d);var P=this.pts[y[v+1]].x,m=this.pts[y[v+1]].y;d.set(P,m,0),f.expandByPoint(d),d.set(x,g,0-t),f.expandByPoint(d),d.set(m-g,x-P,0).normalize(),e.push(x,g,0,d.x,d.y,d.z,P,m,0,d.x,d.y,d.z,x,g,0-t,d.x,d.y,d.z,P,m,0-t,d.x,d.y,d.z),n.push(r,r+1,r,r+2,r+1,r+3,r+2,r+3),i.push(r,r+2,r+3,r,r+3,r+1),r+=4}var C=new Float32Array(e.length);C.set(e);var _=new Uint16Array(i.length);_.set(i);var I=new Uint16Array(n.length);I.set(n);var E={mesh:{vb:C,indices:_,iblines:I,vbstride:6,vblayout:{position:{offset:0,itemSize:3,bytesPerItem:4},normal:{offset:3,itemSize:3,bytesPerItem:4}},boundingBox:f,boundingSphere:{center:f.getCenter(new THREE.Vector3),radius:.5*f.getSize(new THREE.Vector3).length}}};return p.BufferGeometryUtils.meshToGeometry(E),E.geometry.streamingDraw=!0,E.geometry.streamingIndex=!0,this.extrudedMesh=E.geometry,this.extrudedMesh}}])&&u(e.prototype,i),n&&u(e,n),t}()},31577:(t,e,i)=>{"use strict";i.r(e),i.d(e,{polygonArea:()=>s,ContourSet:()=>a});var n=i(31509);function r(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function s(t){if(t.length<3)return 0;var e=!1;t[0]!==t[t.length-1]&&(e=!0);for(var i=0,n=0,r=t.length-1;n<r;n++){var s=t[n],o=t[n+1];i+=s.x*o.y-o.x*s.y}if(e){var a=t[t.length-1],l=t[0];i+=a.x*l.y-l.x*a.y}return.5*i}var o=new THREE.Vector2,a=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.contours=[],this.areas=[],this.bbox=new THREE.Box2,this.allPoints=this.pts=[],this.allPointsMap={}}var e,i,a;return e=t,(i=[{key:"addContour",value:function(t,e){var i=this;this.polygon=null,this.perimeterMem=void 0;var n=s(t);n<0&&(t.reverse(),n=Math.abs(n));var r=[];t.forEach((function(t,e){var n=t.id;void 0===n&&(n=i.contours.length+":"+e);var s=i.allPointsMap[n];void 0===s&&(s=i.allPoints.length,i.allPoints.push(t),i.allPointsMap[n]=s,o.set(t.x,t.y),i.bbox.expandByPoint(o)),r.push(s)})),0===n&&e||(this.contours.push(r),this.areas.push(n))}},{key:"addContourSet",value:function(t){var e=t.contours[0],i=t.allPoints,n=e.map((function(t){return i[t]}));this.addContour(n)}},{key:"triangulate",value:function(t){if(!this.polygon){var e=this.allPoints,i=new n.ComplexPolygon(e,t,this.bbox);i.contours=this.contours,i.triangulate(),this.polygon=i,this.triangulationFailed=this.polygon.triangulationFailed}}},{key:"area",value:function(){return this.areas[0]}},{key:"areaNet",value:function(){for(var t=this.areas[0],e=1;e<this.areas.length;e++)t-=this.areas[e];return t}},{key:"perimeter",value:function(){if(this.perimeterMem)return this.perimeterMem;for(var t=0,e=this.contours[0],i=0,n=e.length-1;i<n;i++){var r=e[i],s=e[i+1];t+=Math.sqrt((r.x-s.x)*(r.x-s.x)+(r.y-s.y)*(r.y-s.y))}return this.perimeterMem=t,t}},{key:"getThemeColor",value:function(){return{r:100*this.areas[0]%17/16,g:this.allPoints.length%23/22,b:100*this.perimeterMem%29/28}}},{key:"hash",value:function(){var t=this,e=[];return this.contours.forEach((function(i){var n=i.map((function(e){return t.allPoints[e].id}));n[0]===n[n.length-1]&&n.pop(),n.sort(),e.push(n)})),JSON.stringify(e)}},{key:"stitchContours",value:function(){this.areas=[];for(var t=[],e=0;e<this.contours.length;e++){var i=this.contours[e];i[0]!==i[i.length-1]&&t.push(i)}if(t.length)for(var n=!0;n;){n=!1;for(var r={},s=this.contours,o=0;o<s.length;o++){var a=s[o],l=a[0],h=a[a.length-1];l!==h&&(r[l]?r[l].push(-o-1):r[l]=[-o-1],r[h]?r[h].push(o):r[h]=[o])}for(var u in r){var p=r[u];if(2===p.length){var d=void 0;if(p[0]<0&&p[1]<0){var f=-p[0]-1,c=-p[1]-1;s[c].shift(),Array.prototype.push.apply(s[f].reverse(),s[c]),d=c}if(p[0]<0&&p[1]>0){var y=-p[0]-1,v=p[1];s[v].pop(),Array.prototype.push.apply(s[v],s[y]),d=y}if(p[0]>0&&p[1]<0){var x=p[0],g=-p[1]-1;s[x].pop(),Array.prototype.push.apply(s[x],s[g]),d=g}if(p[0]>0&&p[1]>0){var P=p[0],m=p[1];s[P].pop(),Array.prototype.push.apply(s[P],s[m].reverse()),d=m}void 0!==d&&(s.splice(d,1),n=!0);break}}}}},{key:"containsPointFrom",value:function(t){if(!t.polygon.indices||t.polygon.indices.length<3)return!1;var e=t.allPoints[t.polygon.indices[0]],i=t.allPoints[t.polygon.indices[1]],n=t.allPoints[t.polygon.indices[2]],r=(e.x+i.x+n.x)/3,s=(e.y+i.y+n.y)/3;return this.polygon&&this.polygon.pointInPolygon(r,s)}},{key:"toPolygonMesh",value:function(t){return this.polygon.toPolygonMesh(t)}},{key:"toExtrudedMesh",value:function(t){return this.polygon.toExtrudedMesh(t)}}])&&r(e.prototype,i),a&&r(e,a),t}()},5481:(t,e,i)=>{"use strict";i.r(e),i.d(e,{DCEL:()=>c});var n=i(90865),r=i(98729),s=i(31577),o=i(14441),a=i(77953);function l(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function h(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function u(t,e,i){return e&&h(t.prototype,e),i&&h(t,i),t}var p=Autodesk.Viewing.Private.logger,d=function(){function t(e,i){l(this,t),this.x=e,this.y=i,this.edges=[],this.dbIds=[],this.dbIdsChanged=!1}return u(t,[{key:"isDegenerate",value:function(){return this.edges.length<2}},{key:"addEdge",value:function(t){for(var e=0;e<this.edges.length;e++){var i=this.edges[e];if(i.v1===t.v1&&i.v2===t.v2)return i}return this.edges.push(t),t}},{key:"removeEdge",value:function(t){var e=this.edges.indexOf(t);e>=0?this.edges.splice(e,1):p.warn("Failed to find edge in vertex list")}},{key:"findEdgeTo",value:function(t){for(var e=0;e<this.edges.length;e++){var i=this.edges[e];if(i.getOppositeVertex(this)===t)return i}return null}},{key:"disconnect",value:function(){for(var t=0;t<this.edges.length;t++){var e=this.edges[t];e.getOppositeVertex(this).removeEdge(e)}var i=this.edges;return this.edges=[],i}},{key:"sortEdges",value:function(){var t=this;this.edges.sort((function(e,i){var n=e.angle;e.v1!==t&&(n-=Math.PI);var r=i.angle;return i.v1!==t&&(r-=Math.PI),n-r}))}},{key:"_canTraverse",value:function(t){return t.v1!==this||t.flagFwd?t.v2===this&&!t.flagRev&&(t.flagRev=1,!0):(t.flagFwd=1,!0)}},{key:"findUntraversedEdge",value:function(){for(var t=0;t<this.edges.length;t++){var e=this.edges[t];if(this._canTraverse(e))return e}return null}},{key:"findNextCCWEdge",value:function(t){var e=this.edges.indexOf(t);if(-1===e)return p.error("This edge isn't mine."),null;if(this.isDegenerate())return null;var i=(e+1)%this.edges.length,n=this.edges[i];return this._canTraverse(n)?n:null}}]),t}(),f=function(){function t(e,i,n){l(this,t);var s=!1;i.y<e.y?s=!0:i.y===e.y&&(s=i.x<e.x),s?(this.v1=i,this.v2=e):(this.v1=e,this.v2=i),this.dx=this.v2.x-this.v1.x,this.dy=this.v2.y-this.v1.y,this.length2=this.dx*this.dx+this.dy*this.dy,this.length=Math.sqrt(this.length2),this.angle=Math.atan2(this.dy,this.dx),this.angle<0&&((0,r.isZero)(this.angle)?this.angle=0:(0,r.isEqual)(this.angle,-Math.PI)&&(this.angle=Math.PI),this.angle<0&&p.warn("Unexpected edge slope <0 :",this.angle)),this.id=n,this.minx=Math.min(this.v1.x,this.v2.x),this.miny=Math.min(this.v1.y,this.v2.y),this.maxx=Math.max(this.v1.x,this.v2.x),this.maxy=Math.max(this.v1.y,this.v2.y),this.flagFwd=0,this.flagRev=0,this.dbIdsCached=null}return u(t,[{key:"paramAlong",value:function(t,e){return((t-this.v1.x)*this.dx+(e-this.v1.y)*this.dy)/this.length2}},{key:"getOppositeVertex",value:function(t){return this.v1===t?this.v2:this.v2===t?this.v1:void p.warn("Edge does not own this vertex.")}},{key:"getDbIds",value:function(){if(!this.v1.dbIdsChanged&&!this.v2.dbIdsChanged)return this.dbIdsCached;for(var t=[],e=this.v1.dbIds,i=this.v2.dbIds,n=0;n<e.length;n++)-1!==i.indexOf(e[n])&&t.push(e[n]);return this.dbIdsCached=t,this.v1.dbIdsChanged=!1,this.v2.dbIdsChanged=!1,t}}]),t}(),c=function(){function t(e,i){l(this,t),this.bbox=e,this.boxSize=this.bbox.getSize(new THREE.Vector3).length(),this.precisionTolerance="number"==typeof i?i:r.TOL*this.boxSize,this.edges=[],this.verts=new a.UniquePointList(this.bbox,this.precisionTolerance,d,!0),this.quadTreeEdges=new o.QuadTree(this.bbox.min.x,this.bbox.min.y,this.bbox.max.x,this.bbox.max.y,this.precisionTolerance),this.nextEdgeId=1}return u(t,[{key:"_addVertex",value:function(t,e,i){return this.verts.findOrAddPoint(t,e,i)}},{key:"splitEdge",value:function(t,e){var i=[];i.push({x:t.v1.x,y:t.v1.y,u:0});for(var n=t.getDbIds(),s=0;s<e.length;s+=2){var o={x:e[s],y:e[s+1],u:t.paramAlong(e[s],e[s+1])};(0,r.isZero)(o.u)||(0,r.isEqual)(o.u,1)||i.push(o)}if(1!==i.length){i.push({x:t.v2.x,y:t.v2.y,u:1}),i.sort((function(t,e){return t.u-e.u})),this.removeDirectedEdge(t);for(var a=1;a<i.length;a++)this.addDirectedEdge(i[a-1].x,i[a-1].y,i[a].x,i[a].y,!0,n)}}},{key:"_enumNearEdges",value:function(t,e){this.quadTreeEdges.enumNearItems(t,e)}},{key:"addDirectedEdge",value:function(t,e,i,r,s,o){var a=this,l=this._addVertex(t,e,o),h=this._addVertex(i,r,o);if(l!==h&&!l.findEdgeTo(h)){var u=new f(l,h,this.nextEdgeId++),p=u.v1.addEdge(u);if(p!==u)return p;if(u.v2.addEdge(u),u.sourcePts=[t,e,i,r],this.edges[u.id]=u,this.quadTreeEdges.addItem(u),s)return p;var d=[],c={};for(var y in this._enumNearEdges(u,(function(t){var e=(0,n.segmentsIntersect)(t,u,a.precisionTolerance);e&&(e.e1&&e.e1.length&&(c[t.id]=e.e1),e.e2&&e.e2.length&&d.push.apply(d,e.e2))})),c)this.splitEdge(this.edges[parseInt(y)],c[y]);return d.length&&this.splitEdge(u,d),this.dirty=!0,p}}},{key:"removeDirectedEdge",value:function(t){t.v1.removeEdge(t),t.v2.removeEdge(t),this.edges[t.id]=void 0,this.quadTreeEdges.deleteItem(t)}},{key:"removeDanglingPolyline",value:function(t){for(;1===t.edges.length;){var e=t.edges[0],i=e.getOppositeVertex(t);this.removeDirectedEdge(e),t=i}}},{key:"cleanupFlatEdges",value:function(){var t=[];this.verts.forEach((function(e){if(e&&2===e.edges.length){var i=e.edges[0],n=e.edges[1],r=Math.abs(i.angle-n.angle);(r<.002||Math.abs(r-Math.PI)<.002)&&t.push(e);var s=i.getOppositeVertex(e),o=n.getOppositeVertex(e);if(s.findEdgeTo(o)).5*Math.abs(i.dx*n.dy-n.dx*i.dy)<.001&&t.push(e)}}));for(var e=0;e<t.length;e++){var i=t[e];if(2===i.edges.length){var n=i.edges[0],r=i.edges[1],s=n.getOppositeVertex(i),o=r.getOppositeVertex(i);this.removeDirectedEdge(n),this.removeDirectedEdge(r),this.verts.delete(i),this.addDirectedEdge(s.x,s.y,o.x,o.y,!0)}}if(t.length)return this.cleanupFlatEdges()}},{key:"_compactLists",value:function(){this.verts.compact();for(var t=[],e=0,i=this.edges.length;e<i;e++){var n=this.edges[e];n&&(n.oldid=n.id,n.flagFwd=0,n.flagRev=0,n.id=t.length,t.push(n))}this.edges=t}},{key:"_detectHolesNonZero",value:function(t){this.holes=[],this.outerPerimeter=this.closedAreas[this.closedAreas.length-1],this.outerPerimeter&&this.outerPerimeter.triangulate();for(var e=0,i=this.closedAreas.length-1;e<i;e++){for(var n=this.closedAreas[e],r=e-1;r>=0;r--){var s=this.closedAreas[r];if(n.containsPointFrom(s)){if(!s.isHole){n.isHole=!0,this.holes.push(n);break}n.addContourSet(s)}}n.isHole||n.triangulate(t)}for(var o=0,a=this.holes.length;o<a;o++){var l=this.holes[o];l.triangulate(t);for(var h=o-1;h>=0;h--){var u=this.holes[h];u.holeProcessFlag||l.containsPointFrom(u)&&(l.addContourSet(u),l.isHole=!1,u.holeProcessFlag=!0)}l.isHole||l.triangulate(t)}for(var p=[],d=0;d<this.closedAreas.length-1;d++){var f=this.closedAreas[d];f.isHole||(f.id=p.length,p.push(f))}this.closedAreas=p}},{key:"_detectHolesEvenOdd",value:function(t){var e=this.closedAreas;if(this.openAreas&&this.openAreas.length&&(e=e.concat(this.openAreas)),!e.length)return this.closedAreas=[],void(this.openAreas=null);for(var i={},n=0;n<e.length;n++){var r=e[n],o=r.hash();i[o]||(i[o]=r)}e=Object.values(i);for(var a=new s.ContourSet,l=0;l<e.length;l++)a.addContourSet(e[l]);a.triangulate(t||this.quadTreeEdges),a.triangulationFailed?this._detectHolesNonZero(t||this.quadTreeEdges):(this.closedAreas=[a],this.openAreas=[])}},{key:"finalize",value:function(t,e){this.cleanupFlatEdges(),this._compactLists(),this.verts.forEach((function(t){return t.sortEdges()}));var i=[],n=[];this.verts.forEach((function(t){var e=t.findUntraversedEdge();if(e){var r=[t],s=e.getOppositeVertex(t);do{if(r.push(s),!(e=s.findNextCCWEdge(e)))break;s=e.getOppositeVertex(s)}while(s&&s!==t);s===t?(r.push(t),i.push(r)):n.push(r)}})),this.closedAreas=[];for(var r=0,o=i.length;r<o;r++){var a=new s.ContourSet;a.addContour(i[r]),this.closedAreas.push(a)}if(this.closedAreas.sort((function(t,e){return t.area()-e.area()})),t?this._detectHolesEvenOdd(e):this._detectHolesNonZero(e),this.openAreas=[],n.length){for(var l=[],h=new s.ContourSet,u=0,p=n.length;u<p;u++)h.addContour(n[u]);h.stitchContours(),h.triangulate(),l.push(h),this.openAreas=l}}},{key:"deleteEdgesOnLine",value:function(t,e,i,r){var s=this,o=new d(t,e),a=new d(i,r),l=new f(o,a,-1),h={};for(var u in this._enumNearEdges(l,(function(t){var e=(0,n.segmentsIntersect)(t,l,s.precisionTolerance);e&&e.e1&&e.e1.length&&(h[t.id]=e.e1)})),h){var p=parseInt(u),c=this.edges[p];this.removeDirectedEdge(c),this.removeDanglingPolyline(c.v1),this.removeDanglingPolyline(c.v2)}this.dirty=!0}},{key:"deleteEdgesInRectangle",value:function(t,e,i,n){var r=Math.min(t,i),s=Math.min(e,n),o=Math.max(t,i),a=Math.max(e,n),l={};for(var h in this.quadTreeEdges.enumInBox(r,s,o,a,(function(t){l[t.id]=t})),l){var u=parseInt(h),p=this.edges[u];p&&(this.removeDirectedEdge(p),this.removeDanglingPolyline(p.v1),this.removeDanglingPolyline(p.v2))}this.dirty=!0}},{key:"findNearestVertex",value:function(t,e,i){"number"!=typeof i&&(i=this.precisionTolerance);var n=1/0,r=null;return this.verts.enumInBox(t-i,e-i,t+i,e+i,(function(i){var s=(i.x-t)*(i.x-t)+(i.y-e)*(i.y-e);s<n&&(n=s,r=i)})),n<=i*i?r:null}},{key:"findNearestPointOnEdge",value:function(t,e,i){"number"!=typeof i&&(i=this.precisionTolerance);var r={x:0,y:0,u:0,d:-1},s={x:0,y:0,d:1/0,e:null};return this.quadTreeEdges.enumInBox(t-i,e-i,t+i,e+i,(function(o){(0,n.pointOnLine)(t,e,o,!0,i,r)&&r.d<s.d&&(s.x=r.x,s.y=r.y,s.d=r.d,s.e=o)})),s.d<=i?s:null}}]),t}()},4902:(t,e,i)=>{"use strict";i.r(e),i.d(e,{EdgeSet:()=>l});var n=i(60762),r=i(77953),s=i(31509);function o(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var a=Autodesk.Viewing.Private,l=function(){function t(e,i,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.edges=e,this.bbox=i,this.verts=new r.UniquePointList(i,n),this.polygon=null}var e,i,l;return e=t,(i=[{key:"getPointIndex",value:function(t,e){return this.verts.findOrAddPoint(t,e).id}},{key:"snapEdges",value:function(){for(var t=0;t<this.edges.length;t++){var e=this.edges[t];e.p1=this.getPointIndex(e.v1.x,e.v1.y),e.p2=this.getPointIndex(e.v2.x,e.v2.y)}}},{key:"sanitizeEdges",value:function(){for(var t={},e=[],i=0,n=this.edges.length;i<n;i++){var r=this.edges[i];if(r.p1!==r.p2){var s=Math.min(r.p1,r.p2)+":"+Math.max(r.p1,r.p2);!0!==t[s]&&(t[s]=!0,e.push(r))}}this.edges=e}},{key:"stitchContours",value:function(){this.contours=[];for(var t={},e=0;e<this.edges.length;e++){var i=this.edges[e];i.p1!==i.p2&&(void 0!==t[i.p1]?t[i.p1].push(i.p2):t[i.p1]=[i.p2],void 0!==t[i.p2]?t[i.p2].push(i.p1):t[i.p2]=[i.p1])}var n=[];for(var r in t)if(2!==t[r].length){a.logger.warn("Incomplete edge table");break}for(;;){var s=void 0;for(var o in t)if(t[o].length>1){s=o;break}if(!s)for(var l in t)if(t[l].length>0){s=l;break}if(!s)break;var h=-1,u=parseInt(s),p=t[s];for(n.push(u);p&&p.length;){var d=p.shift();if(d===h&&(d=p.shift()),void 0===d){delete t[u];break}n.push(d),(0==p.length||p[0]===h)&&delete t[u],h=u,u=d,p=t[d]}n.length&&(this.contours.push(n),n=[])}for(var f=[],c=0;c<this.contours.length;c++){var y=this.contours[c];y[0]!==y[y.length-1]&&f.push(y)}if(f.length)for(var v=!0;v;){v=!1;for(var x={},g=this.contours,P=0;P<g.length;P++){var m=g[P],C=m[0],_=m[m.length-1];C!==_&&(x[C]?x[C].push(-P-1):x[C]=[-P-1],x[_]?x[_].push(P):x[_]=[P])}for(var I in x){var E=x[I];if(2==E.length){var T=void 0;if(E[0]<0&&E[1]<0){var b=-E[0]-1,L=-E[1]-1;g[L].shift(),Array.prototype.push.apply(g[b].reverse(),g[L]),T=L}if(E[0]<0&&E[1]>0){var S=-E[0]-1,A=E[1];g[A].pop(),Array.prototype.push.apply(g[A],g[S]),T=S}if(E[0]>0&&E[1]<0){var w=E[0],N=-E[1]-1;g[w].pop(),Array.prototype.push.apply(g[w],g[N]),T=N}if(E[0]>0&&E[1]>0){var O=E[0],X=E[1];g[O].pop(),Array.prototype.push.apply(g[O],g[X].reverse()),T=X}void 0!==T&&(g.splice(T,1),v=!0);break}}}}},{key:"cleanupFlatEdges",value:function(){for(var t=this.verts.pts,e=this.verts.precisionTolerance,i=0;i<this.contours.length;i++)for(var n=this.contours[i];;){for(var r=-1,s=1;s<n.length-1;s++){var o=n[s-1],a=n[s],l=n[s+1],h=t[o],u=t[a],p=t[l],d=u.x-h.x,f=u.y-h.y,c=p.x-u.x,y=p.y-u.y,v=Math.sqrt(d*d+f*f);if(v<e){r=s;break}var x=Math.sqrt(c*c+y*y);if(x<e){r=s;break}var g=(d/=v)*(c/=x)+(f/=v)*(y/=x);if(Math.abs(g-1)<.01){r=s;break}}if(r<0)break;n.splice(r,1)}}},{key:"triangulate",value:function(){var t=new n.IntervalTree(this.verts.pts,this.edges,this.bbox);t.build();var e=new s.ComplexPolygon(this.verts.pts,t,this.bbox);return e.contours=this.contours,e.triangulate(),e}}])&&o(e.prototype,i),l&&o(e,l),t}()},80143:(t,e,i)=>{"use strict";function n(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}i.r(e),i.d(e,{getEllipsePoint:()=>r,getEllipseArcPoint:()=>s,normalizeAngle:()=>o,getAngleDelta:()=>a,angleInsideArcCCW:()=>l,angleInsideArc:()=>h,EllipseArc:()=>d});var r=function(t,e,i,n,r){var s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,a=o||new THREE.Vector2,l=e+n*Math.cos(t),h=i+r*Math.sin(t);if(0!==s){var u=Math.cos(s),p=Math.sin(s),d=l-e,f=h-i;l=d*u-f*p+e,h=d*p+f*u+i}return a.set(l,h)},s=function(t,e,i,n,s,a,l){var h=arguments.length>7&&void 0!==arguments[7]?arguments[7]:0,u=arguments.length>8&&void 0!==arguments[8]?arguments[8]:null,p=l-a,d=Math.abs(p)<Number.EPSILON;if(d)return r(0,e,i,n,s,h,u);var f=(p=o(p))<Number.EPSILON;f&&(p=2*Math.PI);var c=a+t*p;return r(c,e,i,n,s,h,u)},o=function(t){return t/=2*Math.PI,(t-=Math.trunc(t))<0&&(t+=1),2*t*Math.PI},a=function(t,e,i){var n=e-t;return n=o(n),i?n:2*Math.PI-n},l=function(t,e,i){return t=o(t),(e=o(e))<(i=o(i))?t>=e&&t<=i:t>=e||t<=i},h=function(t,e,i){var n=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],r=l(t,e,i);return n?r:!r},u=function(t,e,i,n){var r=t*i+e*n,s=Math.sqrt(t*t+e*e)*Math.sqrt(i*i+n*n),o=Math.acos(Math.max(-1,Math.min(1,r/s)));return t*n-e*i<0&&(o=-o),o},p=new THREE.Vector2,d=function(){function t(e,i,n,r,s,o,a,l){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.set(e,i,n,r,s,o,a,l)}var e,i,o;return e=t,(i=[{key:"set",value:function(t,e,i,n,r,s,o,a){return this.cx=t,this.cy=e,this.rx=i,this.ry=n,this.startAngle=s,this.endAngle=o,this.ccw=a,this.rotation=r,this}},{key:"setFromSvgArc",value:function(t,e,i,n,r,s,o){var a=i*Math.PI/180;if(t=Math.abs(t),e=Math.abs(e),0==t||0==e){var l=360*p.copy(s).distanceTo(o)/.01/(2*Math.PI);t=l,e=l}var h=(s.x-o.x)/2,d=(s.y-o.y)/2,f=Math.cos(a)*h+Math.sin(a)*d,c=-Math.sin(a)*h+Math.cos(a)*d,y=t*t,v=e*e,x=f*f,g=c*c,P=x/y+g/v;if(P>1){var m=Math.sqrt(P);y=(t*=m)*t,v=(e*=m)*e}var C=y*g+v*x,_=(y*v-C)/C,I=Math.sqrt(Math.max(0,_));n===r&&(I=-I);var E=I*t*c/e,T=-I*e*f/t,b=Math.cos(a)*E-Math.sin(a)*T+(s.x+o.x)/2,L=Math.sin(a)*E+Math.cos(a)*T+(s.y+o.y)/2,S=u(1,0,(f-E)/t,(c-T)/e),A=u((f-E)/t,(c-T)/e,(-f-E)/t,(-c-T)/e)%(2*Math.PI);return this.cx=b,this.cy=L,this.rx=t,this.ry=e,this.rotation=a,this.startAngle=S,this.endAngle=S+A,this.ccw=r,this}},{key:"getPoint",value:function(t,e){var i=this.startAngle,n=this.endAngle;return this.ccw||(i=this.endAngle,n=this.startAngle,t=1-t),s(t,this.cx,this.cy,this.rx,this.ry,i,n,this.rotation,e)}},{key:"isValid",value:function(){return isFinite(this.cx)&&isFinite(this.cy)&&isFinite(this.rx)&&isFinite(this.ry)&&isFinite(this.rotation)&&isFinite(this.startAngle)&&isFinite(this.endAngle)}},{key:"computeBBox",value:function(t){var e=this,i=Math.tan(this.rotation),n=-Math.atan(this.ry*i/this.rx),s=Math.PI-Math.atan(this.ry*i/this.rx),o=Math.atan(this.ry/(i*this.rx)),a=Math.PI+Math.atan(this.ry/(i*this.rx)),l=t?t.makeEmpty():new THREE.Box2,u=function(t){var i=r(t,e.cx,e.cy,e.rx,e.ry,e.rotation);l.expandByPoint(i)};return u(this.startAngle),u(this.endAngle),h(n,this.startAngle,this.endAngle,this.ccw)&&u(n),h(s,this.startAngle,this.endAngle,this.ccw)&&u(s),h(o,this.startAngle,this.endAngle,this.ccw)&&u(o),h(a,this.startAngle,this.endAngle,this.ccw)&&u(a),l}},{key:"tesselate",value:function(t,e,i){for(var n=this.getPoint(0),r=1;r<e;r++){var s=r/e,o=this.getPoint(s,p);o.distanceTo(n)<i||(t.lineTo(o.x,o.y),n.copy(o))}var a=this.getPoint(1,p);t.lineTo(a.x,a.y)}},{key:"getAngleDelta",value:function(){return a(this.startAngle,this.endAngle,this.ccw)}}])&&n(e.prototype,i),o&&n(e,o),t}()},98729:(t,e,i)=>{"use strict";i.r(e),i.d(e,{TOL:()=>n,isZero:()=>r,isEqual:()=>s});var n=1e-6;function r(t){return Math.abs(t)<n}function s(t,e){return r(t-e)}},68099:(t,e,i)=>{function n(t){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},n(t)}function r(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function s(t,e){return s=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},s(t,e)}function o(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,n=l(t);if(e){var r=l(this).constructor;i=Reflect.construct(n,arguments,r)}else i=n.apply(this,arguments);return a(this,i)}}function a(t,e){return!e||"object"!==n(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function l(t){return l=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},l(t)}var h=Autodesk.Viewing,u=AutodeskNamespace("Autodesk.Viewing.Extensions.CompGeom");function p(e,i){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t.exports[n]=e[n],i[n]=e[n])}p(i(31577),u),p(i(4902),u),p(i(5481),u),p(i(98729),u),p(i(14441),u),p(i(2102),u),p(i(97967),u),p(i(4449),u),p(i(90865),u),p(i(65138),u),p(i(25484),u),p(i(81889),u),p(i(60762),u),p(i(31509),u),p(i(77953),u),p(i(44763),u),p(i(80143),u),p(i(53233),u),p(i(38085),u),p(i(43299),u);var d=function(t){"use strict";!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&s(t,e)}(l,t);var e,i,n,a=o(l);function l(t,e){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,l),a.call(this,t,e)}return e=l,(i=[{key:"load",value:function(){return!0}},{key:"unload",value:function(){return!0}},{key:"activate",value:function(){return!0}},{key:"deactivate",value:function(){return!1}}])&&r(e.prototype,i),n&&r(e,n),l}(h.Extension);h.theExtensionManager.registerExtension("Autodesk.CompGeom",d)},60762:(t,e,i)=>{"use strict";function n(){this.bbox=new THREE.Box2,this.left=null,this.right=null,this.node_edges=[]}function r(t,e,i){this.pts=t,this.edges=e,this.bbox=i,this.pipResult=!1}i.r(e),i.d(e,{IntervalTree:()=>r}),r.prototype.splitNode=function(t){if(!(t.bbox.min.y>=t.bbox.max.y||t.node_edges.length<3)){var e=.5*(t.bbox.min.y+t.bbox.max.y);t.left=new n,t.right=new n;for(var i=this.pts,r=t.node_edges,s=[],o=new THREE.Vector2,a=0;a<r.length;a++){var l=this.edges[r[a]],h=i[l.p1].y,u=i[l.p2].y;if(h>u){var p=h;h=u,u=p}var d=null;u<e?(t.left.node_edges.push(r[a]),d=t.left.bbox):h>e?(t.right.node_edges.push(r[a]),d=t.right.bbox):s.push(r[a]),d&&(o.set(i[l.p1].x,i[l.p1].y),d.expandByPoint(o),o.set(i[l.p2].x,i[l.p2].y),d.expandByPoint(o))}t.node_edges=s,t.left.node_edges.length&&this.splitNode(t.left),t.right.node_edges.length&&this.splitNode(t.right)}},r.prototype.build=function(){this.root=new n;for(var t=this.root.node_edges,e=0;e<this.edges.length;e++)t.push(e);this.root.bbox.copy(this.bbox),this.splitNode(this.root)},r.prototype.pointInPolygonRec=function(t,e,i){if(t.bbox.min.y<=i&&t.bbox.max.y>=i)for(var n=this.pts,r=t.node_edges,s=0,o=r.length;s<o;s++){var a=this.edges[r[s]],l=n[a.p1],h=l.x,u=l.y,p=u>=i,d=n[a.p2],f=d.x,c=d.y,y=c>=i;p!=y&&(c-i)*(h-f)>=(f-e)*(u-c)==y&&(this.pipResult=!this.pipResult)}var v=t.left;v&&v.bbox.min.y<=i&&v.bbox.max.y>=i&&this.pointInPolygonRec(v,e,i);var x=t.right;x&&x.bbox.min.y<=i&&x.bbox.max.y>=i&&this.pointInPolygonRec(x,e,i)},r.prototype.pointInPolygon=function(t,e){return this.pipResult=!1,this.pointInPolygonRec(this.root,t,e),this.pipResult}},14373:t=>{!function(){"use strict";var e={version:"6.4.2.2",use_lines:!0,use_xyz:!1},i=!1;if(t.exports?(t.exports=e,i=!0):"undefined"!=typeof document?window.ClipperLib=e:self.ClipperLib=e,i){n="chrome";"Netscape"}else{var n=navigator.userAgent.toString().toLowerCase();navigator.appName}var r={};-1!=n.indexOf("chrome")&&-1==n.indexOf("chromium")?r.chrome=1:r.chrome=0,-1!=n.indexOf("chromium")?r.chromium=1:r.chromium=0,-1!=n.indexOf("safari")&&-1==n.indexOf("chrome")&&-1==n.indexOf("chromium")?r.safari=1:r.safari=0,-1!=n.indexOf("firefox")?r.firefox=1:r.firefox=0,-1!=n.indexOf("firefox/17")?r.firefox17=1:r.firefox17=0,-1!=n.indexOf("firefox/15")?r.firefox15=1:r.firefox15=0,-1!=n.indexOf("firefox/3")?r.firefox3=1:r.firefox3=0,-1!=n.indexOf("opera")?r.opera=1:r.opera=0,-1!=n.indexOf("msie 10")?r.msie10=1:r.msie10=0,-1!=n.indexOf("msie 9")?r.msie9=1:r.msie9=0,-1!=n.indexOf("msie 8")?r.msie8=1:r.msie8=0,-1!=n.indexOf("msie 7")?r.msie7=1:r.msie7=0,-1!=n.indexOf("msie ")?r.msie=1:r.msie=0;var s=function(t,e){var i;if(void 0===Object.getOwnPropertyNames){for(i in e.prototype)void 0!==t.prototype[i]&&t.prototype[i]!==Object.prototype[i]||(t.prototype[i]=e.prototype[i]);for(i in e)void 0===t[i]&&(t[i]=e[i]);t.$baseCtor=e}else{for(var n=Object.getOwnPropertyNames(e.prototype),r=0;r<n.length;r++)void 0===Object.getOwnPropertyDescriptor(t.prototype,n[r])&&Object.defineProperty(t.prototype,n[r],Object.getOwnPropertyDescriptor(e.prototype,n[r]));for(i in e)void 0===t[i]&&(t[i]=e[i]);t.$baseCtor=e}};e.Path=function(){return[]},e.Path.prototype.push=Array.prototype.push,e.Paths=function(){return[]},e.Paths.prototype.push=Array.prototype.push,e.PolyNode=function(){this.m_Parent=null,this.m_polygon=new e.Path,this.m_Index=0,this.m_jointype=0,this.m_endtype=0,this.m_Childs=[],this.IsOpen=!1},e.PolyNode.prototype.IsHoleNode=function(){for(var t=!0,e=this.m_Parent;null!==e;)t=!t,e=e.m_Parent;return t},e.PolyNode.prototype.ChildCount=function(){return this.m_Childs.length},e.PolyNode.prototype.Contour=function(){return this.m_polygon},e.PolyNode.prototype.AddChild=function(t){var e=this.m_Childs.length;this.m_Childs.push(t),t.m_Parent=this,t.m_Index=e},e.PolyNode.prototype.GetNext=function(){return this.m_Childs.length>0?this.m_Childs[0]:this.GetNextSiblingUp()},e.PolyNode.prototype.GetNextSiblingUp=function(){return null===this.m_Parent?null:this.m_Index===this.m_Parent.m_Childs.length-1?this.m_Parent.GetNextSiblingUp():this.m_Parent.m_Childs[this.m_Index+1]},e.PolyNode.prototype.Childs=function(){return this.m_Childs},e.PolyNode.prototype.Parent=function(){return this.m_Parent},e.PolyNode.prototype.IsHole=function(){return this.IsHoleNode()},e.PolyTree=function(){this.m_AllPolys=[],e.PolyNode.call(this)},e.PolyTree.prototype.Clear=function(){for(var t=0,e=this.m_AllPolys.length;t<e;t++)this.m_AllPolys[t]=null;this.m_AllPolys.length=0,this.m_Childs.length=0},e.PolyTree.prototype.GetFirst=function(){return this.m_Childs.length>0?this.m_Childs[0]:null},e.PolyTree.prototype.Total=function(){var t=this.m_AllPolys.length;return t>0&&this.m_Childs[0]!==this.m_AllPolys[0]&&t--,t},s(e.PolyTree,e.PolyNode),e.Clear=function(t){t.length=0},e.PI=3.141592653589793,e.PI2=6.283185307179586,e.FPoint=function(){var t=arguments,i=t.length;if(this.X=0,this.Y=0,e.use_xyz)if(this.Z=0,3===i)this.X=t[0],this.Y=t[1],this.Z=t[2];else if(2===i)this.X=t[0],this.Y=t[1],this.Z=0;else if(1===i)if(t[0]instanceof e.FPoint){var n=t[0];this.X=n.X,this.Y=n.Y,this.Z=0}else{void 0===(r=t[0]).Z&&(r.Z=0),this.X=r.X,this.Y=r.Y,this.Z=r.Z}else this.X=0,this.Y=0,this.Z=0;else if(2===i)this.X=t[0],this.Y=t[1];else if(1===i)if(t[0]instanceof e.FPoint){n=t[0];this.X=n.X,this.Y=n.Y}else{var r=t[0];this.X=r.X,this.Y=r.Y}else this.X=0,this.Y=0},e.FPoint.op_Equality=function(t,e){return t.X===e.X&&t.Y===e.Y},e.FPoint.op_Inequality=function(t,e){return t.X!==e.X||t.Y!==e.Y},e.FPoint0=function(){this.X=0,this.Y=0,e.use_xyz&&(this.Z=0)},e.FPoint0.prototype=e.FPoint.prototype,e.FPoint1=function(t){this.X=t.X,this.Y=t.Y,e.use_xyz&&(void 0===t.Z?this.Z=0:this.Z=t.Z)},e.FPoint1.prototype=e.FPoint.prototype,e.FPoint1dp=function(t){this.X=t.X,this.Y=t.Y,e.use_xyz&&(this.Z=0)},e.FPoint1dp.prototype=e.FPoint.prototype,e.FPoint2=function(t,i,n){this.X=t,this.Y=i,e.use_xyz&&(this.Z=void 0===n?0:n)},e.FPoint2.prototype=e.FPoint.prototype,e.FRect=function(){var t=arguments,e=t.length;if(4===e)this.left=t[0],this.top=t[1],this.right=t[2],this.bottom=t[3];else if(1===e){var i=t[0];this.left=i.left,this.top=i.top,this.right=i.right,this.bottom=i.bottom}else this.left=0,this.top=0,this.right=0,this.bottom=0},e.FRect0=function(){this.left=0,this.top=0,this.right=0,this.bottom=0},e.FRect0.prototype=e.FRect.prototype,e.FRect1=function(t){this.left=t.left,this.top=t.top,this.right=t.right,this.bottom=t.bottom},e.FRect1.prototype=e.FRect.prototype,e.FRect4=function(t,e,i,n){this.left=t,this.top=e,this.right=i,this.bottom=n},e.FRect4.prototype=e.FRect.prototype,e.ClipType={ctIntersection:0,ctUnion:1,ctDifference:2,ctXor:3},e.PolyType={ptSubject:0,ptClip:1},e.PolyFillType={pftEvenOdd:0,pftNonZero:1,pftPositive:2,pftNegative:3},e.JoinType={jtSquare:0,jtRound:1,jtMiter:2},e.EndType={etOpenSquare:0,etOpenRound:1,etOpenButt:2,etClosedLine:3,etClosedPolygon:4},e.EdgeSide={esLeft:0,esRight:1},e.Direction={dRightToLeft:0,dLeftToRight:1},e.TEdge=function(){this.Bot=new e.FPoint0,this.Curr=new e.FPoint0,this.Top=new e.FPoint0,this.Delta=new e.FPoint0,this.Dx=0,this.PolyTyp=e.PolyType.ptSubject,this.Side=e.EdgeSide.esLeft,this.WindDelta=0,this.WindCnt=0,this.WindCnt2=0,this.OutIdx=0,this.Next=null,this.Prev=null,this.NextInLML=null,this.NextInAEL=null,this.PrevInAEL=null,this.NextInSEL=null,this.PrevInSEL=null},e.IntersectNode=function(){this.Edge1=null,this.Edge2=null,this.Pt=new e.FPoint0},e.MyIntersectNodeSort=function(){},e.MyIntersectNodeSort.Compare=function(t,e){var i=e.Pt.Y-t.Pt.Y;return i>0?1:i<0?-1:0},e.LocalMinima=function(){this.Y=0,this.LeftBound=null,this.RightBound=null,this.Next=null},e.Scanbeam=function(){this.Y=0,this.Next=null},e.Maxima=function(){this.X=0,this.Next=null,this.Prev=null},e.OutRec=function(){this.Idx=0,this.IsHole=!1,this.IsOpen=!1,this.FirstLeft=null,this.Pts=null,this.BottomPt=null,this.PolyNode=null},e.OutPt=function(){this.Idx=0,this.Pt=new e.FPoint0,this.Next=null,this.Prev=null},e.Join=function(){this.OutPt1=null,this.OutPt2=null,this.OffPt=new e.FPoint0},e.ClipperBase=function(){this.m_MinimaList=null,this.m_CurrentLM=null,this.m_edges=new Array,this.m_HasOpenPaths=!1,this.PreserveCollinear=!1,this.m_Scanbeam=null,this.m_PolyOuts=null,this.m_ActiveEdges=null},e.ClipperBase.horizontal=-34e37,e.ClipperBase.Skip=-2,e.ClipperBase.Unassigned=-1,e.ClipperBase.tolerance=1e-20,e.ClipperBase.maxValue=Math.sqrt(Number.MAX_VALUE),e.ClipperBase.minValue=Math.sqrt(Number.MIN_VALUE),e.ClipperBase.near_zero=function(t){return t>-e.ClipperBase.tolerance&&t<e.ClipperBase.tolerance},e.ClipperBase.IsHorizontal=function(t){return 0===t.Delta.Y},e.ClipperBase.prototype.PointIsVertex=function(t,i){var n=i;do{if(e.FPoint.op_Equality(n.Pt,t))return!0;n=n.Next}while(n!==i);return!1},e.ClipperBase.prototype.PointOnLineSegment=function(t,e,i){return t.X===e.X&&t.Y===e.Y||t.X===i.X&&t.Y===i.Y||t.X>e.X==t.X<i.X&&t.Y>e.Y==t.Y<i.Y&&(t.X-e.X)*(i.Y-e.Y)==(i.X-e.X)*(t.Y-e.Y)},e.ClipperBase.prototype.PointOnPolygon=function(t,e){for(var i=e;;){if(this.PointOnLineSegment(t,i.Pt,i.Next.Pt))return!0;if((i=i.Next)===e)break}return!1},e.ClipperBase.prototype.SlopesEqual=e.ClipperBase.SlopesEqual=function(){var t,e,i,n,r,s,o=arguments,a=o.length;return 2===a?(t=o[0],e=o[1],t.Delta.Y*e.Delta.X==t.Delta.X*e.Delta.Y):3===a?(i=o[0],n=o[1],r=o[2],(i.Y-n.Y)*(n.X-r.X)-(i.X-n.X)*(n.Y-r.Y)==0):(i=o[0],n=o[1],r=o[2],s=o[3],(i.Y-n.Y)*(r.X-s.X)-(i.X-n.X)*(r.Y-s.Y)==0)},e.ClipperBase.SlopesEqual3=function(t,e){return t.Delta.Y*e.Delta.X==t.Delta.X*e.Delta.Y},e.ClipperBase.SlopesEqual4=function(t,e,i){return(t.Y-e.Y)*(e.X-i.X)-(t.X-e.X)*(e.Y-i.Y)==0},e.ClipperBase.SlopesEqual5=function(t,e,i,n){return(t.Y-e.Y)*(i.X-n.X)-(t.X-e.X)*(i.Y-n.Y)==0},e.ClipperBase.prototype.Clear=function(){this.DisposeLocalMinimaList();for(var t=0,i=this.m_edges.length;t<i;++t){for(var n=0,r=this.m_edges[t].length;n<r;++n)this.m_edges[t][n]=null;e.Clear(this.m_edges[t])}e.Clear(this.m_edges),this.m_HasOpenPaths=!1},e.ClipperBase.prototype.DisposeLocalMinimaList=function(){for(;null!==this.m_MinimaList;){var t=this.m_MinimaList.Next;this.m_MinimaList=null,this.m_MinimaList=t}this.m_CurrentLM=null},e.ClipperBase.prototype.RangeTest=function(t){(t.X>e.ClipperBase.maxValue||t.X<-e.ClipperBase.maxValue||t.Y>e.ClipperBase.maxValue||t.Y<-e.ClipperBase.maxValue||t.X>0&&t.X<e.ClipperBase.minValue||t.Y>0&&t.Y<e.ClipperBase.minValue||t.X<0&&t.X>-e.ClipperBase.minValue||t.Y<0&&t.Y>-e.ClipperBase.minValue)&&e.Error("Coordinate outside allowed range in RangeTest().")},e.ClipperBase.prototype.InitEdge=function(t,i,n,r){t.Next=i,t.Prev=n,t.Curr.X=r.X,t.Curr.Y=r.Y,e.use_xyz&&(t.Curr.Z=r.Z),t.OutIdx=-1},e.ClipperBase.prototype.InitEdge2=function(t,i){t.Curr.Y>=t.Next.Curr.Y?(t.Bot.X=t.Curr.X,t.Bot.Y=t.Curr.Y,e.use_xyz&&(t.Bot.Z=t.Curr.Z),t.Top.X=t.Next.Curr.X,t.Top.Y=t.Next.Curr.Y,e.use_xyz&&(t.Top.Z=t.Next.Curr.Z)):(t.Top.X=t.Curr.X,t.Top.Y=t.Curr.Y,e.use_xyz&&(t.Top.Z=t.Curr.Z),t.Bot.X=t.Next.Curr.X,t.Bot.Y=t.Next.Curr.Y,e.use_xyz&&(t.Bot.Z=t.Next.Curr.Z)),this.SetDx(t),t.PolyTyp=i},e.ClipperBase.prototype.FindNextLocMin=function(t){for(var i;;){for(;e.FPoint.op_Inequality(t.Bot,t.Prev.Bot)||e.FPoint.op_Equality(t.Curr,t.Top);)t=t.Next;if(t.Dx!==e.ClipperBase.horizontal&&t.Prev.Dx!==e.ClipperBase.horizontal)break;for(;t.Prev.Dx===e.ClipperBase.horizontal;)t=t.Prev;for(i=t;t.Dx===e.ClipperBase.horizontal;)t=t.Next;if(t.Top.Y!==t.Prev.Bot.Y){i.Prev.Bot.X<t.Bot.X&&(t=i);break}}return t},e.ClipperBase.prototype.ProcessBound=function(t,i){var n,r,s=t;if(s.OutIdx===e.ClipperBase.Skip){if(t=s,i){for(;t.Top.Y===t.Next.Bot.Y;)t=t.Next;for(;t!==s&&t.Dx===e.ClipperBase.horizontal;)t=t.Prev}else{for(;t.Top.Y===t.Prev.Bot.Y;)t=t.Prev;for(;t!==s&&t.Dx===e.ClipperBase.horizontal;)t=t.Next}if(t===s)s=i?t.Next:t.Prev;else{t=i?s.Next:s.Prev;var o=new e.LocalMinima;o.Next=null,o.Y=t.Bot.Y,o.LeftBound=null,o.RightBound=t,t.WindDelta=0,s=this.ProcessBound(t,i),this.InsertLocalMinima(o)}return s}if(t.Dx===e.ClipperBase.horizontal&&((n=i?t.Prev:t.Next).Dx===e.ClipperBase.horizontal?n.Bot.X!==t.Bot.X&&n.Top.X!==t.Bot.X&&this.ReverseHorizontal(t):n.Bot.X!==t.Bot.X&&this.ReverseHorizontal(t)),n=t,i){for(;s.Top.Y===s.Next.Bot.Y&&s.Next.OutIdx!==e.ClipperBase.Skip;)s=s.Next;if(s.Dx===e.ClipperBase.horizontal&&s.Next.OutIdx!==e.ClipperBase.Skip){for(r=s;r.Prev.Dx===e.ClipperBase.horizontal;)r=r.Prev;r.Prev.Top.X>s.Next.Top.X&&(s=r.Prev)}for(;t!==s;)t.NextInLML=t.Next,t.Dx===e.ClipperBase.horizontal&&t!==n&&t.Bot.X!==t.Prev.Top.X&&this.ReverseHorizontal(t),t=t.Next;t.Dx===e.ClipperBase.horizontal&&t!==n&&t.Bot.X!==t.Prev.Top.X&&this.ReverseHorizontal(t),s=s.Next}else{for(;s.Top.Y===s.Prev.Bot.Y&&s.Prev.OutIdx!==e.ClipperBase.Skip;)s=s.Prev;if(s.Dx===e.ClipperBase.horizontal&&s.Prev.OutIdx!==e.ClipperBase.Skip){for(r=s;r.Next.Dx===e.ClipperBase.horizontal;)r=r.Next;(r.Next.Top.X===s.Prev.Top.X||r.Next.Top.X>s.Prev.Top.X)&&(s=r.Next)}for(;t!==s;)t.NextInLML=t.Prev,t.Dx===e.ClipperBase.horizontal&&t!==n&&t.Bot.X!==t.Next.Top.X&&this.ReverseHorizontal(t),t=t.Prev;t.Dx===e.ClipperBase.horizontal&&t!==n&&t.Bot.X!==t.Next.Top.X&&this.ReverseHorizontal(t),s=s.Prev}return s},e.ClipperBase.prototype.AddPath=function(t,i,n){e.use_lines?n||i!==e.PolyType.ptClip||e.Error("AddPath: Open paths must be subject."):n||e.Error("AddPath: Open paths have been disabled.");var r=t.length-1;if(n)for(;r>0&&e.FPoint.op_Equality(t[r],t[0]);)--r;for(;r>0&&e.FPoint.op_Equality(t[r],t[r-1]);)--r;if(n&&r<2||!n&&r<1)return!1;for(var s=new Array,o=0;o<=r;o++)s.push(new e.TEdge);var a=!0;s[1].Curr.X=t[1].X,s[1].Curr.Y=t[1].Y,e.use_xyz&&(s[1].Curr.Z=t[1].Z),this.RangeTest(t[0]),this.RangeTest(t[r]),this.InitEdge(s[0],s[1],s[r],t[0]),this.InitEdge(s[r],s[0],s[r-1],t[r]);for(o=r-1;o>=1;--o)this.RangeTest(t[o]),this.InitEdge(s[o],s[o+1],s[o-1],t[o]);for(var l,h=s[0],u=h,p=h;;)if(u.Curr!==u.Next.Curr||!n&&u.Next===h){if(u.Prev===u.Next)break;if(!n||!e.ClipperBase.SlopesEqual4(u.Prev.Curr,u.Curr,u.Next.Curr)||this.PreserveCollinear&&this.Pt2IsBetweenPt1AndPt3(u.Prev.Curr,u.Curr,u.Next.Curr)){if((u=u.Next)===p||!n&&u.Next===h)break}else u===h&&(h=u.Next),p=u=(u=this.RemoveEdge(u)).Prev}else{if(u===u.Next)break;u===h&&(h=u.Next),p=u=this.RemoveEdge(u)}if(!n&&u===u.Next||n&&u.Prev===u.Next)return!1;n||(this.m_HasOpenPaths=!0,h.Prev.OutIdx=e.ClipperBase.Skip),u=h;do{this.InitEdge2(u,i),u=u.Next,a&&u.Curr.Y!==h.Curr.Y&&(a=!1)}while(u!==h);if(a){if(n)return!1;for(u.Prev.OutIdx=e.ClipperBase.Skip,(f=new e.LocalMinima).Next=null,f.Y=u.Bot.Y,f.LeftBound=null,f.RightBound=u,f.RightBound.Side=e.EdgeSide.esRight,f.RightBound.WindDelta=0;u.Bot.X!==u.Prev.Top.X&&this.ReverseHorizontal(u),u.Next.OutIdx!==e.ClipperBase.Skip;)u.NextInLML=u.Next,u=u.Next;return this.InsertLocalMinima(f),this.m_edges.push(s),!0}this.m_edges.push(s);var d=null;for(e.FPoint.op_Equality(u.Prev.Bot,u.Prev.Top)&&(u=u.Next);(u=this.FindNextLocMin(u))!==d;){var f;null===d&&(d=u),(f=new e.LocalMinima).Next=null,f.Y=u.Bot.Y,u.Dx<u.Prev.Dx?(f.LeftBound=u.Prev,f.RightBound=u,l=!1):(f.LeftBound=u,f.RightBound=u.Prev,l=!0),f.LeftBound.Side=e.EdgeSide.esLeft,f.RightBound.Side=e.EdgeSide.esRight,n?f.LeftBound.Next===f.RightBound?f.LeftBound.WindDelta=-1:f.LeftBound.WindDelta=1:f.LeftBound.WindDelta=0,f.RightBound.WindDelta=-f.LeftBound.WindDelta,(u=this.ProcessBound(f.LeftBound,l)).OutIdx===e.ClipperBase.Skip&&(u=this.ProcessBound(u,l));var c=this.ProcessBound(f.RightBound,!l);c.OutIdx===e.ClipperBase.Skip&&(c=this.ProcessBound(c,!l)),f.LeftBound.OutIdx===e.ClipperBase.Skip?f.LeftBound=null:f.RightBound.OutIdx===e.ClipperBase.Skip&&(f.RightBound=null),this.InsertLocalMinima(f),l||(u=c)}return!0},e.ClipperBase.prototype.AddPaths=function(t,e,i){for(var n=!1,r=0,s=t.length;r<s;++r)this.AddPath(t[r],e,i)&&(n=!0);return n},e.ClipperBase.prototype.Pt2IsBetweenPt1AndPt3=function(t,i,n){return!(e.FPoint.op_Equality(t,n)||e.FPoint.op_Equality(t,i)||e.FPoint.op_Equality(n,i))&&(t.X!==n.X?i.X>t.X==i.X<n.X:i.Y>t.Y==i.Y<n.Y)},e.ClipperBase.prototype.RemoveEdge=function(t){t.Prev.Next=t.Next,t.Next.Prev=t.Prev;var e=t.Next;return t.Prev=null,e},e.ClipperBase.prototype.SetDx=function(t){t.Delta.X=t.Top.X-t.Bot.X,t.Delta.Y=t.Top.Y-t.Bot.Y,0===t.Delta.Y?t.Dx=e.ClipperBase.horizontal:t.Dx=t.Delta.X/t.Delta.Y},e.ClipperBase.prototype.InsertLocalMinima=function(t){if(null===this.m_MinimaList)this.m_MinimaList=t;else if(t.Y>=this.m_MinimaList.Y)t.Next=this.m_MinimaList,this.m_MinimaList=t;else{for(var e=this.m_MinimaList;null!==e.Next&&t.Y<e.Next.Y;)e=e.Next;t.Next=e.Next,e.Next=t}},e.ClipperBase.prototype.PopLocalMinima=function(t,e){return e.v=this.m_CurrentLM,null!==this.m_CurrentLM&&this.m_CurrentLM.Y===t&&(this.m_CurrentLM=this.m_CurrentLM.Next,!0)},e.ClipperBase.prototype.ReverseHorizontal=function(t){var i=t.Top.X;t.Top.X=t.Bot.X,t.Bot.X=i,e.use_xyz&&(i=t.Top.Z,t.Top.Z=t.Bot.Z,t.Bot.Z=i)},e.ClipperBase.prototype.Reset=function(){if(this.m_CurrentLM=this.m_MinimaList,null!==this.m_CurrentLM){this.m_Scanbeam=null;for(var t=this.m_MinimaList;null!==t;){this.InsertScanbeam(t.Y);var i=t.LeftBound;null!==i&&(i.Curr.X=i.Bot.X,i.Curr.Y=i.Bot.Y,e.use_xyz&&(i.Curr.Z=i.Bot.Z),i.OutIdx=e.ClipperBase.Unassigned),null!==(i=t.RightBound)&&(i.Curr.X=i.Bot.X,i.Curr.Y=i.Bot.Y,e.use_xyz&&(i.Curr.Z=i.Bot.Z),i.OutIdx=e.ClipperBase.Unassigned),t=t.Next}this.m_ActiveEdges=null}},e.ClipperBase.prototype.InsertScanbeam=function(t){if(null===this.m_Scanbeam)this.m_Scanbeam=new e.Scanbeam,this.m_Scanbeam.Next=null,this.m_Scanbeam.Y=t;else if(t>this.m_Scanbeam.Y){var i=new e.Scanbeam;i.Y=t,i.Next=this.m_Scanbeam,this.m_Scanbeam=i}else{for(var n=this.m_Scanbeam;null!==n.Next&&t<=n.Next.Y;)n=n.Next;if(t===n.Y)return;var r=new e.Scanbeam;r.Y=t,r.Next=n.Next,n.Next=r}},e.ClipperBase.prototype.PopScanbeam=function(t){return null===this.m_Scanbeam?(t.v=0,!1):(t.v=this.m_Scanbeam.Y,this.m_Scanbeam=this.m_Scanbeam.Next,!0)},e.ClipperBase.prototype.LocalMinimaPending=function(){return null!==this.m_CurrentLM},e.ClipperBase.prototype.CreateOutRec=function(){var t=new e.OutRec;return t.Idx=e.ClipperBase.Unassigned,t.IsHole=!1,t.IsOpen=!1,t.FirstLeft=null,t.Pts=null,t.BottomPt=null,t.PolyNode=null,this.m_PolyOuts.push(t),t.Idx=this.m_PolyOuts.length-1,t},e.ClipperBase.prototype.DisposeOutRec=function(t){var e=this.m_PolyOuts[t];e.Pts=null,e=null,this.m_PolyOuts[t]=null},e.ClipperBase.prototype.UpdateEdgeIntoAEL=function(t){null===t.NextInLML&&e.Error("UpdateEdgeIntoAEL: invalid call");var i=t.PrevInAEL,n=t.NextInAEL;return t.NextInLML.OutIdx=t.OutIdx,null!==i?i.NextInAEL=t.NextInLML:this.m_ActiveEdges=t.NextInLML,null!==n&&(n.PrevInAEL=t.NextInLML),t.NextInLML.Side=t.Side,t.NextInLML.WindDelta=t.WindDelta,t.NextInLML.WindCnt=t.WindCnt,t.NextInLML.WindCnt2=t.WindCnt2,(t=t.NextInLML).Curr.X=t.Bot.X,t.Curr.Y=t.Bot.Y,t.PrevInAEL=i,t.NextInAEL=n,e.ClipperBase.IsHorizontal(t)||this.InsertScanbeam(t.Top.Y),t},e.ClipperBase.prototype.SwapPositionsInAEL=function(t,e){if(t.NextInAEL!==t.PrevInAEL&&e.NextInAEL!==e.PrevInAEL){if(t.NextInAEL===e){var i=e.NextInAEL;null!==i&&(i.PrevInAEL=t);var n=t.PrevInAEL;null!==n&&(n.NextInAEL=e),e.PrevInAEL=n,e.NextInAEL=t,t.PrevInAEL=e,t.NextInAEL=i}else if(e.NextInAEL===t){var r=t.NextInAEL;null!==r&&(r.PrevInAEL=e);var s=e.PrevInAEL;null!==s&&(s.NextInAEL=t),t.PrevInAEL=s,t.NextInAEL=e,e.PrevInAEL=t,e.NextInAEL=r}else{var o=t.NextInAEL,a=t.PrevInAEL;t.NextInAEL=e.NextInAEL,null!==t.NextInAEL&&(t.NextInAEL.PrevInAEL=t),t.PrevInAEL=e.PrevInAEL,null!==t.PrevInAEL&&(t.PrevInAEL.NextInAEL=t),e.NextInAEL=o,null!==e.NextInAEL&&(e.NextInAEL.PrevInAEL=e),e.PrevInAEL=a,null!==e.PrevInAEL&&(e.PrevInAEL.NextInAEL=e)}null===t.PrevInAEL?this.m_ActiveEdges=t:null===e.PrevInAEL&&(this.m_ActiveEdges=e)}},e.ClipperBase.prototype.DeleteFromAEL=function(t){var e=t.PrevInAEL,i=t.NextInAEL;null===e&&null===i&&t!==this.m_ActiveEdges||(null!==e?e.NextInAEL=i:this.m_ActiveEdges=i,null!==i&&(i.PrevInAEL=e),t.NextInAEL=null,t.PrevInAEL=null)},e.Clipper=function(t){void 0===t&&(t=0),this.m_PolyOuts=null,this.m_ClipType=e.ClipType.ctIntersection,this.m_Scanbeam=null,this.m_Maxima=null,this.m_ActiveEdges=null,this.m_SortedEdges=null,this.m_IntersectList=null,this.m_IntersectNodeComparer=null,this.m_ExecuteLocked=!1,this.m_ClipFillType=e.PolyFillType.pftEvenOdd,this.m_SubjFillType=e.PolyFillType.pftEvenOdd,this.m_Joins=null,this.m_GhostJoins=null,this.m_UsingPolyTree=!1,this.ReverseSolution=!1,this.StrictlySimple=!1,e.ClipperBase.call(this),this.m_Scanbeam=null,this.m_Maxima=null,this.m_ActiveEdges=null,this.m_SortedEdges=null,this.m_IntersectList=new Array,this.m_IntersectNodeComparer=e.MyIntersectNodeSort.Compare,this.m_ExecuteLocked=!1,this.m_UsingPolyTree=!1,this.m_PolyOuts=new Array,this.m_Joins=new Array,this.m_GhostJoins=new Array,this.ReverseSolution=0!=(1&t),this.StrictlySimple=0!=(2&t),this.PreserveCollinear=0!=(4&t),e.use_xyz&&(this.ZFillFunction=null)},e.Clipper.ioReverseSolution=1,e.Clipper.ioStrictlySimple=2,e.Clipper.ioPreserveCollinear=4,e.Clipper.prototype.Clear=function(){0!==this.m_edges.length&&(this.DisposeAllPolyPts(),e.ClipperBase.prototype.Clear.call(this))},e.Clipper.prototype.InsertMaxima=function(t){var i=new e.Maxima;if(i.X=t,null===this.m_Maxima)this.m_Maxima=i,this.m_Maxima.Next=null,this.m_Maxima.Prev=null;else if(t<this.m_Maxima.X)i.Next=this.m_Maxima,i.Prev=null,this.m_Maxima=i;else{for(var n=this.m_Maxima;null!==n.Next&&t>=n.Next.X;)n=n.Next;if(t===n.X)return;i.Next=n.Next,i.Prev=n,null!==n.Next&&(n.Next.Prev=i),n.Next=i}},e.Clipper.prototype.Execute=function(){var t=arguments,i=t.length,n=t[1]instanceof e.PolyTree;if(4===i&&!n){var r=t[0],s=t[1],o=t[2],a=t[3];if(this.m_ExecuteLocked)return!1;this.m_HasOpenPaths&&e.Error("Error: PolyTree struct is needed for open path clipping."),this.m_ExecuteLocked=!0,e.Clear(s),this.m_SubjFillType=o,this.m_ClipFillType=a,this.m_ClipType=r,this.m_UsingPolyTree=!1;try{(h=this.ExecuteInternal())&&this.BuildResult(s)}finally{this.DisposeAllPolyPts(),this.m_ExecuteLocked=!1}return h}if(4===i&&n){r=t[0];var l=t[1];o=t[2],a=t[3];if(this.m_ExecuteLocked)return!1;this.m_ExecuteLocked=!0,this.m_SubjFillType=o,this.m_ClipFillType=a,this.m_ClipType=r,this.m_UsingPolyTree=!0;try{var h;(h=this.ExecuteInternal())&&this.BuildResult2(l)}finally{this.DisposeAllPolyPts(),this.m_ExecuteLocked=!1}return h}if(2===i&&!n){r=t[0],s=t[1];return this.Execute(r,s,e.PolyFillType.pftEvenOdd,e.PolyFillType.pftEvenOdd)}if(2===i&&n){r=t[0],l=t[1];return this.Execute(r,l,e.PolyFillType.pftEvenOdd,e.PolyFillType.pftEvenOdd)}},e.Clipper.prototype.FixHoleLinkage=function(t){if(null!==t.FirstLeft&&(t.IsHole===t.FirstLeft.IsHole||null===t.FirstLeft.Pts)){for(var e=t.FirstLeft;null!==e&&(e.IsHole===t.IsHole||null===e.Pts);)e=e.FirstLeft;t.FirstLeft=e}},e.Clipper.prototype.ExecuteInternal=function(){try{this.Reset(),this.m_SortedEdges=null,this.m_Maxima=null;var t,e,i,n={},r={};if(!this.PopScanbeam(n))return!1;for(this.InsertLocalMinimaIntoAEL(n.v);this.PopScanbeam(r)||this.LocalMinimaPending();){if(this.ProcessHorizontals(),this.m_GhostJoins.length=0,!this.ProcessIntersections(r.v))return!1;this.ProcessEdgesAtTopOfScanbeam(r.v),n.v=r.v,this.InsertLocalMinimaIntoAEL(n.v)}for(e=0,i=this.m_PolyOuts.length;e<i;e++)null===(t=this.m_PolyOuts[e]).Pts||t.IsOpen||(t.IsHole^this.ReverseSolution)==this.Area$1(t)>0&&this.ReversePolyPtLinks(t.Pts);for(this.JoinCommonEdges(),e=0,i=this.m_PolyOuts.length;e<i;e++)null!==(t=this.m_PolyOuts[e]).Pts&&(t.IsOpen?this.FixupOutPolyline(t):this.FixupOutPolygon(t));return this.StrictlySimple&&this.DoSimplePolygons(),!0}finally{this.m_Joins.length=0,this.m_GhostJoins.length=0}},e.Clipper.prototype.DisposeAllPolyPts=function(){for(var t=0,i=this.m_PolyOuts.length;t<i;++t)this.DisposeOutRec(t);e.Clear(this.m_PolyOuts)},e.Clipper.prototype.AddJoin=function(t,i,n){var r=new e.Join;r.OutPt1=t,r.OutPt2=i,r.OffPt.X=n.X,r.OffPt.Y=n.Y,e.use_xyz&&(r.OffPt.Z=n.Z),this.m_Joins.push(r)},e.Clipper.prototype.AddGhostJoin=function(t,i){var n=new e.Join;n.OutPt1=t,n.OffPt.X=i.X,n.OffPt.Y=i.Y,e.use_xyz&&(n.OffPt.Z=i.Z),this.m_GhostJoins.push(n)},e.Clipper.prototype.SetZ=function(t,i,n){if(null!==this.ZFillFunction){if(0!==t.Z||null===this.ZFillFunction)return;e.FPoint.op_Equality(t,i.Bot)?t.Z=i.Bot.Z:e.FPoint.op_Equality(t,i.Top)?t.Z=i.Top.Z:e.FPoint.op_Equality(t,n.Bot)?t.Z=n.Bot.Z:e.FPoint.op_Equality(t,n.Top)?t.Z=n.Top.Z:this.ZFillFunction(i.Bot,i.Top,n.Bot,n.Top,t)}},e.Clipper.prototype.InsertLocalMinimaIntoAEL=function(t){for(var i,n,r={};this.PopLocalMinima(t,r);){i=r.v.LeftBound,n=r.v.RightBound;var s=null;if(null===i?(this.InsertEdgeIntoAEL(n,null),this.SetWindingCount(n),this.IsContributing(n)&&(s=this.AddOutPt(n,n.Bot))):null===n?(this.InsertEdgeIntoAEL(i,null),this.SetWindingCount(i),this.IsContributing(i)&&(s=this.AddOutPt(i,i.Bot)),this.InsertScanbeam(i.Top.Y)):(this.InsertEdgeIntoAEL(i,null),this.InsertEdgeIntoAEL(n,i),this.SetWindingCount(i),n.WindCnt=i.WindCnt,n.WindCnt2=i.WindCnt2,this.IsContributing(i)&&(s=this.AddLocalMinPoly(i,n,i.Bot)),this.InsertScanbeam(i.Top.Y)),null!==n&&(e.ClipperBase.IsHorizontal(n)?(null!==n.NextInLML&&this.InsertScanbeam(n.NextInLML.Top.Y),this.AddEdgeToSEL(n)):this.InsertScanbeam(n.Top.Y)),null!==i&&null!==n){if(null!==s&&e.ClipperBase.IsHorizontal(n)&&this.m_GhostJoins.length>0&&0!==n.WindDelta)for(var o=0,a=this.m_GhostJoins.length;o<a;o++){var l=this.m_GhostJoins[o];this.HorzSegmentsOverlap(l.OutPt1.Pt.X,l.OffPt.X,n.Bot.X,n.Top.X)&&this.AddJoin(l.OutPt1,s,l.OffPt)}if(i.OutIdx>=0&&null!==i.PrevInAEL&&i.PrevInAEL.Curr.X===i.Bot.X&&i.PrevInAEL.OutIdx>=0&&e.ClipperBase.SlopesEqual5(i.PrevInAEL.Curr,i.PrevInAEL.Top,i.Curr,i.Top)&&0!==i.WindDelta&&0!==i.PrevInAEL.WindDelta){var h=this.AddOutPt(i.PrevInAEL,i.Bot);this.AddJoin(s,h,i.Top)}if(i.NextInAEL!==n){if(n.OutIdx>=0&&n.PrevInAEL.OutIdx>=0&&e.ClipperBase.SlopesEqual5(n.PrevInAEL.Curr,n.PrevInAEL.Top,n.Curr,n.Top)&&0!==n.WindDelta&&0!==n.PrevInAEL.WindDelta){h=this.AddOutPt(n.PrevInAEL,n.Bot);this.AddJoin(s,h,n.Top)}var u=i.NextInAEL;if(null!==u)for(;u!==n;)this.IntersectEdges(n,u,i.Curr),u=u.NextInAEL}}}},e.Clipper.prototype.InsertEdgeIntoAEL=function(t,e){if(null===this.m_ActiveEdges)t.PrevInAEL=null,t.NextInAEL=null,this.m_ActiveEdges=t;else if(null===e&&this.E2InsertsBeforeE1(this.m_ActiveEdges,t))t.PrevInAEL=null,t.NextInAEL=this.m_ActiveEdges,this.m_ActiveEdges.PrevInAEL=t,this.m_ActiveEdges=t;else{for(null===e&&(e=this.m_ActiveEdges);null!==e.NextInAEL&&!this.E2InsertsBeforeE1(e.NextInAEL,t);)e=e.NextInAEL;t.NextInAEL=e.NextInAEL,null!==e.NextInAEL&&(e.NextInAEL.PrevInAEL=t),t.PrevInAEL=e,e.NextInAEL=t}},e.Clipper.prototype.E2InsertsBeforeE1=function(t,i){return i.Curr.X===t.Curr.X?i.Top.Y>t.Top.Y?i.Top.X<e.Clipper.TopX(t,i.Top.Y):t.Top.X>e.Clipper.TopX(i,t.Top.Y):i.Curr.X<t.Curr.X},e.Clipper.prototype.IsEvenOddFillType=function(t){return t.PolyTyp===e.PolyType.ptSubject?this.m_SubjFillType===e.PolyFillType.pftEvenOdd:this.m_ClipFillType===e.PolyFillType.pftEvenOdd},e.Clipper.prototype.IsEvenOddAltFillType=function(t){return t.PolyTyp===e.PolyType.ptSubject?this.m_ClipFillType===e.PolyFillType.pftEvenOdd:this.m_SubjFillType===e.PolyFillType.pftEvenOdd},e.Clipper.prototype.IsContributing=function(t){var i,n;switch(t.PolyTyp===e.PolyType.ptSubject?(i=this.m_SubjFillType,n=this.m_ClipFillType):(i=this.m_ClipFillType,n=this.m_SubjFillType),i){case e.PolyFillType.pftEvenOdd:if(0===t.WindDelta&&1!==t.WindCnt)return!1;break;case e.PolyFillType.pftNonZero:if(1!==Math.abs(t.WindCnt))return!1;break;case e.PolyFillType.pftPositive:if(1!==t.WindCnt)return!1;break;default:if(-1!==t.WindCnt)return!1}switch(this.m_ClipType){case e.ClipType.ctIntersection:switch(n){case e.PolyFillType.pftEvenOdd:case e.PolyFillType.pftNonZero:return 0!==t.WindCnt2;case e.PolyFillType.pftPositive:return t.WindCnt2>0;default:return t.WindCnt2<0}case e.ClipType.ctUnion:switch(n){case e.PolyFillType.pftEvenOdd:case e.PolyFillType.pftNonZero:return 0===t.WindCnt2;case e.PolyFillType.pftPositive:return t.WindCnt2<=0;default:return t.WindCnt2>=0}case e.ClipType.ctDifference:if(t.PolyTyp===e.PolyType.ptSubject)switch(n){case e.PolyFillType.pftEvenOdd:case e.PolyFillType.pftNonZero:return 0===t.WindCnt2;case e.PolyFillType.pftPositive:return t.WindCnt2<=0;default:return t.WindCnt2>=0}else switch(n){case e.PolyFillType.pftEvenOdd:case e.PolyFillType.pftNonZero:return 0!==t.WindCnt2;case e.PolyFillType.pftPositive:return t.WindCnt2>0;default:return t.WindCnt2<0}case e.ClipType.ctXor:if(0!==t.WindDelta)return!0;switch(n){case e.PolyFillType.pftEvenOdd:case e.PolyFillType.pftNonZero:return 0===t.WindCnt2;case e.PolyFillType.pftPositive:return t.WindCnt2<=0;default:return t.WindCnt2>=0}}return!0},e.Clipper.prototype.SetWindingCount=function(t){for(var i=t.PrevInAEL;null!==i&&(i.PolyTyp!==t.PolyTyp||0===i.WindDelta);)i=i.PrevInAEL;if(null===i){var n=t.PolyTyp===e.PolyType.ptSubject?this.m_SubjFillType:this.m_ClipFillType;0===t.WindDelta?t.WindCnt=n===e.PolyFillType.pftNegative?-1:1:t.WindCnt=t.WindDelta,t.WindCnt2=0,i=this.m_ActiveEdges}else if(0===t.WindDelta&&this.m_ClipType!==e.ClipType.ctUnion)t.WindCnt=1,t.WindCnt2=i.WindCnt2,i=i.NextInAEL;else if(this.IsEvenOddFillType(t)){if(0===t.WindDelta){for(var r=!0,s=i.PrevInAEL;null!==s;)s.PolyTyp===i.PolyTyp&&0!==s.WindDelta&&(r=!r),s=s.PrevInAEL;t.WindCnt=r?0:1}else t.WindCnt=t.WindDelta;t.WindCnt2=i.WindCnt2,i=i.NextInAEL}else i.WindCnt*i.WindDelta<0?Math.abs(i.WindCnt)>1?i.WindDelta*t.WindDelta<0?t.WindCnt=i.WindCnt:t.WindCnt=i.WindCnt+t.WindDelta:t.WindCnt=0===t.WindDelta?1:t.WindDelta:0===t.WindDelta?t.WindCnt=i.WindCnt<0?i.WindCnt-1:i.WindCnt+1:i.WindDelta*t.WindDelta<0?t.WindCnt=i.WindCnt:t.WindCnt=i.WindCnt+t.WindDelta,t.WindCnt2=i.WindCnt2,i=i.NextInAEL;if(this.IsEvenOddAltFillType(t))for(;i!==t;)0!==i.WindDelta&&(t.WindCnt2=0===t.WindCnt2?1:0),i=i.NextInAEL;else for(;i!==t;)t.WindCnt2+=i.WindDelta,i=i.NextInAEL},e.Clipper.prototype.AddEdgeToSEL=function(t){null===this.m_SortedEdges?(this.m_SortedEdges=t,t.PrevInSEL=null,t.NextInSEL=null):(t.NextInSEL=this.m_SortedEdges,t.PrevInSEL=null,this.m_SortedEdges.PrevInSEL=t,this.m_SortedEdges=t)},e.Clipper.prototype.PopEdgeFromSEL=function(t){if(t.v=this.m_SortedEdges,null===t.v)return!1;var e=t.v;return this.m_SortedEdges=t.v.NextInSEL,null!==this.m_SortedEdges&&(this.m_SortedEdges.PrevInSEL=null),e.NextInSEL=null,e.PrevInSEL=null,!0},e.Clipper.prototype.CopyAELToSEL=function(){var t=this.m_ActiveEdges;for(this.m_SortedEdges=t;null!==t;)t.PrevInSEL=t.PrevInAEL,t.NextInSEL=t.NextInAEL,t=t.NextInAEL},e.Clipper.prototype.SwapPositionsInSEL=function(t,e){if(!(null===t.NextInSEL&&null===t.PrevInSEL||null===e.NextInSEL&&null===e.PrevInSEL)){if(t.NextInSEL===e)null!==(i=e.NextInSEL)&&(i.PrevInSEL=t),null!==(n=t.PrevInSEL)&&(n.NextInSEL=e),e.PrevInSEL=n,e.NextInSEL=t,t.PrevInSEL=e,t.NextInSEL=i;else if(e.NextInSEL===t){null!==(i=t.NextInSEL)&&(i.PrevInSEL=e),null!==(n=e.PrevInSEL)&&(n.NextInSEL=t),t.PrevInSEL=n,t.NextInSEL=e,e.PrevInSEL=t,e.NextInSEL=i}else{var i=t.NextInSEL,n=t.PrevInSEL;t.NextInSEL=e.NextInSEL,null!==t.NextInSEL&&(t.NextInSEL.PrevInSEL=t),t.PrevInSEL=e.PrevInSEL,null!==t.PrevInSEL&&(t.PrevInSEL.NextInSEL=t),e.NextInSEL=i,null!==e.NextInSEL&&(e.NextInSEL.PrevInSEL=e),e.PrevInSEL=n,null!==e.PrevInSEL&&(e.PrevInSEL.NextInSEL=e)}null===t.PrevInSEL?this.m_SortedEdges=t:null===e.PrevInSEL&&(this.m_SortedEdges=e)}},e.Clipper.prototype.AddLocalMaxPoly=function(t,e,i){this.AddOutPt(t,i),0===e.WindDelta&&this.AddOutPt(e,i),t.OutIdx===e.OutIdx?(t.OutIdx=-1,e.OutIdx=-1):t.OutIdx<e.OutIdx?this.AppendPolygon(t,e):this.AppendPolygon(e,t)},e.Clipper.prototype.AddLocalMinPoly=function(t,i,n){var r,s,o;if(e.ClipperBase.IsHorizontal(i)||t.Dx>i.Dx?(r=this.AddOutPt(t,n),i.OutIdx=t.OutIdx,t.Side=e.EdgeSide.esLeft,i.Side=e.EdgeSide.esRight,o=(s=t).PrevInAEL===i?i.PrevInAEL:s.PrevInAEL):(r=this.AddOutPt(i,n),t.OutIdx=i.OutIdx,t.Side=e.EdgeSide.esRight,i.Side=e.EdgeSide.esLeft,o=(s=i).PrevInAEL===t?t.PrevInAEL:s.PrevInAEL),null!==o&&o.OutIdx>=0&&o.Top.Y<n.Y&&s.Top.Y<n.Y){var a=e.Clipper.TopX(o,n.Y),l=e.Clipper.TopX(s,n.Y);if(a===l&&0!==s.WindDelta&&0!==o.WindDelta&&e.ClipperBase.SlopesEqual5(new e.FPoint2(a,n.Y),o.Top,new e.FPoint2(l,n.Y),s.Top)){var h=this.AddOutPt(o,n);this.AddJoin(r,h,s.Top)}}return r},e.Clipper.prototype.AddOutPt=function(t,i){if(t.OutIdx<0){(r=this.CreateOutRec()).IsOpen=0===t.WindDelta;var n=new e.OutPt;return r.Pts=n,n.Idx=r.Idx,n.Pt.X=i.X,n.Pt.Y=i.Y,e.use_xyz&&(n.Pt.Z=i.Z),n.Next=n,n.Prev=n,r.IsOpen||this.SetHoleState(t,r),t.OutIdx=r.Idx,n}var r,s=(r=this.m_PolyOuts[t.OutIdx]).Pts,o=t.Side===e.EdgeSide.esLeft;return o&&e.FPoint.op_Equality(i,s.Pt)?s:!o&&e.FPoint.op_Equality(i,s.Prev.Pt)?s.Prev:((n=new e.OutPt).Idx=r.Idx,n.Pt.X=i.X,n.Pt.Y=i.Y,e.use_xyz&&(n.Pt.Z=i.Z),n.Next=s,n.Prev=s.Prev,n.Prev.Next=n,s.Prev=n,o&&(r.Pts=n),n)},e.Clipper.prototype.GetLastOutPt=function(t){var i=this.m_PolyOuts[t.OutIdx];return t.Side===e.EdgeSide.esLeft?i.Pts:i.Pts.Prev},e.Clipper.prototype.SwapPoints=function(t,i){var n=new e.FPoint1(t.Value);t.Value.X=i.Value.X,t.Value.Y=i.Value.Y,e.use_xyz&&(t.Value.Z=i.Value.Z),i.Value.X=n.X,i.Value.Y=n.Y,e.use_xyz&&(i.Value.Z=n.Z)},e.Clipper.prototype.HorzSegmentsOverlap=function(t,e,i,n){var r;return t>e&&(r=t,t=e,e=r),i>n&&(r=i,i=n,n=r),t<n&&i<e},e.Clipper.prototype.SetHoleState=function(t,e){for(var i=t.PrevInAEL,n=null;null!==i;)i.OutIdx>=0&&0!==i.WindDelta&&(null===n?n=i:n.OutIdx===i.OutIdx&&(n=null)),i=i.PrevInAEL;null===n?(e.FirstLeft=null,e.IsHole=!1):(e.FirstLeft=this.m_PolyOuts[n.OutIdx],e.IsHole=!e.FirstLeft.IsHole)},e.Clipper.prototype.GetDx=function(t,i){return t.Y===i.Y?e.ClipperBase.horizontal:(i.X-t.X)/(i.Y-t.Y)},e.Clipper.prototype.FirstIsBottomPt=function(t,i){for(var n=t.Prev;e.FPoint.op_Equality(n.Pt,t.Pt)&&n!==t;)n=n.Prev;var r=Math.abs(this.GetDx(t.Pt,n.Pt));for(n=t.Next;e.FPoint.op_Equality(n.Pt,t.Pt)&&n!==t;)n=n.Next;var s=Math.abs(this.GetDx(t.Pt,n.Pt));for(n=i.Prev;e.FPoint.op_Equality(n.Pt,i.Pt)&&n!==i;)n=n.Prev;var o=Math.abs(this.GetDx(i.Pt,n.Pt));for(n=i.Next;e.FPoint.op_Equality(n.Pt,i.Pt)&&n!==i;)n=n.Next;var a=Math.abs(this.GetDx(i.Pt,n.Pt));return Math.max(r,s)===Math.max(o,a)&&Math.min(r,s)===Math.min(o,a)?this.Area(t)>0:r>=o&&r>=a||s>=o&&s>=a},e.Clipper.prototype.GetBottomPt=function(t){for(var i=null,n=t.Next;n!==t;)n.Pt.Y>t.Pt.Y?(t=n,i=null):n.Pt.Y===t.Pt.Y&&n.Pt.X<=t.Pt.X&&(n.Pt.X<t.Pt.X?(i=null,t=n):n.Next!==t&&n.Prev!==t&&(i=n)),n=n.Next;if(null!==i)for(;i!==n;)for(this.FirstIsBottomPt(n,i)||(t=i),i=i.Next;e.FPoint.op_Inequality(i.Pt,t.Pt);)i=i.Next;return t},e.Clipper.prototype.GetLowermostRec=function(t,e){null===t.BottomPt&&(t.BottomPt=this.GetBottomPt(t.Pts)),null===e.BottomPt&&(e.BottomPt=this.GetBottomPt(e.Pts));var i=t.BottomPt,n=e.BottomPt;return i.Pt.Y>n.Pt.Y?t:i.Pt.Y<n.Pt.Y?e:i.Pt.X<n.Pt.X?t:i.Pt.X>n.Pt.X||i.Next===i?e:n.Next===n||this.FirstIsBottomPt(i,n)?t:e},e.Clipper.prototype.OutRec1RightOfOutRec2=function(t,e){do{if((t=t.FirstLeft)===e)return!0}while(null!==t);return!1},e.Clipper.prototype.GetOutRec=function(t){for(var e=this.m_PolyOuts[t];e!==this.m_PolyOuts[e.Idx];)e=this.m_PolyOuts[e.Idx];return e},e.Clipper.prototype.AppendPolygon=function(t,i){var n,r=this.m_PolyOuts[t.OutIdx],s=this.m_PolyOuts[i.OutIdx];n=this.OutRec1RightOfOutRec2(r,s)?s:this.OutRec1RightOfOutRec2(s,r)?r:this.GetLowermostRec(r,s);var o=r.Pts,a=o.Prev,l=s.Pts,h=l.Prev;t.Side===e.EdgeSide.esLeft?i.Side===e.EdgeSide.esLeft?(this.ReversePolyPtLinks(l),l.Next=o,o.Prev=l,a.Next=h,h.Prev=a,r.Pts=h):(h.Next=o,o.Prev=h,l.Prev=a,a.Next=l,r.Pts=l):i.Side===e.EdgeSide.esRight?(this.ReversePolyPtLinks(l),a.Next=h,h.Prev=a,l.Next=o,o.Prev=l):(a.Next=l,l.Prev=a,o.Prev=h,h.Next=o),r.BottomPt=null,n===s&&(s.FirstLeft!==r&&(r.FirstLeft=s.FirstLeft),r.IsHole=s.IsHole),s.Pts=null,s.BottomPt=null,s.FirstLeft=r;var u=t.OutIdx,p=i.OutIdx;t.OutIdx=-1,i.OutIdx=-1;for(var d=this.m_ActiveEdges;null!==d;){if(d.OutIdx===p){d.OutIdx=u,d.Side=t.Side;break}d=d.NextInAEL}s.Idx=r.Idx},e.Clipper.prototype.ReversePolyPtLinks=function(t){if(null!==t){var e,i;e=t;do{i=e.Next,e.Next=e.Prev,e.Prev=i,e=i}while(e!==t)}},e.Clipper.SwapSides=function(t,e){var i=t.Side;t.Side=e.Side,e.Side=i},e.Clipper.SwapPolyIndexes=function(t,e){var i=t.OutIdx;t.OutIdx=e.OutIdx,e.OutIdx=i},e.Clipper.prototype.IntersectEdges=function(t,i,n){var r=t.OutIdx>=0,s=i.OutIdx>=0;if(e.use_xyz&&this.SetZ(n,t,i),!e.use_lines||0!==t.WindDelta&&0!==i.WindDelta){if(t.PolyTyp===i.PolyTyp)if(this.IsEvenOddFillType(t)){var o=t.WindCnt;t.WindCnt=i.WindCnt,i.WindCnt=o}else t.WindCnt+i.WindDelta===0?t.WindCnt=-t.WindCnt:t.WindCnt+=i.WindDelta,i.WindCnt-t.WindDelta==0?i.WindCnt=-i.WindCnt:i.WindCnt-=t.WindDelta;else this.IsEvenOddFillType(i)?t.WindCnt2=0===t.WindCnt2?1:0:t.WindCnt2+=i.WindDelta,this.IsEvenOddFillType(t)?i.WindCnt2=0===i.WindCnt2?1:0:i.WindCnt2-=t.WindDelta;var a,l,h,u,p,d;switch(t.PolyTyp===e.PolyType.ptSubject?(a=this.m_SubjFillType,h=this.m_ClipFillType):(a=this.m_ClipFillType,h=this.m_SubjFillType),i.PolyTyp===e.PolyType.ptSubject?(l=this.m_SubjFillType,u=this.m_ClipFillType):(l=this.m_ClipFillType,u=this.m_SubjFillType),a){case e.PolyFillType.pftPositive:p=t.WindCnt;break;case e.PolyFillType.pftNegative:p=-t.WindCnt;break;default:p=Math.abs(t.WindCnt)}switch(l){case e.PolyFillType.pftPositive:d=i.WindCnt;break;case e.PolyFillType.pftNegative:d=-i.WindCnt;break;default:d=Math.abs(i.WindCnt)}if(r&&s)0!==p&&1!==p||0!==d&&1!==d||t.PolyTyp!==i.PolyTyp&&this.m_ClipType!==e.ClipType.ctXor?this.AddLocalMaxPoly(t,i,n):(this.AddOutPt(t,n),this.AddOutPt(i,n),e.Clipper.SwapSides(t,i),e.Clipper.SwapPolyIndexes(t,i));else if(r)0!==d&&1!==d||(this.AddOutPt(t,n),e.Clipper.SwapSides(t,i),e.Clipper.SwapPolyIndexes(t,i));else if(s)0!==p&&1!==p||(this.AddOutPt(i,n),e.Clipper.SwapSides(t,i),e.Clipper.SwapPolyIndexes(t,i));else if(!(0!==p&&1!==p||0!==d&&1!==d)){var f,c;switch(h){case e.PolyFillType.pftPositive:f=t.WindCnt2;break;case e.PolyFillType.pftNegative:f=-t.WindCnt2;break;default:f=Math.abs(t.WindCnt2)}switch(u){case e.PolyFillType.pftPositive:c=i.WindCnt2;break;case e.PolyFillType.pftNegative:c=-i.WindCnt2;break;default:c=Math.abs(i.WindCnt2)}if(t.PolyTyp!==i.PolyTyp)this.AddLocalMinPoly(t,i,n);else if(1===p&&1===d)switch(this.m_ClipType){case e.ClipType.ctIntersection:f>0&&c>0&&this.AddLocalMinPoly(t,i,n);break;case e.ClipType.ctUnion:f<=0&&c<=0&&this.AddLocalMinPoly(t,i,n);break;case e.ClipType.ctDifference:(t.PolyTyp===e.PolyType.ptClip&&f>0&&c>0||t.PolyTyp===e.PolyType.ptSubject&&f<=0&&c<=0)&&this.AddLocalMinPoly(t,i,n);break;case e.ClipType.ctXor:this.AddLocalMinPoly(t,i,n)}else e.Clipper.SwapSides(t,i)}}else{if(0===t.WindDelta&&0===i.WindDelta)return;t.PolyTyp===i.PolyTyp&&t.WindDelta!==i.WindDelta&&this.m_ClipType===e.ClipType.ctUnion?0===t.WindDelta?s&&(this.AddOutPt(t,n),r&&(t.OutIdx=-1)):r&&(this.AddOutPt(i,n),s&&(i.OutIdx=-1)):t.PolyTyp!==i.PolyTyp&&(0!==t.WindDelta||1!==Math.abs(i.WindCnt)||this.m_ClipType===e.ClipType.ctUnion&&0!==i.WindCnt2?0!==i.WindDelta||1!==Math.abs(t.WindCnt)||this.m_ClipType===e.ClipType.ctUnion&&0!==t.WindCnt2||(this.AddOutPt(i,n),s&&(i.OutIdx=-1)):(this.AddOutPt(t,n),r&&(t.OutIdx=-1)))}},e.Clipper.prototype.DeleteFromSEL=function(t){var e=t.PrevInSEL,i=t.NextInSEL;null===e&&null===i&&t!==this.m_SortedEdges||(null!==e?e.NextInSEL=i:this.m_SortedEdges=i,null!==i&&(i.PrevInSEL=e),t.NextInSEL=null,t.PrevInSEL=null)},e.Clipper.prototype.ProcessHorizontals=function(){for(var t={};this.PopEdgeFromSEL(t);)this.ProcessHorizontal(t.v)},e.Clipper.prototype.GetHorzDirection=function(t,i){t.Bot.X<t.Top.X?(i.Left=t.Bot.X,i.Right=t.Top.X,i.Dir=e.Direction.dLeftToRight):(i.Left=t.Top.X,i.Right=t.Bot.X,i.Dir=e.Direction.dRightToLeft)},e.Clipper.prototype.ProcessHorizontal=function(t){var i={Dir:null,Left:null,Right:null};this.GetHorzDirection(t,i);for(var n=i.Dir,r=i.Left,s=i.Right,o=0===t.WindDelta,a=t,l=null;null!==a.NextInLML&&e.ClipperBase.IsHorizontal(a.NextInLML);)a=a.NextInLML;null===a.NextInLML&&(l=this.GetMaximaPair(a));var h=this.m_Maxima;if(null!==h)if(n===e.Direction.dLeftToRight){for(;null!==h&&h.X<=t.Bot.X;)h=h.Next;null!==h&&h.X>=a.Top.X&&(h=null)}else{for(;null!==h.Next&&h.Next.X<t.Bot.X;)h=h.Next;h.X<=a.Top.X&&(h=null)}for(var u=null;;){for(var p=t===a,d=this.GetNextInAEL(t,n);null!==d;){if(null!==h)if(n===e.Direction.dLeftToRight)for(;null!==h&&h.X<d.Curr.X;)t.OutIdx>=0&&!o&&this.AddOutPt(t,new e.FPoint2(h.X,t.Bot.Y)),h=h.Next;else for(;null!==h&&h.X>d.Curr.X;)t.OutIdx>=0&&!o&&this.AddOutPt(t,new e.FPoint2(h.X,t.Bot.Y)),h=h.Prev;if(n===e.Direction.dLeftToRight&&d.Curr.X>s||n===e.Direction.dRightToLeft&&d.Curr.X<r)break;if(d.Curr.X===t.Top.X&&null!==t.NextInLML&&d.Dx<t.NextInLML.Dx)break;if(t.OutIdx>=0&&!o){e.use_xyz&&(n===e.Direction.dLeftToRight?this.SetZ(d.Curr,t,d):this.SetZ(d.Curr,d,t)),u=this.AddOutPt(t,d.Curr);for(var f=this.m_SortedEdges;null!==f;){if(f.OutIdx>=0&&this.HorzSegmentsOverlap(t.Bot.X,t.Top.X,f.Bot.X,f.Top.X)){var c=this.GetLastOutPt(f);this.AddJoin(c,u,f.Top)}f=f.NextInSEL}this.AddGhostJoin(u,t.Bot)}if(d===l&&p)return t.OutIdx>=0&&this.AddLocalMaxPoly(t,l,t.Top),this.DeleteFromAEL(t),void this.DeleteFromAEL(l);if(n===e.Direction.dLeftToRight){var y=new e.FPoint2(d.Curr.X,t.Curr.Y);this.IntersectEdges(t,d,y)}else{y=new e.FPoint2(d.Curr.X,t.Curr.Y);this.IntersectEdges(d,t,y)}var v=this.GetNextInAEL(d,n);this.SwapPositionsInAEL(t,d),d=v}if(null===t.NextInLML||!e.ClipperBase.IsHorizontal(t.NextInLML))break;(t=this.UpdateEdgeIntoAEL(t)).OutIdx>=0&&this.AddOutPt(t,t.Bot),i={Dir:n,Left:r,Right:s},this.GetHorzDirection(t,i),n=i.Dir,r=i.Left,s=i.Right}if(t.OutIdx>=0&&null===u){u=this.GetLastOutPt(t);for(f=this.m_SortedEdges;null!==f;){if(f.OutIdx>=0&&this.HorzSegmentsOverlap(t.Bot.X,t.Top.X,f.Bot.X,f.Top.X)){c=this.GetLastOutPt(f);this.AddJoin(c,u,f.Top)}f=f.NextInSEL}this.AddGhostJoin(u,t.Top)}if(null!==t.NextInLML)if(t.OutIdx>=0){if(u=this.AddOutPt(t,t.Top),0===(t=this.UpdateEdgeIntoAEL(t)).WindDelta)return;var x=t.PrevInAEL;v=t.NextInAEL;if(null!==x&&x.Curr.X===t.Bot.X&&x.Curr.Y===t.Bot.Y&&0===x.WindDelta&&x.OutIdx>=0&&x.Curr.Y>x.Top.Y&&e.ClipperBase.SlopesEqual3(t,x)){c=this.AddOutPt(x,t.Bot);this.AddJoin(u,c,t.Top)}else if(null!==v&&v.Curr.X===t.Bot.X&&v.Curr.Y===t.Bot.Y&&0!==v.WindDelta&&v.OutIdx>=0&&v.Curr.Y>v.Top.Y&&e.ClipperBase.SlopesEqual3(t,v)){c=this.AddOutPt(v,t.Bot);this.AddJoin(u,c,t.Top)}}else t=this.UpdateEdgeIntoAEL(t);else t.OutIdx>=0&&this.AddOutPt(t,t.Top),this.DeleteFromAEL(t)},e.Clipper.prototype.GetNextInAEL=function(t,i){return i===e.Direction.dLeftToRight?t.NextInAEL:t.PrevInAEL},e.Clipper.prototype.IsMinima=function(t){return null!==t&&t.Prev.NextInLML!==t&&t.Next.NextInLML!==t},e.Clipper.prototype.IsMaxima=function(t,e){return null!==t&&t.Top.Y===e&&null===t.NextInLML},e.Clipper.prototype.IsIntermediate=function(t,e){return t.Top.Y===e&&null!==t.NextInLML},e.Clipper.prototype.GetMaximaPair=function(t){return e.FPoint.op_Equality(t.Next.Top,t.Top)&&null===t.Next.NextInLML?t.Next:e.FPoint.op_Equality(t.Prev.Top,t.Top)&&null===t.Prev.NextInLML?t.Prev:null},e.Clipper.prototype.GetMaximaPairEx=function(t){var i=this.GetMaximaPair(t);return null===i||i.OutIdx===e.ClipperBase.Skip||i.NextInAEL===i.PrevInAEL&&!e.ClipperBase.IsHorizontal(i)?null:i},e.Clipper.prototype.ProcessIntersections=function(t){if(null===this.m_ActiveEdges)return!0;try{if(this.BuildIntersectList(t),0===this.m_IntersectList.length)return!0;if(1!==this.m_IntersectList.length&&!this.FixupIntersectionOrder())return!1;this.ProcessIntersectList()}catch(t){this.m_SortedEdges=null,this.m_IntersectList.length=0,e.Error("ProcessIntersections error")}return this.m_SortedEdges=null,!0},e.Clipper.prototype.BuildIntersectList=function(t){if(null!==this.m_ActiveEdges){var i=this.m_ActiveEdges;for(this.m_SortedEdges=i;null!==i;)i.PrevInSEL=i.PrevInAEL,i.NextInSEL=i.NextInAEL,i.Curr.X=e.Clipper.TopX(i,t),i=i.NextInAEL;for(var n=!0;n&&null!==this.m_SortedEdges;){for(n=!1,i=this.m_SortedEdges;null!==i.NextInSEL;){var r=i.NextInSEL,s=new e.FPoint0;if(i.Curr.X>r.Curr.X){this.IntersectPoint(i,r,s),s.Y<t&&(s=new e.FPoint2(e.Clipper.TopX(i,t),t));var o=new e.IntersectNode;o.Edge1=i,o.Edge2=r,o.Pt.X=s.X,o.Pt.Y=s.Y,e.use_xyz&&(o.Pt.Z=s.Z),this.m_IntersectList.push(o),this.SwapPositionsInSEL(i,r),n=!0}else i=r}if(null===i.PrevInSEL)break;i.PrevInSEL.NextInSEL=null}this.m_SortedEdges=null}},e.Clipper.prototype.EdgesAdjacent=function(t){return t.Edge1.NextInSEL===t.Edge2||t.Edge1.PrevInSEL===t.Edge2},e.Clipper.IntersectNodeSort=function(t,e){return e.Pt.Y-t.Pt.Y},e.Clipper.prototype.FixupIntersectionOrder=function(){this.m_IntersectList.sort(this.m_IntersectNodeComparer),this.CopyAELToSEL();for(var t=this.m_IntersectList.length,e=0;e<t;e++){if(!this.EdgesAdjacent(this.m_IntersectList[e])){for(var i=e+1;i<t&&!this.EdgesAdjacent(this.m_IntersectList[i]);)i++;if(i===t)return!1;var n=this.m_IntersectList[e];this.m_IntersectList[e]=this.m_IntersectList[i],this.m_IntersectList[i]=n}this.SwapPositionsInSEL(this.m_IntersectList[e].Edge1,this.m_IntersectList[e].Edge2)}return!0},e.Clipper.prototype.ProcessIntersectList=function(){for(var t=0,e=this.m_IntersectList.length;t<e;t++){var i=this.m_IntersectList[t];this.IntersectEdges(i.Edge1,i.Edge2,i.Pt),this.SwapPositionsInAEL(i.Edge1,i.Edge2)}this.m_IntersectList.length=0},e.Clipper.TopX=function(t,e){return e===t.Top.Y?t.Top.X:t.Bot.X+t.Dx*(e-t.Bot.Y)},e.Clipper.prototype.IntersectPoint=function(t,i,n){var r,s;if(n.X=0,n.Y=0,t.Dx===i.Dx)return n.Y=t.Curr.Y,void(n.X=e.Clipper.TopX(t,n.Y));if(0===t.Delta.X)n.X=t.Bot.X,e.ClipperBase.IsHorizontal(i)?n.Y=i.Bot.Y:(s=i.Bot.Y-i.Bot.X/i.Dx,n.Y=n.X/i.Dx+s);else if(0===i.Delta.X)n.X=i.Bot.X,e.ClipperBase.IsHorizontal(t)?n.Y=t.Bot.Y:(r=t.Bot.Y-t.Bot.X/t.Dx,n.Y=n.X/t.Dx+r);else{r=t.Bot.X-t.Bot.Y*t.Dx;var o=((s=i.Bot.X-i.Bot.Y*i.Dx)-r)/(t.Dx-i.Dx);n.Y=o,Math.abs(t.Dx)<Math.abs(i.Dx)?n.X=t.Dx*o+r:n.X=i.Dx*o+s}if(n.Y<t.Top.Y||n.Y<i.Top.Y){if(t.Top.Y>i.Top.Y)return n.Y=t.Top.Y,n.X=e.Clipper.TopX(i,t.Top.Y),n.X<t.Top.X;n.Y=i.Top.Y,Math.abs(t.Dx)<Math.abs(i.Dx)?n.X=e.Clipper.TopX(t,n.Y):n.X=e.Clipper.TopX(i,n.Y)}n.Y>t.Curr.Y&&(n.Y=t.Curr.Y,Math.abs(t.Dx)>Math.abs(i.Dx)?n.X=e.Clipper.TopX(i,n.Y):n.X=e.Clipper.TopX(t,n.Y))},e.Clipper.prototype.ProcessEdgesAtTopOfScanbeam=function(t){for(var i=this.m_ActiveEdges;null!==i;){var n=this.IsMaxima(i,t);if(n){var r=this.GetMaximaPairEx(i);n=null===r||!e.ClipperBase.IsHorizontal(r)}if(n){this.StrictlySimple&&this.InsertMaxima(i.Top.X);var s=i.PrevInAEL;this.DoMaxima(i),i=null===s?this.m_ActiveEdges:s.NextInAEL}else{if(this.IsIntermediate(i,t)&&e.ClipperBase.IsHorizontal(i.NextInLML)?((i=this.UpdateEdgeIntoAEL(i)).OutIdx>=0&&this.AddOutPt(i,i.Bot),this.AddEdgeToSEL(i)):(i.Curr.X=e.Clipper.TopX(i,t),i.Curr.Y=t),e.use_xyz&&(i.Top.Y===t?i.Curr.Z=i.Top.Z:i.Bot.Y===t?i.Curr.Z=i.Bot.Z:i.Curr.Z=0),this.StrictlySimple){s=i.PrevInAEL;if(i.OutIdx>=0&&0!==i.WindDelta&&null!==s&&s.OutIdx>=0&&s.Curr.X===i.Curr.X&&0!==s.WindDelta){var o=new e.FPoint1(i.Curr);e.use_xyz&&this.SetZ(o,s,i);var a=this.AddOutPt(s,o),l=this.AddOutPt(i,o);this.AddJoin(a,l,o)}}i=i.NextInAEL}}for(this.ProcessHorizontals(),this.m_Maxima=null,i=this.m_ActiveEdges;null!==i;){if(this.IsIntermediate(i,t)){a=null;i.OutIdx>=0&&(a=this.AddOutPt(i,i.Top));s=(i=this.UpdateEdgeIntoAEL(i)).PrevInAEL;var h=i.NextInAEL;if(null!==s&&s.Curr.X===i.Bot.X&&s.Curr.Y===i.Bot.Y&&null!==a&&s.OutIdx>=0&&s.Curr.Y===s.Top.Y&&e.ClipperBase.SlopesEqual5(i.Curr,i.Top,s.Curr,s.Top)&&0!==i.WindDelta&&0!==s.WindDelta){l=this.AddOutPt(ePrev2,i.Bot);this.AddJoin(a,l,i.Top)}else if(null!==h&&h.Curr.X===i.Bot.X&&h.Curr.Y===i.Bot.Y&&null!==a&&h.OutIdx>=0&&h.Curr.Y===h.Top.Y&&e.ClipperBase.SlopesEqual5(i.Curr,i.Top,h.Curr,h.Top)&&0!==i.WindDelta&&0!==h.WindDelta){l=this.AddOutPt(h,i.Bot);this.AddJoin(a,l,i.Top)}}i=i.NextInAEL}},e.Clipper.prototype.DoMaxima=function(t){var i=this.GetMaximaPairEx(t);if(null===i)return t.OutIdx>=0&&this.AddOutPt(t,t.Top),void this.DeleteFromAEL(t);for(var n=t.NextInAEL;null!==n&&n!==i;)this.IntersectEdges(t,n,t.Top),this.SwapPositionsInAEL(t,n),n=t.NextInAEL;-1===t.OutIdx&&-1===i.OutIdx?(this.DeleteFromAEL(t),this.DeleteFromAEL(i)):t.OutIdx>=0&&i.OutIdx>=0?(t.OutIdx>=0&&this.AddLocalMaxPoly(t,i,t.Top),this.DeleteFromAEL(t),this.DeleteFromAEL(i)):e.use_lines&&0===t.WindDelta?(t.OutIdx>=0&&(this.AddOutPt(t,t.Top),t.OutIdx=e.ClipperBase.Unassigned),this.DeleteFromAEL(t),i.OutIdx>=0&&(this.AddOutPt(i,t.Top),i.OutIdx=e.ClipperBase.Unassigned),this.DeleteFromAEL(i)):e.Error("DoMaxima error")},e.Clipper.ReversePaths=function(t){for(var e=0,i=t.length;e<i;e++)t[e].reverse()},e.Clipper.Orientation=function(t){return e.Clipper.Area(t)>=0},e.Clipper.prototype.PointCount=function(t){if(null===t)return 0;var e=0,i=t;do{e++,i=i.Next}while(i!==t);return e},e.Clipper.prototype.BuildResult=function(t){e.Clear(t);for(var i=0,n=this.m_PolyOuts.length;i<n;i++){var r=this.m_PolyOuts[i];if(null!==r.Pts){var s=r.Pts.Prev,o=this.PointCount(s);if(!(o<2)){for(var a=new Array(o),l=0;l<o;l++)a[l]=s.Pt,s=s.Prev;t.push(a)}}}},e.Clipper.prototype.BuildResult2=function(t){t.Clear();for(var i=0,n=this.m_PolyOuts.length;i<n;i++){var r=this.m_PolyOuts[i],s=this.PointCount(r.Pts);if(!(r.IsOpen&&s<2||!r.IsOpen&&s<3)){this.FixHoleLinkage(r);var o=new e.PolyNode;t.m_AllPolys.push(o),r.PolyNode=o,o.m_polygon.length=s;for(var a=r.Pts.Prev,l=0;l<s;l++)o.m_polygon[l]=a.Pt,a=a.Prev}}for(i=0,n=this.m_PolyOuts.length;i<n;i++){null!==(r=this.m_PolyOuts[i]).PolyNode&&(r.IsOpen?(r.PolyNode.IsOpen=!0,t.AddChild(r.PolyNode)):null!==r.FirstLeft&&null!==r.FirstLeft.PolyNode?r.FirstLeft.PolyNode.AddChild(r.PolyNode):t.AddChild(r.PolyNode))}},e.Clipper.prototype.FixupOutPolyline=function(t){for(var i=t.Pts,n=i.Prev;i!==n;)if(i=i.Next,e.FPoint.op_Equality(i.Pt,i.Prev.Pt)){i===n&&(n=i.Prev);var r=i.Prev;r.Next=i.Next,i.Next.Prev=r,i=r}i===i.Prev&&(t.Pts=null)},e.Clipper.prototype.FixupOutPolygon=function(t){var i=null;t.BottomPt=null;for(var n=t.Pts,r=this.PreserveCollinear||this.StrictlySimple;;){if(n.Prev===n||n.Prev===n.Next)return void(t.Pts=null);if(e.FPoint.op_Equality(n.Pt,n.Next.Pt)||e.FPoint.op_Equality(n.Pt,n.Prev.Pt)||e.ClipperBase.SlopesEqual4(n.Prev.Pt,n.Pt,n.Next.Pt)&&(!r||!this.Pt2IsBetweenPt1AndPt3(n.Prev.Pt,n.Pt,n.Next.Pt)))i=null,n.Prev.Next=n.Next,n.Next.Prev=n.Prev,n=n.Prev;else{if(n===i)break;null===i&&(i=n),n=n.Next}}t.Pts=n},e.Clipper.prototype.DupOutPt=function(t,i){var n=new e.OutPt;return n.Pt.X=t.Pt.X,n.Pt.Y=t.Pt.Y,e.use_xyz&&(n.Pt.Z=t.Pt.Z),n.Idx=t.Idx,i?(n.Next=t.Next,n.Prev=t,t.Next.Prev=n,t.Next=n):(n.Prev=t.Prev,n.Next=t,t.Prev.Next=n,t.Prev=n),n},e.Clipper.prototype.GetOverlap=function(t,e,i,n,r){return t<e?i<n?(r.Left=Math.max(t,i),r.Right=Math.min(e,n)):(r.Left=Math.max(t,n),r.Right=Math.min(e,i)):i<n?(r.Left=Math.max(e,i),r.Right=Math.min(t,n)):(r.Left=Math.max(e,n),r.Right=Math.min(t,i)),r.Left<r.Right},e.Clipper.prototype.JoinHorz=function(t,i,n,r,s,o){var a=t.Pt.X>i.Pt.X?e.Direction.dRightToLeft:e.Direction.dLeftToRight,l=n.Pt.X>r.Pt.X?e.Direction.dRightToLeft:e.Direction.dLeftToRight;if(a===l)return!1;if(a===e.Direction.dLeftToRight){for(;t.Next.Pt.X<=s.X&&t.Next.Pt.X>=t.Pt.X&&t.Next.Pt.Y===s.Y;)t=t.Next;o&&t.Pt.X!==s.X&&(t=t.Next),i=this.DupOutPt(t,!o),e.FPoint.op_Inequality(i.Pt,s)&&((t=i).Pt.X=s.X,t.Pt.Y=s.Y,e.use_xyz&&(t.Pt.Z=s.Z),i=this.DupOutPt(t,!o))}else{for(;t.Next.Pt.X>=s.X&&t.Next.Pt.X<=t.Pt.X&&t.Next.Pt.Y===s.Y;)t=t.Next;o||t.Pt.X===s.X||(t=t.Next),i=this.DupOutPt(t,o),e.FPoint.op_Inequality(i.Pt,s)&&((t=i).Pt.X=s.X,t.Pt.Y=s.Y,e.use_xyz&&(t.Pt.Z=s.Z),i=this.DupOutPt(t,o))}if(l===e.Direction.dLeftToRight){for(;n.Next.Pt.X<=s.X&&n.Next.Pt.X>=n.Pt.X&&n.Next.Pt.Y===s.Y;)n=n.Next;o&&n.Pt.X!==s.X&&(n=n.Next),r=this.DupOutPt(n,!o),e.FPoint.op_Inequality(r.Pt,s)&&((n=r).Pt.X=s.X,n.Pt.Y=s.Y,e.use_xyz&&(n.Pt.Z=s.Z),r=this.DupOutPt(n,!o))}else{for(;n.Next.Pt.X>=s.X&&n.Next.Pt.X<=n.Pt.X&&n.Next.Pt.Y===s.Y;)n=n.Next;o||n.Pt.X===s.X||(n=n.Next),r=this.DupOutPt(n,o),e.FPoint.op_Inequality(r.Pt,s)&&((n=r).Pt.X=s.X,n.Pt.Y=s.Y,e.use_xyz&&(n.Pt.Z=s.Z),r=this.DupOutPt(n,o))}return a===e.Direction.dLeftToRight===o?(t.Prev=n,n.Next=t,i.Next=r,r.Prev=i):(t.Next=n,n.Prev=t,i.Prev=r,r.Next=i),!0},e.Clipper.prototype.JoinPoints=function(t,i,n){var r=t.OutPt1,s=new e.OutPt,o=t.OutPt2,a=new e.OutPt,l=t.OutPt1.Pt.Y===t.OffPt.Y;if(l&&e.FPoint.op_Equality(t.OffPt,t.OutPt1.Pt)&&e.FPoint.op_Equality(t.OffPt,t.OutPt2.Pt)){if(i!==n)return!1;for(s=t.OutPt1.Next;s!==r&&e.FPoint.op_Equality(s.Pt,t.OffPt);)s=s.Next;var h=s.Pt.Y>t.OffPt.Y;for(a=t.OutPt2.Next;a!==o&&e.FPoint.op_Equality(a.Pt,t.OffPt);)a=a.Next;return h!==a.Pt.Y>t.OffPt.Y&&(h?(s=this.DupOutPt(r,!1),a=this.DupOutPt(o,!0),r.Prev=o,o.Next=r,s.Next=a,a.Prev=s,t.OutPt1=r,t.OutPt2=s,!0):(s=this.DupOutPt(r,!0),a=this.DupOutPt(o,!1),r.Next=o,o.Prev=r,s.Prev=a,a.Next=s,t.OutPt1=r,t.OutPt2=s,!0))}if(l){for(s=r;r.Prev.Pt.Y===r.Pt.Y&&r.Prev!==s&&r.Prev!==o;)r=r.Prev;for(;s.Next.Pt.Y===s.Pt.Y&&s.Next!==r&&s.Next!==o;)s=s.Next;if(s.Next===r||s.Next===o)return!1;for(a=o;o.Prev.Pt.Y===o.Pt.Y&&o.Prev!==a&&o.Prev!==s;)o=o.Prev;for(;a.Next.Pt.Y===a.Pt.Y&&a.Next!==o&&a.Next!==r;)a=a.Next;if(a.Next===o||a.Next===r)return!1;var u={Left:null,Right:null};if(!this.GetOverlap(r.Pt.X,s.Pt.X,o.Pt.X,a.Pt.X,u))return!1;var p,d=u.Left,f=u.Right,c=new e.FPoint0;return r.Pt.X>=d&&r.Pt.X<=f?(c.X=r.Pt.X,c.Y=r.Pt.Y,e.use_xyz&&(c.Z=r.Pt.Z),p=r.Pt.X>s.Pt.X):o.Pt.X>=d&&o.Pt.X<=f?(c.X=o.Pt.X,c.Y=o.Pt.Y,e.use_xyz&&(c.Z=o.Pt.Z),p=o.Pt.X>a.Pt.X):s.Pt.X>=d&&s.Pt.X<=f?(c.X=s.Pt.X,c.Y=s.Pt.Y,e.use_xyz&&(c.Z=s.Pt.Z),p=s.Pt.X>r.Pt.X):(c.X=a.Pt.X,c.Y=a.Pt.Y,e.use_xyz&&(c.Z=a.Pt.Z),p=a.Pt.X>o.Pt.X),t.OutPt1=r,t.OutPt2=o,this.JoinHorz(r,s,o,a,c,p)}for(s=r.Next;e.FPoint.op_Equality(s.Pt,r.Pt)&&s!==r;)s=s.Next;var y=s.Pt.Y>r.Pt.Y||!e.ClipperBase.SlopesEqual4(r.Pt,s.Pt,t.OffPt);if(y){for(s=r.Prev;e.FPoint.op_Equality(s.Pt,r.Pt)&&s!==r;)s=s.Prev;if(s.Pt.Y>r.Pt.Y||!e.ClipperBase.SlopesEqual4(r.Pt,s.Pt,t.OffPt))return!1}for(a=o.Next;e.FPoint.op_Equality(a.Pt,o.Pt)&&a!==o;)a=a.Next;var v=a.Pt.Y>o.Pt.Y||!e.ClipperBase.SlopesEqual4(o.Pt,a.Pt,t.OffPt);if(v){for(a=o.Prev;e.FPoint.op_Equality(a.Pt,o.Pt)&&a!==o;)a=a.Prev;if(a.Pt.Y>o.Pt.Y||!e.ClipperBase.SlopesEqual4(o.Pt,a.Pt,t.OffPt))return!1}return s!==r&&a!==o&&s!==a&&(i!==n||y!==v)&&(y?(s=this.DupOutPt(r,!1),a=this.DupOutPt(o,!0),r.Prev=o,o.Next=r,s.Next=a,a.Prev=s,t.OutPt1=r,t.OutPt2=s,!0):(s=this.DupOutPt(r,!0),a=this.DupOutPt(o,!1),r.Next=o,o.Prev=r,s.Prev=a,a.Next=s,t.OutPt1=r,t.OutPt2=s,!0))},e.Clipper.GetBounds=function(t){for(var i=0,n=t.length;i<n&&0===t[i].length;)i++;if(i===n)return new e.FRect(0,0,0,0);var r=new e.FRect;for(r.left=t[i][0].X,r.right=r.left,r.top=t[i][0].Y,r.bottom=r.top;i<n;i++)for(var s=0,o=t[i].length;s<o;s++)t[i][s].X<r.left?r.left=t[i][s].X:t[i][s].X>r.right&&(r.right=t[i][s].X),t[i][s].Y<r.top?r.top=t[i][s].Y:t[i][s].Y>r.bottom&&(r.bottom=t[i][s].Y);return r},e.Clipper.prototype.GetBounds2=function(t){var i=t,n=new e.FRect;for(n.left=t.Pt.X,n.right=t.Pt.X,n.top=t.Pt.Y,n.bottom=t.Pt.Y,t=t.Next;t!==i;)t.Pt.X<n.left&&(n.left=t.Pt.X),t.Pt.X>n.right&&(n.right=t.Pt.X),t.Pt.Y<n.top&&(n.top=t.Pt.Y),t.Pt.Y>n.bottom&&(n.bottom=t.Pt.Y),t=t.Next;return n},e.Clipper.PointInPolygon=function(t,e){var i=0,n=e.length;if(n<3)return 0;for(var r=e[0],s=1;s<=n;++s){var o=s===n?e[0]:e[s];if(o.Y===t.Y&&(o.X===t.X||r.Y===t.Y&&o.X>t.X==r.X<t.X))return-1;if(r.Y<t.Y!=o.Y<t.Y)if(r.X>=t.X)if(o.X>t.X)i=1-i;else{if(0===(a=(r.X-t.X)*(o.Y-t.Y)-(o.X-t.X)*(r.Y-t.Y)))return-1;a>0==o.Y>r.Y&&(i=1-i)}else if(o.X>t.X){var a;if(0===(a=(r.X-t.X)*(o.Y-t.Y)-(o.X-t.X)*(r.Y-t.Y)))return-1;a>0==o.Y>r.Y&&(i=1-i)}r=o}return i},e.Clipper.prototype.PointInPolygon=function(t,e){var i=0,n=e,r=t.X,s=t.Y,o=e.Pt.X,a=e.Pt.Y;do{var l=(e=e.Next).Pt.X,h=e.Pt.Y;if(h===s&&(l===r||a===s&&l>r==o<r))return-1;if(a<s!=h<s)if(o>=r)if(l>r)i=1-i;else{if(0===(u=(o-r)*(h-s)-(l-r)*(a-s)))return-1;u>0==h>a&&(i=1-i)}else if(l>r){var u;if(0===(u=(o-r)*(h-s)-(l-r)*(a-s)))return-1;u>0==h>a&&(i=1-i)}o=l,a=h}while(n!==e);return i},e.Clipper.prototype.Poly2ContainsPoly1=function(t,e){var i=t;do{var n=this.PointInPolygon(i.Pt,e);if(n>=0)return n>0;i=i.Next}while(i!==t);return!0},e.Clipper.prototype.FixupFirstLefts1=function(t,i){for(var n,r,s=0,o=this.m_PolyOuts.length;s<o;s++)n=this.m_PolyOuts[s],r=e.Clipper.ParseFirstLeft(n.FirstLeft),null!==n.Pts&&r===t&&this.Poly2ContainsPoly1(n.Pts,i.Pts)&&(n.FirstLeft=i)},e.Clipper.prototype.FixupFirstLefts2=function(t,i){for(var n,r,s=i.FirstLeft,o=0,a=this.m_PolyOuts.length;o<a;o++)null!==(n=this.m_PolyOuts[o]).Pts&&n!==i&&n!==t&&((r=e.Clipper.ParseFirstLeft(n.FirstLeft))!==s&&r!==t&&r!==i||(this.Poly2ContainsPoly1(n.Pts,t.Pts)?n.FirstLeft=t:this.Poly2ContainsPoly1(n.Pts,i.Pts)?n.FirstLeft=i:n.FirstLeft!==t&&n.FirstLeft!==i||(n.FirstLeft=s)))},e.Clipper.prototype.FixupFirstLefts3=function(t,i){for(var n,r,s=0,o=this.m_PolyOuts.length;s<o;s++)n=this.m_PolyOuts[s],r=e.Clipper.ParseFirstLeft(n.FirstLeft),null!==n.Pts&&r===t&&(n.FirstLeft=i)},e.Clipper.ParseFirstLeft=function(t){for(;null!==t&&null===t.Pts;)t=t.FirstLeft;return t},e.Clipper.prototype.JoinCommonEdges=function(){for(var t=0,e=this.m_Joins.length;t<e;t++){var i,n=this.m_Joins[t],r=this.GetOutRec(n.OutPt1.Idx),s=this.GetOutRec(n.OutPt2.Idx);if(null!==r.Pts&&null!==s.Pts)if(!r.IsOpen&&!s.IsOpen)i=r===s?r:this.OutRec1RightOfOutRec2(r,s)?s:this.OutRec1RightOfOutRec2(s,r)?r:this.GetLowermostRec(r,s),this.JoinPoints(n,r,s)&&(r===s?(r.Pts=n.OutPt1,r.BottomPt=null,(s=this.CreateOutRec()).Pts=n.OutPt2,this.UpdateOutPtIdxs(s),this.Poly2ContainsPoly1(s.Pts,r.Pts)?(s.IsHole=!r.IsHole,s.FirstLeft=r,this.m_UsingPolyTree&&this.FixupFirstLefts2(s,r),(s.IsHole^this.ReverseSolution)==this.Area$1(s)>0&&this.ReversePolyPtLinks(s.Pts)):this.Poly2ContainsPoly1(r.Pts,s.Pts)?(s.IsHole=r.IsHole,r.IsHole=!s.IsHole,s.FirstLeft=r.FirstLeft,r.FirstLeft=s,this.m_UsingPolyTree&&this.FixupFirstLefts2(r,s),(r.IsHole^this.ReverseSolution)==this.Area$1(r)>0&&this.ReversePolyPtLinks(r.Pts)):(s.IsHole=r.IsHole,s.FirstLeft=r.FirstLeft,this.m_UsingPolyTree&&this.FixupFirstLefts1(r,s))):(s.Pts=null,s.BottomPt=null,s.Idx=r.Idx,r.IsHole=i.IsHole,i===s&&(r.FirstLeft=s.FirstLeft),s.FirstLeft=r,this.m_UsingPolyTree&&this.FixupFirstLefts3(s,r)))}},e.Clipper.prototype.UpdateOutPtIdxs=function(t){var e=t.Pts;do{e.Idx=t.Idx,e=e.Prev}while(e!==t.Pts)},e.Clipper.prototype.DoSimplePolygons=function(){for(var t=0;t<this.m_PolyOuts.length;){var i=this.m_PolyOuts[t++],n=i.Pts;if(null!==n&&!i.IsOpen)do{for(var r=n.Next;r!==i.Pts;){if(e.FPoint.op_Equality(n.Pt,r.Pt)&&r.Next!==n&&r.Prev!==n){var s=n.Prev,o=r.Prev;n.Prev=o,o.Next=n,r.Prev=s,s.Next=r,i.Pts=n;var a=this.CreateOutRec();a.Pts=r,this.UpdateOutPtIdxs(a),this.Poly2ContainsPoly1(a.Pts,i.Pts)?(a.IsHole=!i.IsHole,a.FirstLeft=i,this.m_UsingPolyTree&&this.FixupFirstLefts2(a,i)):this.Poly2ContainsPoly1(i.Pts,a.Pts)?(a.IsHole=i.IsHole,i.IsHole=!a.IsHole,a.FirstLeft=i.FirstLeft,i.FirstLeft=a,this.m_UsingPolyTree&&this.FixupFirstLefts2(i,a)):(a.IsHole=i.IsHole,a.FirstLeft=i.FirstLeft,this.m_UsingPolyTree&&this.FixupFirstLefts1(i,a)),r=n}r=r.Next}n=n.Next}while(n!==i.Pts)}},e.Clipper.Area=function(t){if(!Array.isArray(t))return 0;var e=t.length;if(e<3)return 0;for(var i=0,n=0,r=e-1;n<e;++n)i+=(t[r].X+t[n].X)*(t[r].Y-t[n].Y),r=n;return.5*-i},e.Clipper.prototype.Area=function(t){var e=t;if(null===t)return 0;var i=0;do{i+=(t.Prev.Pt.X+t.Pt.X)*(t.Prev.Pt.Y-t.Pt.Y),t=t.Next}while(t!==e);return.5*i},e.Clipper.prototype.Area$1=function(t){return this.Area(t.Pts)},e.Clipper.SimplifyPolygon=function(t,i){var n=new Array,r=new e.Clipper(0);return r.StrictlySimple=!0,r.AddPath(t,e.PolyType.ptSubject,!0),r.Execute(e.ClipType.ctUnion,n,i,i),n},e.Clipper.SimplifyPolygons=function(t,i){void 0===i&&(i=e.PolyFillType.pftEvenOdd);var n=new Array,r=new e.Clipper(0);return r.StrictlySimple=!0,r.AddPaths(t,e.PolyType.ptSubject,!0),r.Execute(e.ClipType.ctUnion,n,i,i),n},e.Clipper.DistanceSqrd=function(t,e){var i=t.X-e.X,n=t.Y-e.Y;return i*i+n*n},e.Clipper.DistanceFromLineSqrd=function(t,e,i){var n=e.Y-i.Y,r=i.X-e.X,s=n*e.X+r*e.Y;return(s=n*t.X+r*t.Y-s)*s/(n*n+r*r)},e.Clipper.SlopesNearCollinear=function(t,i,n,r){return Math.abs(t.X-i.X)>Math.abs(t.Y-i.Y)?t.X>i.X==t.X<n.X?e.Clipper.DistanceFromLineSqrd(t,i,n)<r:i.X>t.X==i.X<n.X?e.Clipper.DistanceFromLineSqrd(i,t,n)<r:e.Clipper.DistanceFromLineSqrd(n,t,i)<r:t.Y>i.Y==t.Y<n.Y?e.Clipper.DistanceFromLineSqrd(t,i,n)<r:i.Y>t.Y==i.Y<n.Y?e.Clipper.DistanceFromLineSqrd(i,t,n)<r:e.Clipper.DistanceFromLineSqrd(n,t,i)<r},e.Clipper.PointsAreClose=function(t,e,i){var n=t.X-e.X,r=t.Y-e.Y;return n*n+r*r<=i},e.Clipper.ExcludeOp=function(t){var e=t.Prev;return e.Next=t.Next,t.Next.Prev=e,e.Idx=0,e},e.Clipper.CleanPolygon=function(t,i){void 0===i&&(i=1.415);var n=t.length;if(0===n)return new Array;for(var r=new Array(n),s=0;s<n;++s)r[s]=new e.OutPt;for(s=0;s<n;++s)r[s].Pt=t[s],r[s].Next=r[(s+1)%n],r[s].Next.Prev=r[s],r[s].Idx=0;for(var o=i*i,a=r[0];0===a.Idx&&a.Next!==a.Prev;)e.Clipper.PointsAreClose(a.Pt,a.Prev.Pt,o)?(a=e.Clipper.ExcludeOp(a),n--):e.Clipper.PointsAreClose(a.Prev.Pt,a.Next.Pt,o)?(e.Clipper.ExcludeOp(a.Next),a=e.Clipper.ExcludeOp(a),n-=2):e.Clipper.SlopesNearCollinear(a.Prev.Pt,a.Pt,a.Next.Pt,o)?(a=e.Clipper.ExcludeOp(a),n--):(a.Idx=1,a=a.Next);n<3&&(n=0);var l=new Array(n);for(s=0;s<n;++s)l[s]=new e.FPoint1(a.Pt),a=a.Next;return r=null,l},e.Clipper.CleanPolygons=function(t,i){for(var n=new Array(t.length),r=0,s=t.length;r<s;r++)n[r]=e.Clipper.CleanPolygon(t[r],i);return n},e.Clipper.Minkowski=function(t,i,n,r){var s=r?1:0,o=t.length,a=i.length,l=new Array;if(n)for(var h=0;h<a;h++){for(var u=new Array(o),p=0,d=t.length,f=t[p];p<d;f=t[++p])u[p]=new e.FPoint2(i[h].X+f.X,i[h].Y+f.Y);l.push(u)}else for(h=0;h<a;h++){for(u=new Array(o),p=0,d=t.length,f=t[p];p<d;f=t[++p])u[p]=new e.FPoint2(i[h].X-f.X,i[h].Y-f.Y);l.push(u)}var c=new Array;for(h=0;h<a-1+s;h++)for(p=0;p<o;p++){var y=new Array;y.push(l[h%a][p%o]),y.push(l[(h+1)%a][p%o]),y.push(l[(h+1)%a][(p+1)%o]),y.push(l[h%a][(p+1)%o]),e.Clipper.Orientation(y)||y.reverse(),c.push(y)}return c},e.Clipper.MinkowskiSum=function(t,i,n){if(i[0]instanceof Array){h=i;for(var r=new e.Paths,s=(a=new e.Clipper,0);s<h.length;++s){var o=e.Clipper.Minkowski(t,h[s],!0,n);if(a.AddPaths(o,e.PolyType.ptSubject,!0),n){l=e.Clipper.TranslatePath(h[s],t[0]);a.AddPath(l,e.PolyType.ptClip,!0)}}return a.Execute(e.ClipType.ctUnion,r,e.PolyFillType.pftNonZero,e.PolyFillType.pftNonZero),r}var a,l=i,h=e.Clipper.Minkowski(t,l,!0,n);return(a=new e.Clipper).AddPaths(h,e.PolyType.ptSubject,!0),a.Execute(e.ClipType.ctUnion,h,e.PolyFillType.pftNonZero,e.PolyFillType.pftNonZero),h},e.Clipper.TranslatePath=function(t,i){for(var n=new e.Path,r=0;r<t.length;r++)n.push(new e.FPoint2(t[r].X+i.X,t[r].Y+i.Y));return n},e.Clipper.MinkowskiDiff=function(t,i){var n=e.Clipper.Minkowski(t,i,!1,!0),r=new e.Clipper;return r.AddPaths(n,e.PolyType.ptSubject,!0),r.Execute(e.ClipType.ctUnion,n,e.PolyFillType.pftNonZero,e.PolyFillType.pftNonZero),n},e.Clipper.PolyTreeToPaths=function(t){var i=new Array;return e.Clipper.AddPolyNodeToPaths(t,e.Clipper.NodeType.ntAny,i),i},e.Clipper.AddPolyNodeToPaths=function(t,i,n){var r=!0;switch(i){case e.Clipper.NodeType.ntOpen:return;case e.Clipper.NodeType.ntClosed:r=!t.IsOpen}t.m_polygon.length>0&&r&&n.push(t.m_polygon);for(var s=0,o=t.Childs(),a=o.length,l=o[s];s<a;l=o[++s])e.Clipper.AddPolyNodeToPaths(l,i,n)},e.Clipper.OpenPathsFromPolyTree=function(t){for(var i=new e.Paths,n=0,r=t.ChildCount();n<r;n++)t.Childs()[n].IsOpen&&i.push(t.Childs()[n].m_polygon);return i},e.Clipper.ClosedPathsFromPolyTree=function(t){var i=new e.Paths;return e.Clipper.AddPolyNodeToPaths(t,e.Clipper.NodeType.ntClosed,i),i},s(e.Clipper,e.ClipperBase),e.Clipper.NodeType={ntAny:0,ntOpen:1,ntClosed:2},e.ClipperOffset=function(t,i){void 0===t&&(t=2),void 0===i&&(i=e.ClipperOffset.def_arc_tolerance),this.m_destPolys=new e.Paths,this.m_srcPoly=new e.Path,this.m_destPoly=new e.Path,this.m_normals=new Array,this.m_delta=0,this.m_sinA=0,this.m_sin=0,this.m_cos=0,this.m_miterLim=0,this.m_StepsPerRad=0,this.m_lowest=new e.FPoint0,this.m_polyNodes=new e.PolyNode,this.MiterLimit=t,this.ArcTolerance=i,this.m_lowest.X=-1},e.ClipperOffset.two_pi=6.28318530717959,e.ClipperOffset.def_arc_tolerance=.25,e.ClipperOffset.prototype.Clear=function(){e.Clear(this.m_polyNodes.Childs()),this.m_lowest.X=-1},e.ClipperOffset.prototype.AddPath=function(t,i,n){var r=t.length-1;if(!(r<0)){var s=new e.PolyNode;if(s.m_jointype=i,s.m_endtype=n,n===e.EndType.etClosedLine||n===e.EndType.etClosedPolygon)for(;r>0&&e.FPoint.op_Equality(t[0],t[r]);)r--;s.m_polygon.push(t[0]);for(var o=0,a=0,l=1;l<=r;l++)e.FPoint.op_Inequality(s.m_polygon[o],t[l])&&(o++,s.m_polygon.push(t[l]),(t[l].Y>s.m_polygon[a].Y||t[l].Y===s.m_polygon[a].Y&&t[l].X<s.m_polygon[a].X)&&(a=o));if(!(n===e.EndType.etClosedPolygon&&o<2)&&(this.m_polyNodes.AddChild(s),n===e.EndType.etClosedPolygon))if(this.m_lowest.X<0)this.m_lowest=new e.FPoint2(this.m_polyNodes.ChildCount()-1,a);else{var h=this.m_polyNodes.Childs()[this.m_lowest.X].m_polygon[this.m_lowest.Y];(s.m_polygon[a].Y>h.Y||s.m_polygon[a].Y===h.Y&&s.m_polygon[a].X<h.X)&&(this.m_lowest=new e.FPoint2(this.m_polyNodes.ChildCount()-1,a))}}},e.ClipperOffset.prototype.AddPaths=function(t,e,i){for(var n=0,r=t.length;n<r;n++)this.AddPath(t[n],e,i)},e.ClipperOffset.prototype.FixOrientations=function(){if(this.m_lowest.X>=0&&!e.Clipper.Orientation(this.m_polyNodes.Childs()[this.m_lowest.X].m_polygon))for(var t=0;t<this.m_polyNodes.ChildCount();t++){((i=this.m_polyNodes.Childs()[t]).m_endtype===e.EndType.etClosedPolygon||i.m_endtype===e.EndType.etClosedLine&&e.Clipper.Orientation(i.m_polygon))&&i.m_polygon.reverse()}else for(t=0;t<this.m_polyNodes.ChildCount();t++){var i;(i=this.m_polyNodes.Childs()[t]).m_endtype!==e.EndType.etClosedLine||e.Clipper.Orientation(i.m_polygon)||i.m_polygon.reverse()}},e.ClipperOffset.GetUnitNormal=function(t,i){var n=i.X-t.X,r=i.Y-t.Y;if(0===n&&0===r)return new e.FPoint2(0,0);var s=1/Math.sqrt(n*n+r*r);return n*=s,r*=s,new e.FPoint2(r,-n)},e.ClipperOffset.prototype.DoOffset=function(t){if(this.m_destPolys=new Array,this.m_delta=t,e.ClipperBase.near_zero(t))for(var i=0;i<this.m_polyNodes.ChildCount();i++){(s=this.m_polyNodes.Childs()[i]).m_endtype===e.EndType.etClosedPolygon&&this.m_destPolys.push(s.m_polygon)}else{var n;this.MiterLimit>2?this.m_miterLim=2/(this.MiterLimit*this.MiterLimit):this.m_miterLim=.5,n=this.ArcTolerance<=0?e.ClipperOffset.def_arc_tolerance:this.ArcTolerance>Math.abs(t)*e.ClipperOffset.def_arc_tolerance?Math.abs(t)*e.ClipperOffset.def_arc_tolerance:this.ArcTolerance;var r=3.14159265358979/Math.acos(1-n/Math.abs(t));this.m_sin=Math.sin(e.ClipperOffset.two_pi/r),this.m_cos=Math.cos(e.ClipperOffset.two_pi/r),this.m_StepsPerRad=r/e.ClipperOffset.two_pi,t<0&&(this.m_sin=-this.m_sin);for(i=0;i<this.m_polyNodes.ChildCount();i++){var s=this.m_polyNodes.Childs()[i];this.m_srcPoly=s.m_polygon;var o=this.m_srcPoly.length;if(!(0===o||t<=0&&(o<3||s.m_endtype!==e.EndType.etClosedPolygon)))if(this.m_destPoly=new Array,1!==o){this.m_normals.length=0;for(d=0;d<o-1;d++)this.m_normals.push(e.ClipperOffset.GetUnitNormal(this.m_srcPoly[d],this.m_srcPoly[d+1]));if(s.m_endtype===e.EndType.etClosedLine||s.m_endtype===e.EndType.etClosedPolygon?this.m_normals.push(e.ClipperOffset.GetUnitNormal(this.m_srcPoly[o-1],this.m_srcPoly[0])):this.m_normals.push(new e.FPoint1(this.m_normals[o-2])),s.m_endtype===e.EndType.etClosedPolygon){var a=o-1;for(d=0;d<o;d++)a=this.OffsetPoint(d,a,s.m_jointype);this.m_destPolys.push(this.m_destPoly)}else if(s.m_endtype===e.EndType.etClosedLine){for(a=o-1,d=0;d<o;d++)a=this.OffsetPoint(d,a,s.m_jointype);this.m_destPolys.push(this.m_destPoly),this.m_destPoly=new Array;var l=this.m_normals[o-1];for(d=o-1;d>0;d--)this.m_normals[d]=new e.FPoint2(-this.m_normals[d-1].X,-this.m_normals[d-1].Y);this.m_normals[0]=new e.FPoint2(-l.X,-l.Y),a=0;for(d=o-1;d>=0;d--)a=this.OffsetPoint(d,a,s.m_jointype);this.m_destPolys.push(this.m_destPoly)}else{var h;for(a=0,d=1;d<o-1;++d)a=this.OffsetPoint(d,a,s.m_jointype);if(s.m_endtype===e.EndType.etOpenButt){d=o-1;h=new e.FPoint2(this.m_srcPoly[d].X+this.m_normals[d].X*t,this.m_srcPoly[d].Y+this.m_normals[d].Y*t),this.m_destPoly.push(h),h=new e.FPoint2(this.m_srcPoly[d].X-this.m_normals[d].X*t,this.m_srcPoly[d].Y-this.m_normals[d].Y*t),this.m_destPoly.push(h)}else{d=o-1;a=o-2,this.m_sinA=0,this.m_normals[d]=new e.FPoint2(-this.m_normals[d].X,-this.m_normals[d].Y),s.m_endtype===e.EndType.etOpenSquare?this.DoSquare(d,a):this.DoRound(d,a)}for(d=o-1;d>0;d--)this.m_normals[d]=new e.FPoint2(-this.m_normals[d-1].X,-this.m_normals[d-1].Y);this.m_normals[0]=new e.FPoint2(-this.m_normals[1].X,-this.m_normals[1].Y);for(d=(a=o-1)-1;d>0;--d)a=this.OffsetPoint(d,a,s.m_jointype);s.m_endtype===e.EndType.etOpenButt?(h=new e.FPoint2(this.m_srcPoly[0].X-this.m_normals[0].X*t,this.m_srcPoly[0].Y-this.m_normals[0].Y*t),this.m_destPoly.push(h),h=new e.FPoint2(this.m_srcPoly[0].X+this.m_normals[0].X*t,this.m_srcPoly[0].Y+this.m_normals[0].Y*t),this.m_destPoly.push(h)):(a=1,this.m_sinA=0,s.m_endtype===e.EndType.etOpenSquare?this.DoSquare(0,1):this.DoRound(0,1)),this.m_destPolys.push(this.m_destPoly)}}else{if(s.m_jointype===e.JoinType.jtRound)for(var u=1,p=0,d=1;d<=r;d++){this.m_destPoly.push(new e.FPoint2(this.m_srcPoly[0].X+u*t,this.m_srcPoly[0].Y+p*t));var f=u;u=u*this.m_cos-this.m_sin*p,p=f*this.m_sin+p*this.m_cos}else{u=-1,p=-1;for(var d=0;d<4;++d)this.m_destPoly.push(new e.FPoint2(this.m_srcPoly[0].X+u*t,this.m_srcPoly[0].Y+p*t)),u<0?u=1:p<0?p=1:u=-1}this.m_destPolys.push(this.m_destPoly)}}}},e.ClipperOffset.prototype.Execute=function(){var t=arguments,i=t[0]instanceof e.PolyTree;if(i){o=t[0],a=t[1];if(o.Clear(),this.FixOrientations(),this.DoOffset(a),(s=new e.Clipper(0)).AddPaths(this.m_destPolys,e.PolyType.ptSubject,!0),a>0)s.Execute(e.ClipType.ctUnion,o,e.PolyFillType.pftPositive,e.PolyFillType.pftPositive);else{h=e.Clipper.GetBounds(this.m_destPolys);if((l=new e.Path).push(new e.FPoint2(h.left-10,h.bottom+10)),l.push(new e.FPoint2(h.right+10,h.bottom+10)),l.push(new e.FPoint2(h.right+10,h.top-10)),l.push(new e.FPoint2(h.left-10,h.top-10)),s.AddPath(l,e.PolyType.ptSubject,!0),s.ReverseSolution=!0,s.Execute(e.ClipType.ctUnion,o,e.PolyFillType.pftNegative,e.PolyFillType.pftNegative),1===o.ChildCount()&&o.Childs()[0].ChildCount()>0){var n=o.Childs()[0];o.Childs()[0]=n.Childs()[0],o.Childs()[0].m_Parent=o;for(var r=1;r<n.ChildCount();r++)o.AddChild(n.Childs()[r])}else o.Clear()}}else{var s,o=t[0],a=t[1];if(e.Clear(o),this.FixOrientations(),this.DoOffset(a),(s=new e.Clipper(0)).AddPaths(this.m_destPolys,e.PolyType.ptSubject,!0),a>0)s.Execute(e.ClipType.ctUnion,o,e.PolyFillType.pftPositive,e.PolyFillType.pftPositive);else{var l,h=e.Clipper.GetBounds(this.m_destPolys);(l=new e.Path).push(new e.FPoint2(h.left-10,h.bottom+10)),l.push(new e.FPoint2(h.right+10,h.bottom+10)),l.push(new e.FPoint2(h.right+10,h.top-10)),l.push(new e.FPoint2(h.left-10,h.top-10)),s.AddPath(l,e.PolyType.ptSubject,!0),s.ReverseSolution=!0,s.Execute(e.ClipType.ctUnion,o,e.PolyFillType.pftNegative,e.PolyFillType.pftNegative),o.length>0&&o.splice(0,1)}}},e.ClipperOffset.prototype.OffsetPoint=function(t,i,n){if(this.m_sinA=this.m_normals[i].X*this.m_normals[t].Y-this.m_normals[t].X*this.m_normals[i].Y,0===this.m_sinA)return i;if(this.m_sinA>1?this.m_sinA=1:this.m_sinA<-1&&(this.m_sinA=-1),this.m_sinA*this.m_delta<0)this.m_destPoly.push(new e.FPoint2(this.m_srcPoly[t].X+this.m_normals[i].X*this.m_delta,this.m_srcPoly[t].Y+this.m_normals[i].Y*this.m_delta)),this.m_destPoly.push(new e.FPoint1(this.m_srcPoly[t])),this.m_destPoly.push(new e.FPoint2(this.m_srcPoly[t].X+this.m_normals[t].X*this.m_delta,this.m_srcPoly[t].Y+this.m_normals[t].Y*this.m_delta));else switch(n){case e.JoinType.jtMiter:var r=this.m_normals[t].X*this.m_normals[i].X+this.m_normals[t].Y*this.m_normals[i].Y+1;r>=this.m_miterLim?this.DoMiter(t,i,r):this.DoSquare(t,i);break;case e.JoinType.jtSquare:this.DoSquare(t,i);break;case e.JoinType.jtRound:this.DoRound(t,i)}return i=t},e.ClipperOffset.prototype.DoSquare=function(t,i){var n=Math.tan(Math.atan2(this.m_sinA,this.m_normals[i].X*this.m_normals[t].X+this.m_normals[i].Y*this.m_normals[t].Y)/4);this.m_destPoly.push(new e.FPoint2(this.m_srcPoly[t].X+this.m_delta*(this.m_normals[i].X-this.m_normals[i].Y*n),this.m_srcPoly[t].Y+this.m_delta*(this.m_normals[i].Y+this.m_normals[i].X*n))),this.m_destPoly.push(new e.FPoint2(this.m_srcPoly[t].X+this.m_delta*(this.m_normals[t].X+this.m_normals[t].Y*n),this.m_srcPoly[t].Y+this.m_delta*(this.m_normals[t].Y-this.m_normals[t].X*n)))},e.ClipperOffset.prototype.DoMiter=function(t,i,n){var r=this.m_delta/n;this.m_destPoly.push(new e.FPoint2(this.m_srcPoly[t].X+(this.m_normals[i].X+this.m_normals[t].X)*r,this.m_srcPoly[t].Y+(this.m_normals[i].Y+this.m_normals[t].Y)*r))},e.ClipperOffset.prototype.DoRound=function(t,i){for(var n,r=Math.atan2(this.m_sinA,this.m_normals[i].X*this.m_normals[t].X+this.m_normals[i].Y*this.m_normals[t].Y),s=Math.max(Math.round(this.m_StepsPerRad*Math.abs(r)),1),o=this.m_normals[i].X,a=this.m_normals[i].Y,l=0;l<s;++l)this.m_destPoly.push(new e.FPoint2(this.m_srcPoly[t].X+o*this.m_delta,this.m_srcPoly[t].Y+a*this.m_delta)),n=o,o=o*this.m_cos-this.m_sin*a,a=n*this.m_sin+a*this.m_cos;this.m_destPoly.push(new e.FPoint2(this.m_srcPoly[t].X+this.m_normals[t].X*this.m_delta,this.m_srcPoly[t].Y+this.m_normals[t].Y*this.m_delta))},e.Error=function(t){try{throw new Error(t)}catch(t){alert(t.message)}},e.JS={},e.JS.AreaOfPolygon=function(t){return e.Clipper.Area(t)},e.JS.AreaOfPolygons=function(t){for(var i=0,n=0;n<t.length;n++)i+=e.Clipper.Area(t[n]);return i},e.JS.BoundsOfPath=function(t){return e.JS.BoundsOfPaths([t])},e.JS.BoundsOfPaths=function(t){return e.Clipper.GetBounds(t)},e.JS.Clean=function(t,i){if(!(t instanceof Array))return[];var n=t[0]instanceof Array;t=e.JS.Clone(t);if("number"!=typeof i||null===i)return e.Error("Delta is not a number in Clean()."),t;if(0===t.length||1===t.length&&0===t[0].length||i<0)return t;n||(t=[t]);for(var r,s,o,a,l,h,u,p=t.length,d=[],f=0;f<p;f++)if(0!==(r=(s=t[f]).length))if(r<3)o=s,d.push(o);else{for(o=s,a=i*i,l=s[0],h=1,u=1;u<r;u++)(s[u].X-l.X)*(s[u].X-l.X)+(s[u].Y-l.Y)*(s[u].Y-l.Y)<=a||(o[h]=s[u],l=s[u],h++);l=s[h-1],(s[0].X-l.X)*(s[0].X-l.X)+(s[0].Y-l.Y)*(s[0].Y-l.Y)<=a&&h--,h<r&&o.splice(h,r-h),o.length&&d.push(o)}return!n&&d.length?d=d[0]:n||0!==d.length?n&&0===d.length&&(d=[[]]):d=[],d},e.JS.Clone=function(t){if(!(t instanceof Array))return[];if(0===t.length)return[];if(1===t.length&&0===t[0].length)return[[]];var e=t[0]instanceof Array;e||(t=[t]);var i,n,r,s,o=t.length,a=new Array(o);for(n=0;n<o;n++){for(i=t[n].length,s=new Array(i),r=0;r<i;r++)s[r]={X:t[n][r].X,Y:t[n][r].Y};a[n]=s}return e||(a=a[0]),a},e.JS.Lighten=function(t,i){if(!(t instanceof Array))return[];if("number"!=typeof i||null===i)return e.Error("Tolerance is not a number in Lighten()."),e.JS.Clone(t);if(0===t.length||1===t.length&&0===t[0].length||i<0)return e.JS.Clone(t);var n,r,s,o,a,l,h,u,p,d,f,c,y,v,x,g,P=t[0]instanceof Array;P||(t=[t]);var m=t.length,C=i*i,_=[];for(n=0;n<m;n++)if(0!==(l=(s=t[n]).length)){for(o=0;o<1e6;o++){for(a=[],s[(l=s.length)-1].X!==s[0].X||s[l-1].Y!==s[0].Y?(f=1,s.push({X:s[0].X,Y:s[0].Y}),l=s.length):f=0,d=[],r=0;r<l-2;r++)h=s[r],p=s[r+1],u=s[r+2],x=h.X,g=h.Y,c=u.X-x,y=u.Y-g,0===c&&0===y||((v=((p.X-x)*c+(p.Y-g)*y)/(c*c+y*y))>1?(x=u.X,g=u.Y):v>0&&(x+=c*v,g+=y*v)),(c=p.X-x)*c+(y=p.Y-g)*y<=C&&(d[r+1]=1,r++);for(a.push({X:s[0].X,Y:s[0].Y}),r=1;r<l-1;r++)d[r]||a.push({X:s[r].X,Y:s[r].Y});if(a.push({X:s[l-1].X,Y:s[l-1].Y}),f&&s.pop(),!d.length)break;s=a}a[(l=a.length)-1].X===a[0].X&&a[l-1].Y===a[0].Y&&a.pop(),a.length>2&&_.push(a)}return P||(_=_[0]),void 0===_&&(_=[]),_},e.JS.PerimeterOfPath=function(t,e){if(void 0===t)return 0;var i,n,r=Math.sqrt,s=0,o=0,a=0,l=0,h=0,u=t.length;if(u<2)return 0;for(e&&(t[u]=t[0],u++);--u;)o=(i=t[u]).X,a=i.Y,s+=r((o-(l=(n=t[u-1]).X))*(o-l)+(a-(h=n.Y))*(a-h));return e&&t.pop(),s},e.JS.PerimeterOfPaths=function(t,i){for(var n=0,r=0;r<t.length;r++)n+=e.JS.PerimeterOfPath(t[r],i);return n},e.ExPolygons=function(){return[]},e.ExPolygon=function(){this.outer=null,this.holes=null},e.JS.AddOuterPolyNodeToExPolygons=function(t,i){var n=new e.ExPolygon;n.outer=t.Contour();var r,s,o,a,l,h,u=t.Childs(),p=u.length;for(n.holes=new Array(p),o=0;o<p;o++)for(r=u[o],n.holes[o]=r.Contour(),a=0,h=(l=r.Childs()).length;a<h;a++)s=l[a],e.JS.AddOuterPolyNodeToExPolygons(s,i);i.push(n)},e.JS.ExPolygonsToPaths=function(t){var i,n,r,s,o=new e.Paths;for(i=0,r=t.length;i<r;i++)for(o.push(t[i].outer),n=0,s=t[i].holes.length;n<s;n++)o.push(t[i].holes[n]);return o},e.JS.PolyTreeToExPolygons=function(t){var i,n,r,s,o=new e.ExPolygons;for(n=0,s=(r=t.Childs()).length;n<s;n++)i=r[n],e.JS.AddOuterPolyNodeToExPolygons(i,o);return o}}()},11600:t=>{"use strict";function e(t,e,s){s=s||2;var o,a,l,p,d,c,y,v=e&&e.length,x=v?e[0]*s:t.length,g=i(t,0,x,s,!0),P=[];if(!g||g.next===g.prev)return P;if(v&&(g=function(t,e,r,s){var o,a,l,p=[];for(o=0,a=e.length;o<a;o++)(l=i(t,e[o]*s,o<a-1?e[o+1]*s:t.length,s,!1))===l.next&&(l.steiner=!0),p.push(f(l));for(p.sort(h),o=0;o<p.length;o++)r=n(r=u(p[o],r),r.next);return r}(t,e,g,s)),t.length>80*s){o=l=t[0],a=p=t[1];for(var m=s;m<x;m+=s)(d=t[m])<o&&(o=d),(c=t[m+1])<a&&(a=c),d>l&&(l=d),c>p&&(p=c);y=0!==(y=Math.max(l-o,p-a))?1/y:0}return r(g,P,s,o,a,y),P}function i(t,e,i,n,r){var s,o;if(r===b(t,e,i,n)>0)for(s=e;s<i;s+=n)o=I(s,t[s],t[s+1],o);else for(s=i-n;s>=e;s-=n)o=I(s,t[s],t[s+1],o);return o&&x(o,o.next)&&(E(o),o=o.next),o}function n(t,e){if(!t)return t;e||(e=t);var i,n=t;do{if(i=!1,n.steiner||!x(n,n.next)&&0!==v(n.prev,n,n.next))n=n.next;else{if(E(n),(n=e=n.prev)===n.next)break;i=!0}}while(i||n!==e);return e}function r(t,e,i,h,u,p,f){if(t){!f&&p&&function(t,e,i,n){var r=t;do{null===r.z&&(r.z=d(r.x,r.y,e,i,n)),r.prevZ=r.prev,r.nextZ=r.next,r=r.next}while(r!==t);r.prevZ.nextZ=null,r.prevZ=null,function(t){var e,i,n,r,s,o,a,l,h=1;do{for(i=t,t=null,s=null,o=0;i;){for(o++,n=i,a=0,e=0;e<h&&(a++,n=n.nextZ);e++);for(l=h;a>0||l>0&&n;)0!==a&&(0===l||!n||i.z<=n.z)?(r=i,i=i.nextZ,a--):(r=n,n=n.nextZ,l--),s?s.nextZ=r:t=r,r.prevZ=s,s=r;i=n}s.nextZ=null,h*=2}while(o>1)}(r)}(t,h,u,p);for(var c,y,v=t;t.prev!==t.next;)if(c=t.prev,y=t.next,p?o(t,h,u,p):s(t))e.push(c.i/i),e.push(t.i/i),e.push(y.i/i),E(t),t=y.next,v=y.next;else if((t=y)===v){f?1===f?r(t=a(n(t),e,i),e,i,h,u,p,2):2===f&&l(t,e,i,h,u,p):r(n(t),e,i,h,u,p,1);break}}}function s(t){var e=t.prev,i=t,n=t.next;if(v(e,i,n)>=0)return!1;for(var r=t.next.next;r!==t.prev;){if(c(e.x,e.y,i.x,i.y,n.x,n.y,r.x,r.y)&&v(r.prev,r,r.next)>=0)return!1;r=r.next}return!0}function o(t,e,i,n){var r=t.prev,s=t,o=t.next;if(v(r,s,o)>=0)return!1;for(var a=r.x<s.x?r.x<o.x?r.x:o.x:s.x<o.x?s.x:o.x,l=r.y<s.y?r.y<o.y?r.y:o.y:s.y<o.y?s.y:o.y,h=r.x>s.x?r.x>o.x?r.x:o.x:s.x>o.x?s.x:o.x,u=r.y>s.y?r.y>o.y?r.y:o.y:s.y>o.y?s.y:o.y,p=d(a,l,e,i,n),f=d(h,u,e,i,n),y=t.prevZ,x=t.nextZ;y&&y.z>=p&&x&&x.z<=f;){if(y!==t.prev&&y!==t.next&&c(r.x,r.y,s.x,s.y,o.x,o.y,y.x,y.y)&&v(y.prev,y,y.next)>=0)return!1;if(y=y.prevZ,x!==t.prev&&x!==t.next&&c(r.x,r.y,s.x,s.y,o.x,o.y,x.x,x.y)&&v(x.prev,x,x.next)>=0)return!1;x=x.nextZ}for(;y&&y.z>=p;){if(y!==t.prev&&y!==t.next&&c(r.x,r.y,s.x,s.y,o.x,o.y,y.x,y.y)&&v(y.prev,y,y.next)>=0)return!1;y=y.prevZ}for(;x&&x.z<=f;){if(x!==t.prev&&x!==t.next&&c(r.x,r.y,s.x,s.y,o.x,o.y,x.x,x.y)&&v(x.prev,x,x.next)>=0)return!1;x=x.nextZ}return!0}function a(t,e,i){var r=t;do{var s=r.prev,o=r.next.next;!x(s,o)&&g(s,r,r.next,o)&&C(s,o)&&C(o,s)&&(e.push(s.i/i),e.push(r.i/i),e.push(o.i/i),E(r),E(r.next),r=t=o),r=r.next}while(r!==t);return n(r)}function l(t,e,i,s,o,a){var l=t;do{for(var h=l.next.next;h!==l.prev;){if(l.i!==h.i&&y(l,h)){var u=_(l,h);return l=n(l,l.next),u=n(u,u.next),r(l,e,i,s,o,a),void r(u,e,i,s,o,a)}h=h.next}l=l.next}while(l!==t)}function h(t,e){return t.x-e.x}function u(t,e){var i=function(t,e){var i,n=e,r=t.x,s=t.y,o=-1/0;do{if(s<=n.y&&s>=n.next.y&&n.next.y!==n.y){var a=n.x+(s-n.y)*(n.next.x-n.x)/(n.next.y-n.y);if(a<=r&&a>o){if(o=a,a===r){if(s===n.y)return n;if(s===n.next.y)return n.next}i=n.x<n.next.x?n:n.next}}n=n.next}while(n!==e);if(!i)return null;if(r===o)return i;var l,h=i,u=i.x,d=i.y,f=1/0;n=i;do{r>=n.x&&n.x>=u&&r!==n.x&&c(s<d?r:o,s,u,d,s<d?o:r,s,n.x,n.y)&&(l=Math.abs(s-n.y)/(r-n.x),C(n,t)&&(l<f||l===f&&(n.x>i.x||n.x===i.x&&p(i,n)))&&(i=n,f=l)),n=n.next}while(n!==h);return i}(t,e);if(!i)return e;var r=_(i,t),s=n(i,i.next);return n(r,r.next),e===i?s:e}function p(t,e){return v(t.prev,t,e.prev)<0&&v(e.next,t,t.next)<0}function d(t,e,i,n,r){return(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-i)*r)|t<<8))|t<<4))|t<<2))|t<<1))|(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-n)*r)|e<<8))|e<<4))|e<<2))|e<<1))<<1}function f(t){var e=t,i=t;do{(e.x<i.x||e.x===i.x&&e.y<i.y)&&(i=e),e=e.next}while(e!==t);return i}function c(t,e,i,n,r,s,o,a){return(r-o)*(e-a)-(t-o)*(s-a)>=0&&(t-o)*(n-a)-(i-o)*(e-a)>=0&&(i-o)*(s-a)-(r-o)*(n-a)>=0}function y(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!function(t,e){var i=t;do{if(i.i!==t.i&&i.next.i!==t.i&&i.i!==e.i&&i.next.i!==e.i&&g(i,i.next,t,e))return!0;i=i.next}while(i!==t);return!1}(t,e)&&(C(t,e)&&C(e,t)&&function(t,e){var i=t,n=!1,r=(t.x+e.x)/2,s=(t.y+e.y)/2;do{i.y>s!=i.next.y>s&&i.next.y!==i.y&&r<(i.next.x-i.x)*(s-i.y)/(i.next.y-i.y)+i.x&&(n=!n),i=i.next}while(i!==t);return n}(t,e)&&(v(t.prev,t,e.prev)||v(t,e.prev,e))||x(t,e)&&v(t.prev,t,t.next)>0&&v(e.prev,e,e.next)>0)}function v(t,e,i){return(e.y-t.y)*(i.x-e.x)-(e.x-t.x)*(i.y-e.y)}function x(t,e){return t.x===e.x&&t.y===e.y}function g(t,e,i,n){var r=m(v(t,e,i)),s=m(v(t,e,n)),o=m(v(i,n,t)),a=m(v(i,n,e));return r!==s&&o!==a||(!(0!==r||!P(t,i,e))||(!(0!==s||!P(t,n,e))||(!(0!==o||!P(i,t,n))||!(0!==a||!P(i,e,n)))))}function P(t,e,i){return e.x<=Math.max(t.x,i.x)&&e.x>=Math.min(t.x,i.x)&&e.y<=Math.max(t.y,i.y)&&e.y>=Math.min(t.y,i.y)}function m(t){return t>0?1:t<0?-1:0}function C(t,e){return v(t.prev,t,t.next)<0?v(t,e,t.next)>=0&&v(t,t.prev,e)>=0:v(t,e,t.prev)<0||v(t,t.next,e)<0}function _(t,e){var i=new T(t.i,t.x,t.y),n=new T(e.i,e.x,e.y),r=t.next,s=e.prev;return t.next=e,e.prev=t,i.next=r,r.prev=i,n.next=i,i.prev=n,s.next=n,n.prev=s,n}function I(t,e,i,n){var r=new T(t,e,i);return n?(r.next=n.next,r.prev=n,n.next.prev=r,n.next=r):(r.prev=r,r.next=r),r}function E(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function T(t,e,i){this.i=t,this.x=e,this.y=i,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function b(t,e,i,n){for(var r=0,s=e,o=i-n;s<i;s+=n)r+=(t[o]-t[s])*(t[s+1]+t[o+1]),o=s;return r}t.exports=e,t.exports.default=e,e.deviation=function(t,e,i,n){var r=e&&e.length,s=r?e[0]*i:t.length,o=Math.abs(b(t,0,s,i));if(r)for(var a=0,l=e.length;a<l;a++){var h=e[a]*i,u=a<l-1?e[a+1]*i:t.length;o-=Math.abs(b(t,h,u,i))}var p=0;for(a=0;a<n.length;a+=3){var d=n[a]*i,f=n[a+1]*i,c=n[a+2]*i;p+=Math.abs((t[d]-t[c])*(t[f+1]-t[d+1])-(t[d]-t[f])*(t[c+1]-t[d+1]))}return 0===o&&0===p?0:Math.abs((p-o)/o)},e.flatten=function(t){for(var e=t[0][0].length,i={vertices:[],holes:[],dimensions:e},n=0,r=0;r<t.length;r++){for(var s=0;s<t[r].length;s++)for(var o=0;o<e;o++)i.vertices.push(t[r][s][o]);r>0&&(n+=t[r-1].length,i.holes.push(n))}return i}},68010:t=>{"use strict";var e=function(t,e){this.head_=t,this.tail_=e,this.search_node_=t};e.prototype.head=function(){return this.head_},e.prototype.setHead=function(t){this.head_=t},e.prototype.tail=function(){return this.tail_},e.prototype.setTail=function(t){this.tail_=t},e.prototype.search=function(){return this.search_node_},e.prototype.setSearch=function(t){this.search_node_=t},e.prototype.findSearchNode=function(){return this.search_node_},e.prototype.locateNode=function(t){var e=this.search_node_;if(t<e.value){for(;e=e.prev;)if(t>=e.value)return this.search_node_=e,e}else for(;e=e.next;)if(t<e.value)return this.search_node_=e.prev,e.prev;return null},e.prototype.locatePoint=function(t){var e=t.x,i=this.findSearchNode(e),n=i.point.x;if(e===n){if(t!==i.point)if(t===i.prev.point)i=i.prev;else{if(t!==i.next.point)throw new Error("poly2tri Invalid AdvancingFront.locatePoint() call");i=i.next}}else if(e<n)for(;(i=i.prev)&&t!==i.point;);else for(;(i=i.next)&&t!==i.point;);return i&&(this.search_node_=i),i},t.exports=e,t.exports.Node=function(t,e){this.point=t,this.triangle=e||null,this.next=null,this.prev=null,this.value=t.x}},3120:t=>{"use strict";t.exports=function(t,e){if(!t)throw new Error(e||"Assert Failed")}},45381:(t,e,i)=>{"use strict";var n=i(82090),r=function(t,e){this.x=+t||0,this.y=+e||0,this._p2t_edge_list=null};r.prototype.toString=function(){return n.toStringBase(this)},r.prototype.toJSON=function(){return{x:this.x,y:this.y}},r.prototype.clone=function(){return new r(this.x,this.y)},r.prototype.set_zero=function(){return this.x=0,this.y=0,this},r.prototype.set=function(t,e){return this.x=+t||0,this.y=+e||0,this},r.prototype.negate=function(){return this.x=-this.x,this.y=-this.y,this},r.prototype.add=function(t){return this.x+=t.x,this.y+=t.y,this},r.prototype.sub=function(t){return this.x-=t.x,this.y-=t.y,this},r.prototype.mul=function(t){return this.x*=t,this.y*=t,this},r.prototype.length=function(){return Math.sqrt(this.x*this.x+this.y*this.y)},r.prototype.normalize=function(){var t=this.length();return this.x/=t,this.y/=t,t},r.prototype.equals=function(t){return this.x===t.x&&this.y===t.y},r.negate=function(t){return new r(-t.x,-t.y)},r.add=function(t,e){return new r(t.x+e.x,t.y+e.y)},r.sub=function(t,e){return new r(t.x-e.x,t.y-e.y)},r.mul=function(t,e){return new r(t*e.x,t*e.y)},r.cross=function(t,e){return"number"==typeof t?"number"==typeof e?t*e:new r(-t*e.y,t*e.x):"number"==typeof e?new r(e*t.y,-e*t.x):t.x*e.y-t.y*e.x},r.toString=n.toString,r.compare=n.compare,r.cmp=n.compare,r.equals=n.equals,r.dot=function(t,e){return t.x*e.x+t.y*e.y},t.exports=r},16976:(t,e,i)=>{"use strict";var n=i(82090),r=function(t,e){this.name="PointError",this.points=e=e||[],this.message=t||"Invalid Points!";for(var i=0;i<e.length;i++)this.message+=" "+n.toString(e[i])};(r.prototype=new Error).constructor=r,t.exports=r},67810:(t,e,i)=>{"use strict";var n=i.g.poly2tri;e.noConflict=function(){return i.g.poly2tri=n,e},e.VERSION=i(65689).version,e.PointError=i(16976),e.Point=i(45381),e.Triangle=i(59505),e.SweepContext=i(99705);var r=i(9389);e.triangulate=r.triangulate,e.sweep={Triangulate:r.triangulate}},9389:(t,e,i)=>{"use strict";var n=i(3120),r=i(16976),s=i(59505),o=i(68010).Node,a=i(20840),l=a.EPSILON,h=a.Orientation,u=a.orient2d,p=a.inScanArea,d=a.isAngleObtuse;function f(t,e){var i=t.locateNode(e),r=function(t,e,i){var n=new s(e,i.point,i.next.point);n.markNeighbor(i.triangle),t.addToMap(n);var r=new o(e);r.next=i.next,r.prev=i,i.next.prev=r,i.next=r,g(t,n)||t.mapTriangleToNodes(n);return r}(t,e,i);return e.x<=i.point.x+l&&x(t,i),function(t,e){var i=e.next;for(;i.next&&!d(i.point,i.next.point,i.prev.point);)x(t,i),i=i.next;i=e.prev;for(;i.prev&&!d(i.point,i.next.point,i.prev.point);)x(t,i),i=i.prev;e.next&&e.next.next&&function(t){var e=t.point.x-t.next.next.point.x,i=t.point.y-t.next.next.point.y;return n(i>=0,"unordered y"),e>=0||Math.abs(e)<i}(e)&&function(t,e){u(e.point,e.next.point,e.next.next.point)===h.CCW?t.basin.left_node=e.next.next:t.basin.left_node=e.next;t.basin.bottom_node=t.basin.left_node;for(;t.basin.bottom_node.next&&t.basin.bottom_node.point.y>=t.basin.bottom_node.next.point.y;)t.basin.bottom_node=t.basin.bottom_node.next;if(t.basin.bottom_node===t.basin.left_node)return;t.basin.right_node=t.basin.bottom_node;for(;t.basin.right_node.next&&t.basin.right_node.point.y<t.basin.right_node.next.point.y;)t.basin.right_node=t.basin.right_node.next;if(t.basin.right_node===t.basin.bottom_node)return;t.basin.width=t.basin.right_node.point.x-t.basin.left_node.point.x,t.basin.left_highest=t.basin.left_node.point.y>t.basin.right_node.point.y,C(t,t.basin.bottom_node)}(t,e)}(t,r),r}function c(t,e,i){t.edge_event.constrained_edge=e,t.edge_event.right=e.p.x>e.q.x,v(i.triangle,e.p,e.q)||(!function(t,e,i){t.edge_event.right?function(t,e,i){for(;i.next.point.x<e.p.x;)u(e.q,i.next.point,e.p)===h.CCW?_(t,e,i):i=i.next}(t,e,i):function(t,e,i){for(;i.prev.point.x>e.p.x;)u(e.q,i.prev.point,e.p)===h.CW?T(t,e,i):i=i.prev}(t,e,i)}(t,e,i),y(t,e.p,e.q,i.triangle,e.q))}function y(t,e,i,n,s){if(!v(n,e,i)){var o=n.pointCCW(s),a=u(i,o,e);if(a===h.COLLINEAR)throw new r("poly2tri EdgeEvent: Collinear not supported!",[i,o,e]);var l=n.pointCW(s),p=u(i,l,e);if(p===h.COLLINEAR)throw new r("poly2tri EdgeEvent: Collinear not supported!",[i,l,e]);a===p?y(t,e,i,n=a===h.CW?n.neighborCCW(s):n.neighborCW(s),s):S(t,e,i,n,s)}}function v(t,e,i){var n=t.edgeIndex(e,i);if(-1!==n){t.markConstrainedEdgeByIndex(n);var r=t.getNeighbor(n);return r&&r.markConstrainedEdgeByPoints(e,i),!0}return!1}function x(t,e){var i=new s(e.prev.point,e.point,e.next.point);i.markNeighbor(e.prev.triangle),i.markNeighbor(e.triangle),t.addToMap(i),e.prev.next=e.next,e.next.prev=e.prev,g(t,i)||t.mapTriangleToNodes(i)}function g(t,e){for(var i=0;i<3;++i)if(!e.delaunay_edge[i]){var n=e.getNeighbor(i);if(n){var r=e.getPoint(i),s=n.oppositePoint(e,r),o=n.index(s);if(n.constrained_edge[o]||n.delaunay_edge[o]){e.constrained_edge[i]=n.constrained_edge[o];continue}if(P(r,e.pointCCW(r),e.pointCW(r),s)){e.delaunay_edge[i]=!0,n.delaunay_edge[o]=!0,m(e,r,n,s);var a=!g(t,e);return a&&t.mapTriangleToNodes(e),(a=!g(t,n))&&t.mapTriangleToNodes(n),e.delaunay_edge[i]=!1,n.delaunay_edge[o]=!1,!0}}}return!1}function P(t,e,i,n){var r=t.x-n.x,s=t.y-n.y,o=e.x-n.x,a=e.y-n.y,l=r*a-o*s;if(l<=0)return!1;var h=i.x-n.x,u=i.y-n.y,p=h*s-r*u;return!(p<=0)&&(r*r+s*s)*(o*u-h*a)+(o*o+a*a)*p+(h*h+u*u)*l>0}function m(t,e,i,n){var r,s,o,a,l,h,u,p,d,f,c,y;r=t.neighborCCW(e),s=t.neighborCW(e),o=i.neighborCCW(n),a=i.neighborCW(n),l=t.getConstrainedEdgeCCW(e),h=t.getConstrainedEdgeCW(e),u=i.getConstrainedEdgeCCW(n),p=i.getConstrainedEdgeCW(n),d=t.getDelaunayEdgeCCW(e),f=t.getDelaunayEdgeCW(e),c=i.getDelaunayEdgeCCW(n),y=i.getDelaunayEdgeCW(n),t.legalize(e,n),i.legalize(n,e),i.setDelaunayEdgeCCW(e,d),t.setDelaunayEdgeCW(e,f),t.setDelaunayEdgeCCW(n,c),i.setDelaunayEdgeCW(n,y),i.setConstrainedEdgeCCW(e,l),t.setConstrainedEdgeCW(e,h),t.setConstrainedEdgeCCW(n,u),i.setConstrainedEdgeCW(n,p),t.clearNeighbors(),i.clearNeighbors(),r&&i.markNeighbor(r),s&&t.markNeighbor(s),o&&t.markNeighbor(o),a&&i.markNeighbor(a),t.markNeighbor(i)}function C(t,e){if(!function(t,e){var i;i=t.basin.left_highest?t.basin.left_node.point.y-e.point.y:t.basin.right_node.point.y-e.point.y;if(t.basin.width>i)return!0;return!1}(t,e)&&(x(t,e),e.prev!==t.basin.left_node||e.next!==t.basin.right_node)){if(e.prev===t.basin.left_node){if(u(e.point,e.next.point,e.next.next.point)===h.CW)return;e=e.next}else if(e.next===t.basin.right_node){if(u(e.point,e.prev.point,e.prev.prev.point)===h.CCW)return;e=e.prev}else e=e.prev.point.y<e.next.point.y?e.prev:e.next;C(t,e)}}function _(t,e,i){i.point.x<e.p.x&&(u(i.point,i.next.point,i.next.next.point)===h.CCW?I(t,e,i):(E(t,e,i),_(t,e,i)))}function I(t,e,i){x(t,i.next),i.next.point!==e.p&&u(e.q,i.next.point,e.p)===h.CCW&&u(i.point,i.next.point,i.next.next.point)===h.CCW&&I(t,e,i)}function E(t,e,i){u(i.next.point,i.next.next.point,i.next.next.next.point)===h.CCW?I(t,e,i.next):u(e.q,i.next.next.point,e.p)===h.CCW&&E(t,e,i.next)}function T(t,e,i){i.point.x>e.p.x&&(u(i.point,i.prev.point,i.prev.prev.point)===h.CW?L(t,e,i):(b(t,e,i),T(t,e,i)))}function b(t,e,i){u(i.prev.point,i.prev.prev.point,i.prev.prev.prev.point)===h.CW?L(t,e,i.prev):u(e.q,i.prev.prev.point,e.p)===h.CW&&b(t,e,i.prev)}function L(t,e,i){x(t,i.prev),i.prev.point!==e.p&&u(e.q,i.prev.point,e.p)===h.CW&&u(i.point,i.prev.point,i.prev.prev.point)===h.CW&&L(t,e,i)}function S(t,e,i,s,o){var a=s.neighborAcross(o);n(a,"FLIP failed due to missing triangle!");var l=a.oppositePoint(s,o);if(s.getConstrainedEdgeAcross(o)){var d=s.index(o);throw new r("poly2tri Intersecting Constraints",[o,l,s.getPoint((d+1)%3),s.getPoint((d+2)%3)])}p(o,s.pointCCW(o),s.pointCW(o),l)?(m(s,o,a,l),t.mapTriangleToNodes(s),t.mapTriangleToNodes(a),o===i&&l===e?i===t.edge_event.constrained_edge.q&&e===t.edge_event.constrained_edge.p&&(s.markConstrainedEdgeByPoints(e,i),a.markConstrainedEdgeByPoints(e,i),g(t,s),g(t,a)):(s=function(t,e,i,n,r,s){var o;if(e===h.CCW)return o=n.edgeIndex(r,s),n.delaunay_edge[o]=!0,g(t,n),n.clearDelaunayEdges(),i;return o=i.edgeIndex(r,s),i.delaunay_edge[o]=!0,g(t,i),i.clearDelaunayEdges(),n}(t,u(i,l,e),s,a,o,l),S(t,e,i,s,o))):(w(t,e,i,s,a,A(e,i,a,l)),y(t,e,i,s,o))}function A(t,e,i,n){var s=u(e,n,t);if(s===h.CW)return i.pointCCW(n);if(s===h.CCW)return i.pointCW(n);throw new r("poly2tri [Unsupported] nextFlipPoint: opposing point on constrained edge!",[e,n,t])}function w(t,e,i,r,s,o){var a=s.neighborAcross(o);n(a,"FLIP failed due to missing triangle");var l=a.oppositePoint(s,o);p(i,r.pointCCW(i),r.pointCW(i),l)?S(t,i,l,a,l):w(t,e,i,r,a,A(e,i,a,l))}e.triangulate=function(t){t.initTriangulation(),t.createAdvancingFront(),function(t){var e,i=t.pointCount();for(e=1;e<i;++e)for(var n=t.getPoint(e),r=f(t,n),s=n._p2t_edge_list,o=0;s&&o<s.length;++o)c(t,s[o],r)}(t),function(t){var e=t.front().head().next.triangle,i=t.front().head().next.point;for(;!e.getConstrainedEdgeCW(i);)e=e.neighborCCW(i);t.meshClean(e)}(t)}},99705:(t,e,i)=>{"use strict";var n=i(16976),r=i(45381),s=i(59505),o=i(9389),a=i(68010),l=a.Node,h=function(t,e){if(this.p=t,this.q=e,t.y>e.y)this.q=t,this.p=e;else if(t.y===e.y)if(t.x>e.x)this.q=t,this.p=e;else if(t.x===e.x)throw new n("poly2tri Invalid Edge constructor: repeated points!",[t]);this.q._p2t_edge_list||(this.q._p2t_edge_list=[]),this.q._p2t_edge_list.push(this)},u=function(){this.left_node=null,this.bottom_node=null,this.right_node=null,this.width=0,this.left_highest=!1};u.prototype.clear=function(){this.left_node=null,this.bottom_node=null,this.right_node=null,this.width=0,this.left_highest=!1};var p=function(){this.constrained_edge=null,this.right=!1},d=function(t,e){e=e||{},this.triangles_=[],this.map_=[],this.points_=e.cloneArrays?t.slice(0):t,this.edge_list=[],this.pmin_=this.pmax_=null,this.front_=null,this.head_=null,this.tail_=null,this.af_head_=null,this.af_middle_=null,this.af_tail_=null,this.basin=new u,this.edge_event=new p,this.initEdges(this.points_)};d.prototype.addHole=function(t){this.initEdges(t);var e,i=t.length;for(e=0;e<i;e++)this.points_.push(t[e]);return this},d.prototype.AddHole=d.prototype.addHole,d.prototype.addHoles=function(t){var e,i=t.length;for(e=0;e<i;e++)this.initEdges(t[e]);return this.points_=this.points_.concat.apply(this.points_,t),this},d.prototype.addPoint=function(t){return this.points_.push(t),this},d.prototype.AddPoint=d.prototype.addPoint,d.prototype.addPoints=function(t){return this.points_=this.points_.concat(t),this},d.prototype.triangulate=function(){return o.triangulate(this),this},d.prototype.getBoundingBox=function(){return{min:this.pmin_,max:this.pmax_}},d.prototype.getTriangles=function(){return this.triangles_},d.prototype.GetTriangles=d.prototype.getTriangles,d.prototype.front=function(){return this.front_},d.prototype.pointCount=function(){return this.points_.length},d.prototype.head=function(){return this.head_},d.prototype.setHead=function(t){this.head_=t},d.prototype.tail=function(){return this.tail_},d.prototype.setTail=function(t){this.tail_=t},d.prototype.getMap=function(){return this.map_},d.prototype.initTriangulation=function(){var t,e=this.points_[0].x,i=this.points_[0].x,n=this.points_[0].y,s=this.points_[0].y,o=this.points_.length;for(t=1;t<o;t++){var a=this.points_[t];a.x>e&&(e=a.x),a.x<i&&(i=a.x),a.y>n&&(n=a.y),a.y<s&&(s=a.y)}this.pmin_=new r(i,s),this.pmax_=new r(e,n);var l=.3*(e-i),h=.3*(n-s);this.head_=new r(e+l,s-h),this.tail_=new r(i-l,s-h),this.points_.sort(r.compare)},d.prototype.initEdges=function(t){var e,i=t.length;for(e=0;e<i;++e)this.edge_list.push(new h(t[e],t[(e+1)%i]))},d.prototype.getPoint=function(t){return this.points_[t]},d.prototype.addToMap=function(t){this.map_.push(t)},d.prototype.locateNode=function(t){return this.front_.locateNode(t.x)},d.prototype.createAdvancingFront=function(){var t,e,i,n=new s(this.points_[0],this.tail_,this.head_);this.map_.push(n),t=new l(n.getPoint(1),n),e=new l(n.getPoint(0),n),i=new l(n.getPoint(2)),this.front_=new a(t,i),t.next=e,e.next=i,e.prev=t,i.prev=e},d.prototype.removeNode=function(t){},d.prototype.mapTriangleToNodes=function(t){for(var e=0;e<3;++e)if(!t.getNeighbor(e)){var i=this.front_.locatePoint(t.pointCW(t.getPoint(e)));i&&(i.triangle=t)}},d.prototype.removeFromMap=function(t){var e,i=this.map_,n=i.length;for(e=0;e<n;e++)if(i[e]===t){i.splice(e,1);break}},d.prototype.meshClean=function(t){for(var e,i,n=[t];e=n.pop();)if(!e.isInterior())for(e.setInterior(!0),this.triangles_.push(e),i=0;i<3;i++)e.constrained_edge[i]||n.push(e.getNeighbor(i))},t.exports=d},59505:(t,e,i)=>{"use strict";var n=function(t,e,i){this.points_=[t,e,i],this.neighbors_=[null,null,null],this.interior_=!1,this.constrained_edge=[!1,!1,!1],this.delaunay_edge=[!1,!1,!1]},r=i(82090).toString;n.prototype.toString=function(){return"["+r(this.points_[0])+r(this.points_[1])+r(this.points_[2])+"]"},n.prototype.getPoint=function(t){return this.points_[t]},n.prototype.GetPoint=n.prototype.getPoint,n.prototype.getPoints=function(){return this.points_},n.prototype.getNeighbor=function(t){return this.neighbors_[t]},n.prototype.containsPoint=function(t){var e=this.points_;return t===e[0]||t===e[1]||t===e[2]},n.prototype.containsEdge=function(t){return this.containsPoint(t.p)&&this.containsPoint(t.q)},n.prototype.containsPoints=function(t,e){return this.containsPoint(t)&&this.containsPoint(e)},n.prototype.isInterior=function(){return this.interior_},n.prototype.setInterior=function(t){return this.interior_=t,this},n.prototype.markNeighborPointers=function(t,e,i){var n=this.points_;if(t===n[2]&&e===n[1]||t===n[1]&&e===n[2])this.neighbors_[0]=i;else if(t===n[0]&&e===n[2]||t===n[2]&&e===n[0])this.neighbors_[1]=i;else{if(!(t===n[0]&&e===n[1]||t===n[1]&&e===n[0]))throw new Error("poly2tri Invalid Triangle.markNeighborPointers() call");this.neighbors_[2]=i}},n.prototype.markNeighbor=function(t){var e=this.points_;t.containsPoints(e[1],e[2])?(this.neighbors_[0]=t,t.markNeighborPointers(e[1],e[2],this)):t.containsPoints(e[0],e[2])?(this.neighbors_[1]=t,t.markNeighborPointers(e[0],e[2],this)):t.containsPoints(e[0],e[1])&&(this.neighbors_[2]=t,t.markNeighborPointers(e[0],e[1],this))},n.prototype.clearNeighbors=function(){this.neighbors_[0]=null,this.neighbors_[1]=null,this.neighbors_[2]=null},n.prototype.clearDelaunayEdges=function(){this.delaunay_edge[0]=!1,this.delaunay_edge[1]=!1,this.delaunay_edge[2]=!1},n.prototype.pointCW=function(t){var e=this.points_;return t===e[0]?e[2]:t===e[1]?e[0]:t===e[2]?e[1]:null},n.prototype.pointCCW=function(t){var e=this.points_;return t===e[0]?e[1]:t===e[1]?e[2]:t===e[2]?e[0]:null},n.prototype.neighborCW=function(t){return t===this.points_[0]?this.neighbors_[1]:t===this.points_[1]?this.neighbors_[2]:this.neighbors_[0]},n.prototype.neighborCCW=function(t){return t===this.points_[0]?this.neighbors_[2]:t===this.points_[1]?this.neighbors_[0]:this.neighbors_[1]},n.prototype.getConstrainedEdgeCW=function(t){return t===this.points_[0]?this.constrained_edge[1]:t===this.points_[1]?this.constrained_edge[2]:this.constrained_edge[0]},n.prototype.getConstrainedEdgeCCW=function(t){return t===this.points_[0]?this.constrained_edge[2]:t===this.points_[1]?this.constrained_edge[0]:this.constrained_edge[1]},n.prototype.getConstrainedEdgeAcross=function(t){return t===this.points_[0]?this.constrained_edge[0]:t===this.points_[1]?this.constrained_edge[1]:this.constrained_edge[2]},n.prototype.setConstrainedEdgeCW=function(t,e){t===this.points_[0]?this.constrained_edge[1]=e:t===this.points_[1]?this.constrained_edge[2]=e:this.constrained_edge[0]=e},n.prototype.setConstrainedEdgeCCW=function(t,e){t===this.points_[0]?this.constrained_edge[2]=e:t===this.points_[1]?this.constrained_edge[0]=e:this.constrained_edge[1]=e},n.prototype.getDelaunayEdgeCW=function(t){return t===this.points_[0]?this.delaunay_edge[1]:t===this.points_[1]?this.delaunay_edge[2]:this.delaunay_edge[0]},n.prototype.getDelaunayEdgeCCW=function(t){return t===this.points_[0]?this.delaunay_edge[2]:t===this.points_[1]?this.delaunay_edge[0]:this.delaunay_edge[1]},n.prototype.setDelaunayEdgeCW=function(t,e){t===this.points_[0]?this.delaunay_edge[1]=e:t===this.points_[1]?this.delaunay_edge[2]=e:this.delaunay_edge[0]=e},n.prototype.setDelaunayEdgeCCW=function(t,e){t===this.points_[0]?this.delaunay_edge[2]=e:t===this.points_[1]?this.delaunay_edge[0]=e:this.delaunay_edge[1]=e},n.prototype.neighborAcross=function(t){return t===this.points_[0]?this.neighbors_[0]:t===this.points_[1]?this.neighbors_[1]:this.neighbors_[2]},n.prototype.oppositePoint=function(t,e){var i=t.pointCW(e);return this.pointCW(i)},n.prototype.legalize=function(t,e){var i=this.points_;if(t===i[0])i[1]=i[0],i[0]=i[2],i[2]=e;else if(t===i[1])i[2]=i[1],i[1]=i[0],i[0]=e;else{if(t!==i[2])throw new Error("poly2tri Invalid Triangle.legalize() call");i[0]=i[2],i[2]=i[1],i[1]=e}},n.prototype.index=function(t){var e=this.points_;if(t===e[0])return 0;if(t===e[1])return 1;if(t===e[2])return 2;throw new Error("poly2tri Invalid Triangle.index() call")},n.prototype.edgeIndex=function(t,e){var i=this.points_;if(t===i[0]){if(e===i[1])return 2;if(e===i[2])return 1}else if(t===i[1]){if(e===i[2])return 0;if(e===i[0])return 2}else if(t===i[2]){if(e===i[0])return 1;if(e===i[1])return 0}return-1},n.prototype.markConstrainedEdgeByIndex=function(t){this.constrained_edge[t]=!0},n.prototype.markConstrainedEdgeByEdge=function(t){this.markConstrainedEdgeByPoints(t.p,t.q)},n.prototype.markConstrainedEdgeByPoints=function(t,e){var i=this.points_;e===i[0]&&t===i[1]||e===i[1]&&t===i[0]?this.constrained_edge[2]=!0:e===i[0]&&t===i[2]||e===i[2]&&t===i[0]?this.constrained_edge[1]=!0:(e===i[1]&&t===i[2]||e===i[2]&&t===i[1])&&(this.constrained_edge[0]=!0)},t.exports=n},20840:(t,e)=>{"use strict";var i=1e-12;e.EPSILON=i;var n={CW:1,CCW:-1,COLLINEAR:0};e.Orientation=n,e.orient2d=function(t,e,r){var s=(t.x-r.x)*(e.y-r.y)-(t.y-r.y)*(e.x-r.x);return s>-1e-12&&s<i?n.COLLINEAR:s>0?n.CCW:n.CW},e.inScanArea=function(t,e,n,r){return!((t.x-e.x)*(r.y-e.y)-(r.x-e.x)*(t.y-e.y)>=-1e-12)&&!((t.x-n.x)*(r.y-n.y)-(r.x-n.x)*(t.y-n.y)<=i)},e.isAngleObtuse=function(t,e,i){var n=e.x-t.x,r=e.y-t.y;return n*(i.x-t.x)+r*(i.y-t.y)<0}},82090:t=>{"use strict";function e(t){return"("+t.x+";"+t.y+")"}t.exports={toString:function(t){var i=t.toString();return"[object Object]"===i?e(t):i},toStringBase:e,compare:function(t,e){return t.y===e.y?t.x-e.x:t.y-e.y},equals:function(t,e){return t.x===e.x&&t.y===e.y}}},43299:(t,e,i)=>{"use strict";i.r(e),i.d(e,{Path2D:()=>f});var n=i(14373),r=i.n(n),s=i(11600),o=i.n(s),a=i(53233),l=new THREE.Vector2,h=new THREE.Vector2,u=new THREE.Box2,p=null,d=function(){return p=p||new Autodesk.Extensions.CompGeom.EllipseArc};function f(t){this.segTypes=[],this.segData=[],this.hasCurves=!1,this.bbox=new THREE.Box2,this.precisionTolerance=t}f.prototype.setTessParams=function(t){this.tessParams=t},f.prototype.isClosedPath=function(){return this.segTypes.length&&7===this.segTypes[this.segTypes.length-1]},f.prototype.isPoint=function(){return 2==this.segTypes.length&&0===this.segTypes[0]&&1===this.segTypes[1]&&this.segData[0]==this.segData[2]&&this.segData[1]==this.segData[3]},f.prototype.closePath=function(){this.isClosedPath()||this.segTypes.push(7)},f.prototype.moveTo=function(t,e){this.segTypes.push(0),this.segData.push(t,e),this.bbox.expandByPoint(l.set(t,e))},f.prototype.lineTo=function(t,e){this.segTypes.push(1),this.segData.push(t,e),this.bbox.expandByPoint(l.set(t,e))},f.prototype.arc=function(t,e,i,n,r,s){this.hasCurves=!0,this.segTypes.push(2),this.segData.push(t,e,i,n,r,s),this.bbox.expandByPoint(l.set(t,e))},f.prototype.arcTo=function(t,e,i,n,r){this.hasCurves=!0,this.segTypes.push(3),this.segData.push(t,e,i,n,r),this.bbox.expandByPoint(l.set(t,e)),this.bbox.expandByPoint(l.set(i,n))},f.prototype.quadraticCurveTo=function(t,e,i,n){this.hasCurves=!0,this.segTypes.push(4),this.segData.push(t,e,i,n),this.bbox.expandByPoint(l.set(t,e)),this.bbox.expandByPoint(l.set(i,n))},f.prototype.bezierCurveTo=function(t,e,i,n,r,s){this.hasCurves=!0,this.segTypes.push(5),this.segData.push(t,e,i,n,r,s),this.bbox.expandByPoint(l.set(t,e)),this.bbox.expandByPoint(l.set(i,n)),this.bbox.expandByPoint(l.set(r,s))},f.prototype.ellipse=function(t,e,i,n,r,s,o,a){this.hasCurves=!0,this.segTypes.push(6),this.segData.push(t,e,i,n,r,s,o,a);var l=d().set(t,e,i,n,r,s,o,a).computeBBox(u);this.bbox.union(l)},f.prototype.flatten=function(t){for(var e=new f(this.precisionTolerance),i=0,n=0,r=0,s=n,o=r,l=this.segTypes,u=this.segData,p=this.bbox.getSize(h).length(),c=0;c<l.length;c++){switch(l[c]){case 0:t&&(n===s&&r===o||e.closePath()),s=n=u[i++],o=r=u[i++],e.moveTo(n,r);break;case 7:e.closePath();break;case 1:var y=u[i++],v=u[i++];y===n&&v===r||(e.lineTo(y,v),n=y,r=v);break;case 4:var x=u[i++],g=u[i++],P=u[i++],m=u[i++];(0,a.TesselateQuad)(e,n,r,x,g,P,m,p,this.tessParams,!!this.isFontChar),n=P,r=m;break;case 5:var C=u[i++],_=u[i++],I=u[i++],E=u[i++],T=u[i++],b=u[i++];(0,a.TesselateCubic)(e,n,r,C,_,I,E,T,b,p,this.tessParams,!!this.isFontChar),n=T,r=b;break;case 2:console.warn("not implemented: arc"),i+=6;break;case 3:console.warn("not implemented: arcto"),i+=4;break;case 6:var L=u[i++],S=u[i++],A=u[i++],w=u[i++],N=u[i++],O=u[i++],X=u[i++],Y=u[i++],F=this.tessParams||a.DefaultTessParams,M=F.numIterations,B=F.minSegLenFraction*p;d().set(L,S,A,w,N,O,X,Y).tesselate(e,M,B),n=e.segData[e.segData.length-2],r=e.segData[e.segData.length-1]}}return t&&(n===s&&r===o||e.closePath()),e},f.prototype.applyTransform=function(t,e){for(var i=0;i<this.segData.length;i+=2){var n=this.segData[i],r=this.segData[i+1];this.segData[i]=t.tx(n,r,e),this.segData[i+1]=t.ty(n,r,e)}},f.prototype.stroke=function(t,e,i,n,s,o,a,l){var h=this,u=null!=o,p=this;(a||this.hasCurves)&&(p=this.flatten(!1));var d=this;if(u){for(var c,y=[],v=0,x=0;x<p.segTypes.length;x++)if(0==p.segTypes[x])c=new f(this.precisionTolerance),y.push(c),c.moveTo(p.segData[v++],p.segData[v++]);else if(1==p.segTypes[x]){var g;null===(g=c)||void 0===g||g.lineTo(p.segData[v++],p.segData[v++])}else if(7==p.segTypes[x]){var P;null===(P=c)||void 0===P||P.closePath()}var m=o.flattened||o.flatten(!0),C=m.toClipperPath(t,!1);y.map((function(o){var u,p=d.preCheckForClipping(t,m,o,a,!0);if(!p.needCancel)if(p.needClipping&&!o.isPoint()){var f=o.toClipperPath(t,a)[0];if(!f)return;r().Clipper.Orientation(f)&&f.reverse();var c=new(r().PolyTree),y=new(r().Clipper);(u=f).length<2||u[0].X!==u[u.length-1].X||u[0].Y!==u[u.length-1].Y||(u[0].Y+=u[0].Y*Math.pow(2,-32)),y.AddPath(f,r().PolyType.ptSubject,!1),y.AddPaths(C,r().PolyType.ptClip,!0),y.Execute(r().ClipType.ctIntersection,c,r().PolyFillType.pftEvenOdd,r().PolyFillType.pftEvenOdd),function(r){var o=r.GetFirst();for(;o;)d.strokeClipperContour(t,o.Contour(),o.IsOpen,i,e,n,s,t.currentVpId,l,!1),o=o.GetNext()}(c)}else(!p.needClipping||1==C.length&&r().Clipper.PointInPolygon({X:o.segData[0],Y:o.segData[1]},C[0]))&&h.strokeFlattedPath(t,o,e,i,n,s,a,l)}))}else this.strokeFlattedPath(t,p,e,i,n,s,a,l)},f.prototype.strokeFlattedPath=function(t,e,i,n,r,s,o,a){var l,h=e.segData,u=e.segTypes;o&&(l=t.getCurrentTransform());for(var p=0,d=0,f=0,c=0,y=0,v=0;v<u.length;v++){var x=u[v];switch(x){case 0:var g=h[p++],P=h[p++];o?(c=t.tx(g,P,l),y=t.ty(g,P,l)):(c=g,y=P),d=c,f=y;break;case 7:case 1:var m=void 0,C=void 0;if(7===x)m=c,C=y;else{var _=h[p++],I=h[p++];o?(m=t.tx(_,I,l),C=t.ty(_,I,l)):(m=_,C=I)}var E=v>0&&0===u[v-1];(m!==d||C!==f||E)&&(t.flushBuffer(4),t.currentVbb.addSegment(d,f,m,C,0,i,n,r,s,t.currentVpId||0,a),d=m,f=C);break;default:console.error("Path must be flattened before rendering")}}},f.prototype.strokeClipperContour=function(t,e,i,n,r,s,o,a,l,h){var u,p=e.length,d=i?0:p-1,f=i?1:0;h&&(u=t.getCurrentTransform());for(var c=h?t.tx(e[d].X,e[d].Y,u):e[d].X,y=h?t.ty(e[d].X,e[d].Y,u):e[d].Y,v=f;v<p;v++){var x=h?t.tx(e[v].X,e[v].Y,u):e[v].X,g=h?t.ty(e[v].X,e[v].Y,u):e[v].Y;t.flushBuffer(4),t.currentVbb.addSegment(c,y,x,g,0,r,n,s,o,a,l),c=x,y=g}},f.prototype.isAABB=function(){var t=1e-10,e=.001,i=this.segTypes;if(6!==i.length&&5!==i.length)return!1;if(0!==i[0])return!1;if(6===i.length&&7!==i[5])return!1;if(5===i.length&&7!==i[4]&&1!==i[4])return!1;for(var n=1;n<i.length-1;n++)if(1!==i[n])return!1;var r=this.segData,s=r[2]-r[0],o=r[3]-r[1],a=r[6]-r[4],l=r[7]-r[5],h=Math.sqrt(s*s+o*o),u=Math.sqrt(a*a+l*l);if(Math.abs(h-u)>t)return!1;var p=(s/=h)*(a/=u)+(o/=h)*(l/=u);if(Math.abs(1+p)>e)return!1;var d=r[4]-r[2],f=r[5]-r[3],c=r[8]-r[6],y=r[9]-r[7],v=Math.sqrt(d*d+f*f),x=Math.sqrt(c*c+y*y);return!(Math.abs(v-x)>t)&&(p=(d/=v)*(c/=x)+(f/=v)*(y/=x),!(Math.abs(1+p)>e)&&(p=s*d+o*f,!(Math.abs(p)>e)&&!(Math.abs(s)>t&&Math.abs(o))))};f.prototype.isAABBContain=function(t){return this.isAABB()?function(t,e,i){if(t.containsBox(e))return 1;var n=i;return void 0===n&&(n=.001/t.size().length()),e.min.x-t.max.x>n||e.min.y-t.min.y>n||e.max.x-t.max.x<-n||e.max.y-t.max.y<-n?2:e.min.x-t.min.x<-n||e.min.y-t.min.y<-n||e.max.x-t.max.x>n||e.max.y-t.max.y>n?4:1}(this.bbox,t,this.precisionTolerance):4},f.prototype.clip=function(t,e){var i=t.flattened||t.flatten(!0),n=this.flattened||this.flatten(!0),s=this.preCheckForClipping(null,i,n,!1,!1);if(s.needCancel)return console.warn("No overlap between nested clip regions."),new f;if(0==s.needClipping)return s.needSwapSubject?t:this;var o=i.toClipperPath(null,!1),a=n.toClipperPath(null,!1),l=new(r().PolyTree),h=new(r().Clipper);h.AddPaths(a,r().PolyType.ptSubject,!0),h.AddPaths(o,r().PolyType.ptClip,!0),h.Execute(r().ClipType.ctIntersection,l,r().PolyFillType.pftEvenOdd,r().PolyFillType.pftEvenOdd);for(var u=new f(this.precisionTolerance),p=l.GetFirst();p;){for(var d=p.Contour(),c=0;c<d.length;c++)0==c?u.moveTo(d[c].X,d[c].Y):u.lineTo(d[c].X,d[c].Y);d[d.length-1].X==d[0].X&&d[d.length-1].Y==d[0].Y||u.lineTo(d[0].X,d[0].Y),p=p.GetNext()}return u},f.prototype.isFillable=function(){var t=this.flattened||this.flatten(!0);if(t.segTypes.length<3)return!1;if(3===t.segTypes.length)return!(7===t.segTypes[2]&&1===t.segTypes[1]&&0===t.segTypes[0]);for(var e=!1,i=0;i<t.segTypes.length;i+=2)if(0!=t.segTypes[i]||1!=t.segTypes[i+1]){e=!0;break}return e},f.prototype.fill=function(t,e,i,n,s,o,a){if(this.isFillable()){var l=this.flattened||this.flatten(!0),h=this,u=function(){var e=null!=s,i=!1;if(e){var n=s.flattened||s.flatten(!0),a=h.preCheckForClipping(t,n,l,o,!1);if(a.needCancel)return;e=a.needClipping,i=a.needSwapSubject}if(e){var u=(s.flattened||s.flatten(!0)).toClipperPath(t,!1),p=l.toClipperPath(t,o),d=new(r().PolyTree),f=new(r().Clipper);return f.AddPaths(p,r().PolyType.ptSubject,!0),f.AddPaths(u,r().PolyType.ptClip,!0),f.Execute(r().ClipType.ctIntersection,d,r().PolyFillType.pftEvenOdd,r().PolyFillType.pftEvenOdd),{polygons:h.getPolygonFromClipperSolution(d),appliedTransform:o,needClipping:e}}if(l=i?n:l,h.cached)return{polygons:h.cached,appliedTransform:!1,needClipping:e,subjFlatted:l};var c=l.toClipperPath(t,!1),y=new(r().PolyTree),v=new(r().Clipper);v.AddPaths(c,r().PolyType.ptSubject,!0),v.Execute(r().ClipType.ctUnion,y,r().PolyFillType.pftEvenOdd,r().PolyFillType.pftEvenOdd);var x=h.getPolygonFromClipperSolution(y);return i||(h.cached=x),{polygons:x,appliedTransform:i,needClipping:e,subjFlatted:l}}();u&&u.polygons.map((function(r){!function(r,s,o){var l=r.vertices;if(s){for(var p=t.getCurrentTransform(),d=[],f=0;f<l.length;f+=2){var c=t.tx(l[f],l[f+1],p),y=t.ty(l[f],l[f+1],p);d.push(c,y)}l=d}if(t.addPolyTriangle(l,r.indices,e,i,n,!1),!a)if(o||!h.isFontChar)for(var v in r.contours)h.strokeClipperContour(t,r.contours[v],!0,e,-.5,i,n,t.currentVpId,0,s);else h.strokeFlattedPath(t,u.subjFlatted,-.5,e,i,n,s,0)}(r,o&&!u.appliedTransform,u.needClipping)}))}},f.prototype.toClipperPath=function(t,e){var i,n=[],r=[],s=this.segTypes,o=this.segData,a=0;function l(n,r){if(e){var s=t.tx(r.X,r.Y,i),o=t.ty(r.X,r.Y,i);r.X=s,r.Y=o}(n.length>0&&(n[n.length-1].X!=r.X||n[n.length-1].Y!=r.Y)||0==n.length)&&n.push(r)}e&&(i=t.getCurrentTransform());for(var h=0;h<s.length;h++)0==s[h]?(r&&r.length>1&&n.push(r),l(r=[],{X:o[a++],Y:o[a++]})):1==s[h]?l(r,{X:o[a++],Y:o[a++]}):7==s[h]&&(r.push({X:r[0].X,Y:r[0].Y}),n.push(r),r=[]);return r&&r.length>1&&n.push(r),n},f.prototype.hasIntersection=function(t,e,i){return!(t.max.x-e.min.x<=-i||t.max.y-e.min.y<=-i||t.min.x-e.max.x>=i||t.min.y-e.max.y>=i)},f.prototype.preCheckForClipping=function(t,e,i,n,r){var s=e.bbox,o=i.bbox;if(n){var a=t.getCurrentTransform();o=t.transformBox(o,a,u)}return this.hasIntersection(s,o,this.precisionTolerance)?e.isAABB()&&s.containsBox(o)?{needClipping:!1}:i.isAABB()&&o.containsBox(s)?r?{needCancel:!0}:{needClipping:!1,needSwapSubject:!0}:{needClipping:!0}:{needCancel:!0}},f.prototype.getPolygonFromClipperSolution=function(t){function e(t,e,i){for(var n=0;n<i.length;n++)e.push(i[n].X,i[n].Y);t.push(i)}return r().JS.PolyTreeToExPolygons(t).map((function(t){var i=[],n=[],s=[];if(1==t.holes.length&&Math.abs(r().JS.AreaOfPolygons(t.holes))>Math.abs(r().JS.AreaOfPolygon(t.outer))){var a=t.holes[0];t.holes[0]=t.outer,t.outer=a}e(s,i,t.outer),t.holes.map((function(t){n.push(i.length/2),e(s,i,t)}));var l=o()(i,n);return{vertices:i,indices:l,holeIndices:n,contours:s}}))},f.prototype.msdfClipping=function(t){var e=(this.flattened||this.flatten(!0)).toClipperPath(null,!1),i=t.toClipperPath(null,!1),n=new(r().PolyTree),s=new(r().Clipper);return s.AddPaths(e,r().PolyType.ptSubject,!0),s.AddPaths(i,r().PolyType.ptClip,!0),s.Execute(r().ClipType.ctIntersection,n,r().PolyFillType.pftEvenOdd,r().PolyFillType.pftEvenOdd),this.getPolygonFromClipperSolution(n)}},77953:(t,e,i)=>{"use strict";i.r(e),i.d(e,{UniquePointList:()=>h});var n=i(98729),r=i(14441),s=i(44763),o=i.n(s);function a(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var l=new THREE.Vector3,h=function(){function t(e,i,s,o){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.bbox=e,this.boxSize=this.bbox.getSize(l).length(),"number"==typeof i?(this.precisionTolerance=i,this.scale=1/this.precisionTolerance):(this.precisionTolerance=n.TOL*this.boxSize,this.scale=1/this.precisionTolerance),this.precisionToleranceSq=this.precisionTolerance*this.precisionTolerance,this.snapBaseX=this.bbox.min.x,this.snapBaseY=this.bbox.min.y,this.pts=[],this.xymap=new Map,o&&(this.quadTreeVerts=new r.QuadTree(e.min.x,e.min.y,e.max.x,e.max.y,i)),this.vertexConstructor=s}var e,i,s;return e=t,(i=[{key:"findOrAddPoint",value:function(t,e,i){for(var n,r=0|(t-this.snapBaseX)*this.scale,s=0|(e-this.snapBaseY)*this.scale,a=1/0,l=r-1;l<=r+1;l++){var h=this.xymap.get(l);if(h)for(var u=s-1;u<=s+1;u++){var p=h.get(u);if(p){var d=(p.x-t)*(p.x-t)+(p.y-e)*(p.y-e);d<a&&(n=p,a=d)}}}if(a>this.precisionToleranceSq&&(n=void 0),void 0===n){var f=this.xymap.get(r);f||(f=new Map,this.xymap.set(r,f)),n=this.vertexConstructor?new this.vertexConstructor(t,e):new(o().Point)(t,e),f.set(s,n),n.id=this.pts.length,this.pts.push(n),this.quadTreeVerts&&this.quadTreeVerts.addItem(n)}if(void 0!==i){if("number"==typeof i)-1===n.dbIds.indexOf(i)&&n.dbIds.push(i);else if(i)for(var c=0;c<i.length;c++){var y=i[c];-1===n.dbIds.indexOf(y)&&n.dbIds.push(y)}n.dbIdsChanged=!0}return n}},{key:"forEach",value:function(t){this.pts.forEach(t)}},{key:"delete",value:function(t){this.pts[t.id]=void 0,this.quadTreeVerts&&this.quadTreeVerts.deleteItem(t)}},{key:"compact",value:function(){for(var t=[],e=0,i=this.pts.length;e<i;e++){var n=this.pts[e];n&&(n.oldid=n.id,n.id=t.length,t.push(n))}this.pts=t}},{key:"enumInBox",value:function(t,e,i,n,r){this.quadTreeVerts.enumInBox(t,e,i,n,r)}}])&&a(e.prototype,i),s&&a(e,s),t}()},14441:(t,e,i)=>{"use strict";i.r(e),i.d(e,{QuadTree:()=>l});var n=i(4449),r=i(2102);function s(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var o=Autodesk.Viewing.Private.logger,a={x:0,y:0},l=function(){function t(e,i,n,r,s,o){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.items=[],this.children=null,this.itemCount=0,this.extraDistance=s,this.minx=e,this.miny=i,this.maxx=n,this.maxy=r,this.itemHandler=o}var e,i,l;return e=t,(i=[{key:"addItem",value:function(t){if(this.itemCount++,this.children){for(var e=0,i=null,n=0;n<4;n++)this.children[n].intersectsItem(t)&&(i=this.children[n],e++);1===e?i.addItem(t):0!==e&&this.items.push(t)}else this.items.push(t),this.items.length>16&&this.subdivide();return this.itemCount}},{key:"deleteItem",value:function(t){if(!this.intersectsItem(t))return 0;if(this.items){var e=this.items.indexOf(t);if(e>=0)return this.items.splice(e,1),this.itemCount--,1}if(this.children){for(var i=0,n=0;n<4;n++)i+=this.children[n].deleteItem(t),this.children[n].itemCount;return 1===i?(this.itemCount--,1):(o.warn("Did not find item to delete. Something is wrong.",i),0)}return 0}},{key:"intersectsBox",value:function(t,e,i,n){var s=this.extraDistance;return(0,r.xBoxBox)(t,e,i,n,this.minx-s,this.miny-s,this.maxx+s,this.maxy+s)}},{key:"intersectsItem",value:function(t){return this.itemHandler?this.itemHandler.intersectsBox(t,this.minx-this.extraDistance,this.miny-this.extraDistance,this.maxx+this.extraDistance,this.maxy+this.extraDistance):t.v1?(0,n.xLineBox)(t.v1.x,t.v1.y,t.v2.x,t.v2.y,this.minx-this.extraDistance,this.miny-this.extraDistance,this.maxx+this.extraDistance,this.maxy+this.extraDistance):this.intersectsBox(t.x,t.y,t.x,t.y)}},{key:"findSplitPoint",value:function(){var t=[],e=[];if(this.itemHandler)for(var i=0;i<this.items.length;i++)this.itemHandler.getPoint(this.items[i],a),t.push(a.x),e.push(a.y);else if(this.items[0].v1)for(var n=0;n<this.items.length;n++)t.push(this.items[n].v1.x),e.push(this.items[n].v1.y);else for(var r=0;r<this.items.length;r++)t.push(this.items[r].x),e.push(this.items[r].y);t.sort((function(t,e){return t-e})),e.sort((function(t,e){return t-e}));var s=t[0|(t.length+1)/2]-this.extraDistance-1e-20,o=e[0|(e.length+1)/2]-this.extraDistance-1e-20;return s<=this.minx||s>=this.maxx||o<=this.miny||o>=this.maxy?null:{midx:s,midy:o}}},{key:"subdivide",value:function(){if(this.children)o.error("Attempt to subdivide already split node");else if(this.items.length){var e=this.minx,i=this.miny,n=this.maxx,r=this.maxy,s=this.findSplitPoint();if(s){var a=s.midx,l=s.midy;this.children=new Array(4),this.children[0]=new t(e,i,a,l,this.extraDistance,this.itemHandler),this.children[1]=new t(a,i,n,l,this.extraDistance,this.itemHandler),this.children[2]=new t(a,l,n,r,this.extraDistance,this.itemHandler),this.children[3]=new t(e,l,a,r,this.extraDistance,this.itemHandler);for(var h=[],u=0,p=this.items.length;u<p;u++){for(var d=0,f=null,c=0;c<4;c++)this.children[c].intersectsItem(this.items[u])&&(f=this.children[c],d++);0===d?o.error("Expected at least one overlap"):1===d?f.addItem(this.items[u]):h.push(this.items[u])}this.items=h}}else o.error("Attempt to subdivide empty node")}},{key:"enumNearItems",value:function(t,e){if(this.intersectsItem(t)){if(this.items)for(var i=0;i<this.items.length;i++)e(this.items[i]);if(this.children)for(var n=0;n<4;n++)this.children[n].enumNearItems(t,e)}}},{key:"enumInBox",value:function(t,e,i,s,o){if(this.intersectsBox(t,e,i,s)){if(this.items)for(var a=0;a<this.items.length;a++){var l=this.items[a];this.itemHandler?this.itemHandler.intersectsBox(l,t,e,i,s)&&o(l):l.v1?(0,n.xLineBox)(l.v1.x,l.v1.y,l.v2.x,l.v2.y,t,e,i,s)&&o(l):(0,r.xBoxBox)(l.x,l.y,l.x,l.y,t,e,i,s)&&o(l)}if(this.children)for(var h=0;h<4;h++)this.children[h].enumInBox(t,e,i,s,o)}}},{key:"pointInPolygonRec",value:function(t,e,i){var n=t.v1.x,r=t.v1.y,s=r>=i,o=t.v2.x,a=t.v2.y,l=a>=i;s!=l&&(a-i)*(n-o)>=(o-e)*(r-a)==l&&(this.pipResult=!this.pipResult)}},{key:"pointInPolygon",value:function(t,e){var i=this;return this.pipResult=!1,this.enumInBox(-1/0,e,1/0,e,(function(n){i.pointInPolygonRec(n,t,e)})),this.pipResult}}])&&s(e.prototype,i),l&&s(e,l),t}()},2102:(t,e,i)=>{"use strict";function n(t,e,i,n,r,s,o,a){return t<=o&&e<=a&&i>=r&&n>=s}i.r(e),i.d(e,{xBoxBox:()=>n})},97967:(t,e,i)=>{"use strict";i.r(e),i.d(e,{xBoxPlane:()=>r});var n=new THREE.Vector3;function r(t,e){n.set(e.min.x,e.min.y,e.min.z);var i=t.distanceToPoint(n),r=Math.sign(i);n.set(e.min.x,e.min.y,e.max.z);var s=t.distanceToPoint(n);return Math.sign(s)!==r||(n.set(e.min.x,e.max.y,e.min.z),s=t.distanceToPoint(n),Math.sign(s)!==r||(n.set(e.min.x,e.max.y,e.max.z),s=t.distanceToPoint(n),Math.sign(s)!==r||(n.set(e.max.x,e.min.y,e.min.z),s=t.distanceToPoint(n),Math.sign(s)!==r||(n.set(e.max.x,e.min.y,e.max.z),s=t.distanceToPoint(n),Math.sign(s)!==r||(n.set(e.max.x,e.max.y,e.min.z),s=t.distanceToPoint(n),Math.sign(s)!==r||(n.set(e.max.x,e.max.y,e.max.z),s=t.distanceToPoint(n),Math.sign(s)!==r))))))}},4449:(t,e,i)=>{"use strict";i.r(e),i.d(e,{xLineBox:()=>r});function n(t,e,i,n,r,s){var o;return o=0,t<i?o|=1:t>r&&(o|=2),e<n?o|=4:e>s&&(o|=8),o}function r(t,e,i,r,s,o,a,l){for(var h=n(t,e,s,o,a,l),u=n(i,r,s,o,a,l),p=!1;;){if(!(h|u)){p=!0;break}if(h&u)break;var d=void 0,f=void 0,c=h||u;8&c?(d=t+(i-t)*(l-e)/(r-e),f=l):4&c?(d=t+(i-t)*(o-e)/(r-e),f=o):2&c?(f=e+(r-e)*(a-t)/(i-t),d=a):1&c&&(f=e+(r-e)*(s-t)/(i-t),d=s),c===h?h=n(t=d,e=f,s,o,a,l):u=n(i=d,r=f,s,o,a,l)}return p}},90865:(t,e,i)=>{"use strict";function n(t){return Math.abs(t)}i.r(e),i.d(e,{ONE_INTERSECTION:()=>s,OVERLAP:()=>o,pointOnLine:()=>a,segmentsIntersect:()=>l});var r=i(98729).TOL,s=4,o=5;function a(t,e,i,n,s,o){if(i.length<r)return!1;var a=(t-i.v1.x)*i.dx+(e-i.v1.y)*i.dy;s||(s=r*i.length);var l=a/i.length2;if(n&&(l*i.length<-s||l*i.length>i.length+s))return!1;var h=i.v1.x+l*i.dx,u=i.v1.y+l*i.dy,p=(h-t)*(h-t)+(u-e)*(u-e);return o&&(o.x=h,o.y=u,o.d=Math.sqrt(p),o.u=l),p<s*s}function l(t,e,i){var l=e.dy*t.dx-e.dx*t.dy,h=e.dx*(t.v1.y-e.v1.y)-e.dy*(t.v1.x-e.v1.x),u=t.dx*(t.v1.y-e.v1.y)-t.dy*(t.v1.x-e.v1.x);if(n(h)<r&&n(u)<r&&n(l)<r)return null;if(n(l)<r)return function(t,e,i){if(!a(e.v1.x,e.v1.y,t,!1,i))return null;var n={status:o,e1:[],e2:[]},r=a(e.v1.x,e.v1.y,t,!0,i),s=a(e.v2.x,e.v2.y,t,!0,i);if(r&&s)return n.e1.push(e.v1.x,e.v1.y,e.v2.x,e.v2.y),n;var l=a(t.v1.x,t.v1.y,e,!0,i),h=a(t.v2.x,t.v2.y,e,!0,i);return r&&n.e1.push(e.v1.x,e.v1.y),s&&n.e1.push(e.v2.x,e.v2.y),l&&n.e2.push(t.v1.x,t.v1.y),h&&n.e2.push(t.v2.x,t.v2.y),n}(t,e,i);var p=h/l,d=p*t.length;if(d<-i||d>t.length+i)return null;var f=u/l*e.length;if(f<-i||f>e.length+i)return null;var c=t.v1.x+p*t.dx,y=t.v1.y+p*t.dy;return{status:s,e1:[c,y],e2:[c,y]}}},65138:(t,e,i)=>{"use strict";i.r(e),i.d(e,{xMeshPlane:()=>l,makePlaneBasis:()=>h,convertToPlaneCoords:()=>u});var n=i(98729),r=i(81889),s=Autodesk.Viewing.Private.VertexEnumerator,o=new THREE.Matrix4,a=new THREE.Plane;function l(t,e,i){var n=e.geometry;if(n){var l=i.length,h=e.matrixWorld;o.copy(h).invert(),a.copy(t).applyMatrix4(o),s.enumMeshTriangles(n,(function(t,n,s,o,l,h){(0,r.xTrianglePlane)(a,t,n,s,o,l,h,i,e.fragId)}));for(var u=l,p=i.length;u<p;u++)i[u].v1.applyMatrix4(h),i[u].v2.applyMatrix4(h)}}function h(t){var e=new THREE.Vector3(0,0,1),i=t.normal.clone().cross(e);i=i.normalize();var r,s,o,a,l,h,u,p,d,f,c=e.dot(t.normal),y=new THREE.Matrix4;return(0,n.isZero)(i.x)&&(0,n.isZero)(i.y)&&(0,n.isZero)(i.z)?y.elements[14]=c*t.constant:(r=i,s=y,o=c,a=Math.sqrt(1-o*o),l=1-o,h=r.x,u=r.y,p=r.z,d=l*h,f=l*u,s.set(d*h+o,d*u-a*p,d*p+a*u,0,d*u+a*p,f*u+o,f*p-a*h,0,d*p-a*u,f*p+a*h,l*p*p+o,0,0,0,0,1),y.elements[14]=t.constant),y}function u(t,e,i){for(var n=0;n<e.length;n++){var r=e[n];r.v1.applyMatrix4(t),r.v2.applyMatrix4(t),i.expandByPoint(r.v1),i.expandByPoint(r.v2)}}},25484:(t,e,i)=>{"use strict";i.r(e),i.d(e,{xPlaneSegment:()=>s});var n=i(98729),r=new THREE.Vector3;function s(t,e,i,s,o){var a=r.subVectors(i,e),l=t.normal.dot(a);if((0,n.isZero)(l))return s.copy(e),o.copy(i),2;l=1/l;var h=-(e.dot(t.normal)*l+t.constant*l);if(h<-n.TOL||h>1+n.TOL)return 0;var u=a.multiplyScalar(h).add(e);return s.copy(u),1}},81889:(t,e,i)=>{"use strict";i.r(e),i.d(e,{xTrianglePlane:()=>h});var n=i(98729),r=i(25484),s=Autodesk.Viewing.Private.logger;function o(t,e,i,n,r,s,o){this.v1=t.clone(),this.v2=e.clone()}var a=new THREE.Vector3,l=new THREE.Vector3;function h(t,e,i,h,u,p,d,f,c){var y=t.distanceToPoint(e),v=t.distanceToPoint(i),x=t.distanceToPoint(h);if(y<-n.TOL&&v<-n.TOL&&x<-n.TOL)return null;if(y>n.TOL&&v>n.TOL&&x>n.TOL)return null;var g,P,m,C,_,I,E=Math.sign(y),T=Math.sign(v),b=Math.sign(x);if(0===E&&0===T&&0===b)return null;if(E!==T){var L=(0,r.xPlaneSegment)(t,e,i,a,l);if(2===L)return void f.push(new o(e,i,u,u,p,p,c));1===L?(m=u,C=p,g=a.clone()):s.warn("Unexpected zero intersections where at least one was expected")}if(T!==b){var S=(0,r.xPlaneSegment)(t,i,h,a,l);if(2===S)return void f.push(new o(i,h,p,p,d,d,c));1===S?g?a.distanceTo(g)>n.TOL&&(_=p,I=d,P=a.clone()):(m=p,C=d,g=a.clone()):s.warn("Unexpected zero intersections where at least one was expected")}if(b!==E){var A=(0,r.xPlaneSegment)(t,h,e,a,l);if(2===A)return void f.push(new o(h,e,d,d,u,u,c));1===A?g?a.distanceTo(g)>n.TOL&&(_=d,I=u,P=a.clone()):s.warn("Unexpected single intersection point"):s.warn("Unexpected zero intersections where at least one was expected")}g&&P&&f.push(new o(g,P,m,C,_,I,c))}},65689:t=>{"use strict";t.exports={version:"1.5.0"}}},e={};function i(n){var r=e[n];if(void 0!==r)return r.exports;var s=e[n]={exports:{}};return t[n](s,s.exports,i),s.exports}i.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return i.d(e,{a:e}),e},i.d=(t,e)=>{for(var n in e)i.o(e,n)&&!i.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})},i.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),i.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),i.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})};var n=i(68099);Autodesk.Extensions.CompGeom=n})();